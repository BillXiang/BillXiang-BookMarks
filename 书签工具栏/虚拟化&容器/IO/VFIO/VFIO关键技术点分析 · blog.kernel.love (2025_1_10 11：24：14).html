<!DOCTYPE html> <html lang=en style><!--
 Page saved with SingleFile 
 url: https://blog.kernel.love/vfio-insight.html 
 saved date: Fri Jan 10 2025 11:24:14 GMT+0800 (中国标准时间)
--><meta charset=utf-8>
<meta http-equiv=X-UA-Compatible content="IE=edge">
<meta name=viewport content="width=device-width, initial-scale=1.0">
<style>@-webkit-keyframes explode{0%{opacity:0;transform:translateX(10px)}20%{opacity:1}50%{opacity:1}to{opacity:0;transform:translateX(25px)}}@keyframes explode{0%{opacity:0;transform:translateX(10px)}20%{opacity:1}50%{opacity:1}to{opacity:0;transform:translateX(25px)}}@-webkit-keyframes shockwave{0%{box-shadow:0 0 2px;opacity:1;transform:scale(1)}to{box-shadow:0 0 50px,inset 0 0 10px;opacity:0;transform:scale(1)}}@keyframes shockwave{0%{box-shadow:0 0 2px;opacity:1;transform:scale(1)}to{box-shadow:0 0 50px,inset 0 0 10px;opacity:0;transform:scale(1)}}@-webkit-keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}@-webkit-keyframes hideThenShow{0%{opacity:1;transform:translateY(0)}20%{opacity:0;transform:translateY(-10px)}50%{transform:translateY(10px)}80%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes hideThenShow{0%{opacity:1;transform:translateY(0)}20%{opacity:0;transform:translateY(-10px)}50%{transform:translateY(10px)}80%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}/*!PhotoSwipe main CSS by Dmitry Semenov | photoswipe.com | MIT license *//*!PhotoSwipe Default UI CSS by Dmitry Semenov | photoswipe.com | MIT license */@media (-webkit-min-device-pixel-ratio:1.1),(-webkit-min-device-pixel-ratio:1.09375),(min-resolution:1.1dppx),(min-resolution:105dpi){}@media screen and (max-width:1024px){}@-webkit-keyframes clockwise{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes clockwise{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@-webkit-keyframes donut-rotate{0%{transform:rotate(0)}50%{transform:rotate(-140deg)}to{transform:rotate(0)}}@keyframes donut-rotate{0%{transform:rotate(0)}50%{transform:rotate(-140deg)}to{transform:rotate(0)}}/*!* Bootstrap v2.3.2 * * Copyright 2013 Twitter,Inc * Licensed under the Apache License v2.0 * http://www.apache.org/licenses/LICENSE-2.0 * * Designed and built with all the love in the world by @mdo and @fat. */article,aside,nav,section{display:block}html{font-size:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}a:active,a:hover{outline:0}img{-ms-interpolation-mode:bicubic;height:auto;max-width:100%;vertical-align:middle}button,input{margin:0;vertical-align:middle}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}button{-webkit-appearance:button}button{cursor:pointer}body{background-color:#fff;color:#333;font-size:14px;line-height:20px}a{text-decoration:none}a:focus,a:hover{color:#005580;text-decoration:underline}.row-fluid{width:100%}.row-fluid:after,.row-fluid:before{content:"";display:table;line-height:0}.row-fluid:after{clear:both}.row-fluid [class*=span]{box-sizing:border-box;display:block;float:left;margin-left:2.127659574468085%;min-height:30px}.row-fluid [class*=span]:first-child{margin-left:0}.row-fluid .span10{width:82.97872340425532%}.row-fluid .span8{width:65.95744680851064%}.row-fluid .span2{width:14.893617021276595%}.row-fluid .span1{width:6.382978723404255%}.row-fluid .offset2{margin-left:19.148936170212764%}.row-fluid .offset2:first-child{margin-left:17.02127659574468%;*margin-left:16.914893617021278%}.container-fluid{padding-left:20px;padding-right:20px}.container-fluid:after,.container-fluid:before{content:"";display:table;line-height:0}.container-fluid:after{clear:both}p{margin:0 0 10px}strong{font-weight:700}em{font-style:italic}ul{margin:0 0 10px 25px;padding:0}li{line-height:20px}hr{border:0;border-bottom:1px solid #fff;border-top:1px solid #eee;margin:20px 0}code,pre{border-radius:3px}pre{display:block;line-height:20px;margin:0 0 10px;padding:9.5px}pre code{background-color:transparent;border:0;color:inherit;padding:0;white-space:pre-wrap}form{margin:0 0 20px}button{font-size:14px;font-weight:400;line-height:20px}button{font-family:Helvetica Neue,Helvetica,Arial,sans-serif}input[type=text]{color:#555;display:inline-block;height:20px;vertical-align:middle}input{width:206px}input[type=text]{background-color:#fff;border:1px solid #ccc;box-shadow:inset 0 1px 1px rgba(0,0,0,.075);transition:border .2s linear,box-shadow .2s linear}.uneditable-input:focus,input[type=color]:focus,input[type=date]:focus,input[type=datetime-local]:focus,input[type=datetime]:focus,input[type=email]:focus,input[type=month]:focus,input[type=number]:focus,input[type=password]:focus,input[type=search]:focus,input[type=tel]:focus,input[type=text]:focus,input[type=time]:focus,input[type=url]:focus,input[type=week]:focus,textarea:focus{border-color:rgba(82,168,236,.8);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(82,168,236,.6);outline:0;outline:thin dotted\9}input:-moz-placeholder,textarea:-moz-placeholder{color:#999}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#999}input{margin-left:0}input:focus:invalid,select:focus:invalid,textarea:focus:invalid{border-color:#ee5f5b;color:#b94a48}input:focus:invalid:focus,select:focus:invalid:focus,textarea:focus:invalid:focus{border-color:#e9322d;box-shadow:0 0 6px #f8b9b7}input.search-query{padding-left:14px;padding-right:14px}.collapse{position:relative;transition:height .35s ease}.nav{list-style:none;margin-bottom:20px;margin-left:0}.nav>li>a{display:block}.nav>li>a:focus,.nav>li>a:hover{background-color:#eee;text-decoration:none}.navbar{overflow:visible}.navbar-inner{background-color:#fafafa;background-image:linear-gradient(180deg,#fff,#f2f2f2);background-repeat:repeat-x;border:1px solid #d4d4d4;min-height:40px;padding-left:20px;padding-right:20px}.navbar-inner:after,.navbar-inner:before{content:"";display:table;line-height:0}.navbar-inner:after{clear:both}.nav-collapse.collapse{height:auto;overflow:visible}.navbar .brand{color:#777;display:block;float:left;font-size:20px;font-weight:200;margin-left:-20px;padding:10px 20px;text-shadow:0 1px 0#fff}.navbar .brand:focus,.navbar .brand:hover{text-decoration:none}.navbar-search{float:left;margin-bottom:0;margin-top:5px;position:relative}.navbar-search .search-query{border-radius:15px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:13px;font-weight:400;line-height:1;margin-bottom:0;padding:4px 14px}.navbar-static-top{margin-bottom:0;position:static}.navbar-static-top .navbar-inner{border-radius:0}.navbar-static-top .navbar-inner{border-width:0 0 1px}.navbar-static-top .navbar-inner{box-shadow:0 1px 10px rgba(0,0,0,.1)}.navbar .nav{display:block;left:0;margin:0 10px 0 0;position:relative}.navbar .nav.pull-right{float:right;margin-right:0}.navbar .nav>li{float:left}.navbar .nav>li>a{color:#777;text-decoration:none;text-shadow:0 1px 0#fff}.navbar .nav>li>a:focus,.navbar .nav>li>a:hover{background-color:transparent;color:#333;text-decoration:none}@-webkit-keyframes progress-bar-stripes{0%{background-position:40px 0}to{background-position:0 0}}@keyframes progress-bar-stripes{0%{background-position:40px 0}to{background-position:0 0}}/*!* Bootstrap Responsive v2.3.2 * * Copyright 2013 Twitter,Inc * Licensed under the Apache License v2.0 * http://www.apache.org/licenses/LICENSE-2.0 * * Designed and built with all the love in the world by @mdo and @fat. */@-ms-viewport{width:device-width}@media (min-width:768px) and (max-width:979px){}@media (max-width:767px){}@media (min-width:1200px){.row-fluid{width:100%}.row-fluid:after,.row-fluid:before{content:"";display:table;line-height:0}.row-fluid:after{clear:both}.row-fluid [class*=span]{box-sizing:border-box;display:block;float:left;margin-left:2.564102564102564%;min-height:30px}.row-fluid [class*=span]:first-child{margin-left:0}.row-fluid .span10{width:82.90598290598291%}.row-fluid .span8{width:65.81196581196582%}.row-fluid .span2{width:14.52991452991453%}.row-fluid .span1{width:5.982905982905983%}.row-fluid .offset2{margin-left:19.65811965811966%}.row-fluid .offset2:first-child{margin-left:17.094017094017094%;*margin-left:16.98763411529369%}input{margin-left:0}}@media (min-width:768px) and (max-width:979px){.row-fluid{width:100%}.row-fluid:after,.row-fluid:before{content:"";display:table;line-height:0}.row-fluid:after{clear:both}.row-fluid [class*=span]{box-sizing:border-box;display:block;float:left;margin-left:2.7624309392265194%;min-height:30px}.row-fluid [class*=span]:first-child{margin-left:0}.row-fluid .span10{width:82.87292817679558%}.row-fluid .span8{width:65.74585635359117%}.row-fluid .span2{width:14.3646408839779%}.row-fluid .span1{width:5.801104972375691%}.row-fluid .offset2{margin-left:19.88950276243094%}.row-fluid .offset2:first-child{margin-left:17.12707182320442%;*margin-left:17.02068884448102%}input{margin-left:0}}@media (max-width:767px){body{padding-left:20px;padding-right:20px}.navbar-static-top{margin-left:-20px;margin-right:-20px}.container-fluid{padding:0}.row-fluid{width:100%}.row-fluid [class*=span]{box-sizing:border-box;display:block;float:none;margin-left:0;width:100%}.row-fluid [class*=offset]:first-child{margin-left:0}}@media (max-width:480px){.nav-collapse{-webkit-transform:translateZ(0)}}@media (max-width:979px){body{padding-top:0}.navbar .brand{margin:0 0 0-5px;padding-left:10px;padding-right:10px}.nav-collapse{clear:both}.nav-collapse .nav{margin:0 0 10px}.nav-collapse .nav>li{float:none}.nav-collapse .nav>li>a{margin-bottom:2px}.nav-collapse .nav>li>a{border-radius:3px;color:#777;font-weight:700;padding:9px 15px}.nav-collapse .dropdown-menu a:focus,.nav-collapse .dropdown-menu a:hover,.nav-collapse .nav>li>a:focus,.nav-collapse .nav>li>a:hover{background-color:#f2f2f2}.nav-collapse .navbar-search{border-bottom:1px solid #f2f2f2;border-top:1px solid #f2f2f2;box-shadow:inset 0 1px 0 hsla(0,0%,100%,.1),0 1px 0 hsla(0,0%,100%,.1);float:none;margin:10px 0;padding:10px 15px}.navbar .nav-collapse .nav.pull-right{float:none;margin-left:0}.nav-collapse.collapse{height:0;overflow:hidden}}@media (min-width:980px){.nav-collapse.collapse{height:auto!important;overflow:visible!important}}.codecopy{overflow:visible;position:relative}.codecopy button.codecopy-btn{background-color:#fe8019;border:none;border-bottom-left-radius:var(--borderRadius);border-top-right-radius:var(--borderRadius);box-shadow:none;font-size:.9rem;min-height:auto;padding:.2rem;position:absolute;right:0;top:0;z-index:1}.codecopy button.codecopy-btn:focus,.codecopy button.codecopy-btn:hover{box-shadow:none}div.highlight{border-radius:var(--borderRadius);margin-bottom:20px}pre{word-wrap:normal;color:#ebdbb2;overflow:auto;white-space:pre;word-break:normal}@media (max-width:979px){}:root{--borderRadius:4px;--mutedTextColor:#696969}body,html{height:100%}body{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}div#content{-ms-flex:1 0 auto;flex:1 0 auto}footer{-ms-flex-line-pack:center;-ms-flex-align:center;-ms-flex-negative:0;-ms-flex-pack:end;align-content:center;align-items:center;border-top:1px solid rgba(0,0,0,.2);display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;flex-shrink:0;-ms-flex-wrap:wrap;flex-wrap:wrap;justify-content:flex-end;margin:15px 0 0;min-height:40px;padding:0 3px}footer div{margin:3px 0}footer div:first-child{margin-right:auto}footer div#fpowered{margin-left:auto;margin-right:unset}:lang(zh){font-family:Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,Helvetica,Arial,sans-serif}a{color:#3875d7}hr{border-width:3px}.top-menu li a{font-weight:700}#comment-message,#post-share-links:not(a){color:#6f6f6f;text-shadow:1px 1px 3px rgba(50,50,50,.15)}#post-share-links a{text-shadow:0 0}.list-of-tags{list-style:none;margin:0;overflow:hidden}.list-of-tags li{margin:0}.list-of-tags a{background:#eee;border-radius:var(--borderRadius);color:#222;margin:2px;padding:3px 6px;text-decoration:none}.tags-in-article li{float:none;line-height:28px}.article-content{text-align:justify}.article-content{max-width:50em}.article-content p{margin:0 0 20px}.article-content ul:not(.related-posts-list):not(.articles-timeline){font-size:inherit;list-style-type:disc}.article-content ul.related-posts-list{list-style-type:square}.article-content li{line-height:1.7em;list-style-position:outside;margin:1px 0 1px 20px}h1,h2,h3,h4{margin:10px 0}.page-header{border-bottom:2px solid maroon;color:maroon;margin:10px 0 30px}.page-header h1{border:none;line-height:1em}ul.articles-timeline{list-style:none;margin:0;padding-bottom:30px}ul.articles-timeline .next-article{float:right;margin:0}ul.articles-timeline .previous-article{float:left;margin:0}.article-content img{border:2px solid #eee;padding:5px}p#post-share-links{text-align:right}a.category-link{color:#333}a.category-link:hover{text-decoration:none}@media (min-width:1200px){}@media (max-width:767px){}.article-content img{text-align:center}.navbar .nav>li>a{float:none;padding:11px 15px 13px}.site-name{color:var(--mutedTextColor)}article div.article-content ul:not(.articles-timeline):not(.related-posts-list) a,article ol a:not(.ampl),article p:not(#list-of-translations):not(#post-share-links) a:not(.ampl),blockquote a:not(.ampl){color:#000;display:inline-block;position:relative}article div.article-content ul:not(.articles-timeline):not(.related-posts-list) a:after,article ol a:not(.ampl):after,article p:not(#list-of-translations):not(#post-share-links) a:not(.ampl):after,blockquote a:not(.ampl):after{background:silver;content:"";height:1px;left:0;opacity:1;position:absolute;top:100%;transform:translateY(0);transition:opacity .3s,transform .3s;width:100%}article div.article-content ul:not(.articles-timeline):not(.related-posts-list) a:hover,article ol a:not(.ampl):hover,article p:not(#list-of-translations):not(#post-share-links) a:not(.ampl):hover,blockquote a:not(.ampl):hover{color:#4169e1;text-decoration:none;transition:color .1s}article div.article-content ul:not(.articles-timeline):not(.related-posts-list) a:hover:after,article ol a:not(.ampl):hover:after,article p:not(#list-of-translations):not(#post-share-links) a:not(.ampl):hover:after,blockquote a:not(.ampl):hover:after{opacity:0;transform:translateY(5px)}article div.article-content ul:not(.articles-timeline):not(.related-posts-list) a:focus,article ol a:not(.ampl):focus,article p:not(#list-of-translations):not(#post-share-links) a:not(.ampl):focus,blockquote a:not(.ampl):focus{text-decoration:none}.highlight{background:#282828;background-color:#282828;color:#ebdbb2}.highlight .err{background-color:#282828;color:#ebdbb2}.highlight .k{background-color:#282828;color:#fe8019}.highlight .n{background-color:#282828;color:#ebdbb2}.highlight .o{background-color:#282828;color:#fe8019}.highlight .p{background-color:#282828;color:#ebdbb2}.highlight .cm{background-color:#282828;color:#928374;font-style:italic}.highlight .cp{background-color:#282828;color:#8ec07c}.highlight .c1{background-color:#282828;color:#928374;font-style:italic}.highlight .kt{background-color:#282828;color:#fabd2f}.highlight .s{background-color:#282828;color:#b8bb26}.highlight .nb{background-color:#282828;color:#fabd2f}.highlight .nc{background-color:#282828;color:#ebdbb2}.highlight .nf{background-color:#282828;color:#fabd2f}.highlight .nl{background-color:#282828;color:#fb4934}.highlight .nv{background-color:#282828;color:#ebdbb2}.highlight .ow{background-color:#282828;color:#fe8019}.highlight .w{background-color:#282828;color:#ebdbb2}.highlight .mh,.highlight .mi{background-color:#282828;color:#d3869b}div#sidebar-social-link a svg{-webkit-filter:saturate(0) brightness(.7);filter:saturate(0) brightness(.7);height:20px;margin-right:3px;position:relative;transition:all .2s ease-in-out;width:20px;z-index:0}div#sidebar-social-link a{text-decoration:none}div#sidebar-social-link a svg:hover{-webkit-filter:none;filter:none;transform:scale(2.5);z-index:1}section#article-sidebar{float:right;font-size:.9em}@font-face{font-family:"PT Serif";font-style:italic;font-weight:400;src:local("PT Serif Italic"),local(PTSerif-Italic)}@font-face{font-family:"PT Serif";font-style:italic;font-weight:700;src:local("PT Serif Bold Italic"),local(PTSerif-BoldItalic)}@font-face{font-family:"PT Serif";font-style:normal;font-weight:400;src:local("PT Serif"),local(PTSerif-Regular)}@font-face{font-family:"PT Serif";font-style:normal;font-weight:700;src:local("PT Serif Bold"),local(PTSerif-Bold)}@font-face{font-family:PT Mono;font-style:normal;font-weight:400;src:local("PT Mono"),local(PTMono-Regular)}@font-face{font-family:"PT Serif Caption";font-style:italic;font-weight:400;src:local("PT Serif Caption Italic"),local(PTSerif-CaptionItalic)}@font-face{font-family:"PT Serif Caption";font-style:normal;font-weight:400;src:local("PT Serif Caption"),local(PTSerif-Caption)}@font-face{font-family:PT Sans;font-style:italic;font-weight:400;src:local("PT Sans Italic"),local(PTSans-Italic)}@font-face{font-family:PT Sans;font-style:italic;font-weight:700;src:local("PT Sans Bold Italic"),local(PTSans-BoldItalic)}@font-face{font-family:PT Sans;font-style:normal;font-weight:400;src:local("PT Sans"),local(PTSans-Regular)}@font-face{font-family:PT Sans;font-style:normal;font-weight:700;src:local("PT Sans Bold"),local(PTSans-Bold)}:root{--headingBorderBottomWidth:1px;--headingBorderBottomStyle:solid;--headingOthersLineHeight:1.3rem;--headingOthersH4FontSize:1.1rem;--sansFontFamily:"PT Sans","Helvetica Neue",Helvetica,Arial,sans-serif;--monoFontFamily:"PT Mono",Monaco,Menlo,Consolas,"Courier New",monospace;--serifFontFamily:"PT Serif",Georgia,"Times New Roman",Times,serif;--serifHeadingFontFamily:"PT Serif Caption",Baskerville,Garamond,Georgia,"DejaVu Serif","Times New Roman",Times,serif}body{font-family:var(--sansFontFamily);margin:0}.page-header,h1,h2,h3,h4{font-weight:400;text-align:left}header.page-header h1{font-family:var(--serifHeadingFontFamily)}.list-of-tags,h2,h3,h4{font-family:var(--sansFontFamily)}@media (min-width:1200px){h1{font-size:2.4rem}}@media (min-width:1200px){h2{font-size:2.2rem}}@media (min-width:1200px){h3{font-size:2rem}}@media (min-width:1200px){h4{font-size:1.8rem}}@media (min-width:1200px){}@media (min-width:1200px){}h1,h2,h3{border-bottom:var(--headingBorderBottomWidth) var(--headingBorderBottomStyle) #d3d3d3;line-height:1.3em}h1 a,h1 a:hover{color:inherit;text-decoration:none}section#article-sidebar h4{line-height:var(--headingOthersLineHeight)}section#article-sidebar h4{font-size:var(--headingOthersH4FontSize)}.site-name,code,pre{font-family:var(--monoFontFamily)}code,pre{font-size:.9rem}.brand .site-name{vertical-align:middle}@media (min-width:1200px){.brand .site-name{font-size:1.5rem}}.article-content{font-family:var(--serifFontFamily);font-size:1.125rem;font-weight:400;line-height:1.6;text-transform:none}footer{font-family:var(--sansFontFamily);font-size:.8rem}span.superscript{font-size:.67rem;vertical-align:super}.navbar .nav>li>a{font-size:1rem}</style>
<meta name=author content="Yori Fang">
<meta name=description content="VFIO Insight Into VFIO
">
<meta property=og:type content=article>
<meta name=twitter:card content=summary>
<meta name=keywords content="virtualization, virt, ">
<meta property=og:title content="VFIO关键技术点分析 ">
<meta property=og:url content=https://blog.kernel.love/vfio-insight.html>
<meta property=og:description content="VFIO Insight Into VFIO">
<meta property=og:site_name content=blog.kernel.love>
<meta property=og:article:author content="Yori Fang">
<meta property=og:article:published_time content=2018-05-28T23:00:00+08:00>
<meta property=og:article:modified_time content=2018-05-28T23:00:00+08:00>
<meta name=twitter:title content="VFIO关键技术点分析 ">
<meta name=twitter:description content="VFIO Insight Into VFIO">
<title>VFIO关键技术点分析 · blog.kernel.love
</title>
<meta name=referrer content=no-referrer><style>.sf-hidden{display:none!important}</style><link rel=canonical href=https://blog.kernel.love/vfio-insight.html><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"></head>
 <body>
 <div id=content>
 <div class="navbar navbar-static-top">
 <div class=navbar-inner>
 <div class=container-fluid>
 <a class="btn btn-navbar sf-hidden" data-toggle=collapse data-target=.nav-collapse>
 
 
 
 </a>
 <a class=brand href=https://blog.kernel.love/><span class=site-name>blog.kernel.love</span></a>
 <div class="nav-collapse collapse">
 <ul class="nav pull-right top-menu">
 <li>
 <a href=https://blog.kernel.love/>Home</a>
 </li>
 <li><a href=https://blog.kernel.love/pages/about.html>About</a></li>
 <li><a href=https://blog.kernel.love/categories.html>Categories</a></li>
 <li><a href=https://blog.kernel.love/tags.html>Tags</a></li>
 <li><a href=https://blog.kernel.love/archives.html>Archives</a></li>
 <li><form class=navbar-search action=https://blog.kernel.love/search.html> <input type=text class=search-query placeholder=Search name=q id=tipue_search_input value></form></li>
 </ul>
 </div>
 </div>
 </div>
 </div>
 <div class=container-fluid>
 <div class=row-fluid>
 <div class=span1></div>
 <div class=span10>
<article itemscope>
<div class=row-fluid>
 <header class="page-header span10 offset2">
 <h1>
 <a href=https://blog.kernel.love/vfio-insight.html>
 VFIO关键技术点分析
 </a>
 </h1>
 </header>
</div>
<div class=row-fluid>
 <div class="span8 offset2 article-content">
 
 <p>本文则主要探讨一下VFIO实现中的关键点，主要包括：</p>
<ul>
<li>VFIO中如实现对直通设备的I/O地址空间访问的？</li>
<li>VFIO中如何实现MSI/MSI-X，Interrupt Remapping，以及Posted Interrupt的支持？</li>
<li>VFIO中是如何建立DMA Remapping映射关系？</li>
<li>VFIO中又是如何支持设备热插拔的？</li>
</ul>
<p>上面4个问题你能回答上来吗？</p>
<hr>
<h3>1.VFIO中如实现对直通设备的I/O地址空间访问？</h3>
<p>在设备直通的场景下guest OS到底该如何访问设备I/O空间？
有两种方法可选：</p>
<p>方法A：直接呈现，将设备在主机上的PCI BAR呈现给guest，并通过VMCS的I/O bitmap和EPT页表使guest访问设备的PIO和MMIO都不引起VM-Exit，这样guest驱动程序可以直接访问设备的I/O地址空间。</p>
<p>方法B：建立转换表，呈现虚拟的PCI BAR给guest，当guest访问到虚拟机的I/O地址空间时VMM截获操作并通过转换表将I/O请求转发到设备在主机上的I/O地址空间上。</p>
<p>方法A看起来很高效，因为直接呈现的方式下不引入VM-Exit，但实际上是有问题的！
<strong>原因是</strong>：
设备的PCI BAR空间是由host的BIOS配置并由host操作系统直接使用的，
guest的PCI BAR空间是由guest的虚拟BIOS（例如Seabios）配置的，
那么问题来了，到底该由谁来配置设备的PCI BAR空间呢？肯定不能两个都生效否则就打架了！
我们应该阻止guest来修改真实设备的PCI BAR地址以防止造成host上PCI设备的BAR空间冲突导致可能出现的严重后果。</p>
<p>所以我们要选择方案B，建立转换表，明白这一点很重要！</p>
<p>对于直通设备的PIO访问而言，通过设置VMCS的I/O bitmap控制guest访问退出到VMM中然后通过转换表（模拟的方式）将PIO操作转发到真实物理设备上。对于MMIO的访问，可以通过EPT方式将虚拟的MMIO地址空间映射到物理设备的MMIO地址空间上，这样guest访问MMIO时并不需要VM-Exit。</p>
<p><strong>直通设备的PCI Config Space模拟</strong></p>
<p>PCI配置空间是用来报告设备I/O信息的区域，可以通过PIO或者MMIO方式进行访问。
设备直通场景的配置空间并不直接呈现给guest而是由VFIO配合qemu进行模拟的。</p>
<p>vfio_realize函数中，
QEMU会读取物理设备的PCI配置空间以此为基础然后对配置空间做些改动然后呈现给虚拟机。</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=w>    </span><span class=cm>/* Get a copy of config space */</span><span class=w>  </span><span class=c1>// 读取设备的原始PCI Config Space信息</span>
<span class=w>    </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>pread</span><span class=p>(</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>vbasedev</span><span class=p>.</span><span class=n>fd</span><span class=p>,</span><span class=w> </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>pdev</span><span class=p>.</span><span class=n>config</span><span class=p>,</span>
<span class=w>                </span><span class=n>MIN</span><span class=p>(</span><span class=n>pci_config_size</span><span class=p>(</span><span class=o>&amp;</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>pdev</span><span class=p>),</span><span class=w> </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>config_size</span><span class=p>),</span>
<span class=w>                </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>config_offset</span><span class=p>);</span><span class=w>   </span><span class=c1>// 调用vfio-pci内核中的vfio_pci_read实现</span>
<span class=w>    </span><span class=p>......</span><span class=w>              </span>
<span class=w>    </span><span class=cm>/* vfio emulates a lot for us, but some bits need extra love */</span>
<span class=w>    </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>emulated_config_bits</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>g_malloc0</span><span class=p>(</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>config_size</span><span class=p>);</span>
<span class=w>    </span><span class=c1>// 我们可以选择性的Enable/Disable一些Capability</span>
<span class=w>    </span><span class=cm>/* QEMU can choose to expose the ROM or not */</span>
<span class=w>    </span><span class=n>memset</span><span class=p>(</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>emulated_config_bits</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>PCI_ROM_ADDRESS</span><span class=p>,</span><span class=w> </span><span class=mh>0xff</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>);</span>
<span class=w>    </span><span class=cm>/* QEMU can also add or extend BARs */</span>
<span class=w>    </span><span class=n>memset</span><span class=p>(</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>emulated_config_bits</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>PCI_BASE_ADDRESS_0</span><span class=p>,</span><span class=w> </span><span class=mh>0xff</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>4</span><span class=p>);</span>
<span class=w>    </span><span class=c1>// 调用vfio_add_emulated_word修改模拟的PCI配置空间信息</span>
<span class=w>    </span><span class=n>vfio_add_emulated_word</span>
<span class=w>    </span><span class=cm>/*</span>
<span class=cm>     * Clear host resource mapping info.  If we choose not to register a</span>
<span class=cm>     * BAR, such as might be the case with the option ROM, we can get</span>
<span class=cm>     * confusing, unwritable, residual addresses from the host here.</span>
<span class=cm>     */</span>
<span class=w>    </span><span class=nf>memset</span><span class=p>(</span><span class=o>&amp;</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>pdev</span><span class=p>.</span><span class=n>config</span><span class=p>[</span><span class=n>PCI_BASE_ADDRESS_0</span><span class=p>],</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>24</span><span class=p>);</span>
<span class=w>    </span><span class=n>memset</span><span class=p>(</span><span class=o>&amp;</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>pdev</span><span class=p>.</span><span class=n>config</span><span class=p>[</span><span class=n>PCI_ROM_ADDRESS</span><span class=p>],</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>);</span>
<span class=w>    </span><span class=n>vfio_bars_prepare</span><span class=p>(</span><span class=n>vdev</span><span class=p>);</span><span class=w>    </span><span class=c1>// 重点分析</span>
<span class=w>    </span><span class=n>vfio_bars_register</span><span class=p>(</span><span class=n>vdev</span><span class=p>);</span><span class=w>   </span><span class=c1>// 重点分析</span>
<span class=w>    </span><span class=n>vfio_add_capabilities</span><span class=p>(</span><span class=n>vdev</span><span class=p>,</span><span class=w> </span><span class=n>errp</span><span class=p>);</span>
</code></pre></div></div>
<p>通常MSI/MSIX等信息都需要被QEMU修改，因为这些都是QEMU使用VFIO去模拟的。</p>
<p><strong>直通设备MMIO（BAR空间）映射</strong></p>
<p>vfio_realize函数中会对直通设备的MMIO空间进行映射，大致包含以下几个步骤:</p>
<ul>
<li>调用vfio_populate_device从VFIO中查询出设备的BAR空间信息</li>
<li>把设备的MMIO（BAR空间）重映射（mmap）到QEMU进程的虚拟地址空间</li>
<li>将该段虚拟机地址空间标记为RAM类型注册给虚拟机</li>
</ul>
<p>这样一来，guest访问MMIO地址空间时直接通过EPT翻译到HPA不需要VM-Exit。我们分析下具体流程：</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=n>vfio_realize</span>
<span class=w>    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_populate_device</span>
<span class=w>            </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_region_setup</span><span class=w>  </span>
<span class=w>                    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_get_region_info</span><span class=w>   </span><span class=c1>// call ioct VFIO_DEVICE_GET_REGION_INFO</span>
<span class=w>                    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>memory_region_init_io</span><span class=w>  </span><span class=c1>// init region-&gt;mem MR as I/O</span>
<span class=w>    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_bars_prepare</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>vfio_bar_prepare</span><span class=w>  </span><span class=c1>// probe info of each pci bar from PCI cfg space</span>
<span class=w>    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_bars_register</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>vfio_bar_register</span>
<span class=w>            </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>memory_region_init_io</span><span class=w> </span><span class=c1>// int bar-&gt;mr</span>
<span class=w>            </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>memory_region_add_subregion</span><span class=w> </span><span class=c1>// add bar-&gt;mr into region-&gt;mem MR</span>
<span class=w>            </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_region_mmap</span>
<span class=w>                </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>mmap</span><span class=w> </span><span class=c1>// map device bar space into QEMU process address space -&gt; iova</span>
<span class=w>                </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>memory_region_init_ram_device_ptr</span><span class=w> </span><span class=c1>// register iova into VM  physical AS</span>
<span class=w>                </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>memory_region_add_subregion</span><span class=w> </span><span class=c1>// add region-&gt;mmaps[i].mem into region-&gt;mem MR</span>
<span class=w>            </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>pci_register_bar</span>
</code></pre></div></div>
<p>为了方便理解这个过程，我画了一张示意图：</p>
<p><img alt=vfio-pci-bar src="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNzM3cHgiIGhlaWdodD0iMzQzcHgiIHZlcnNpb249IjEuMSIgY29udGVudD0iJmx0O214ZmlsZSB1c2VyQWdlbnQ9JnF1b3Q7TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4xOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNjYuMC4zMzU5LjE4MSBTYWZhcmkvNTM3LjM2JnF1b3Q7IHZlcnNpb249JnF1b3Q7OC42LjkmcXVvdDsgZWRpdG9yPSZxdW90O3d3dy5kcmF3LmlvJnF1b3Q7IHR5cGU9JnF1b3Q7Z2l0aHViJnF1b3Q7Jmd0OyZsdDtkaWFncmFtIGlkPSZxdW90O2U3ZGZjMTc4LWZkZTgtYjY0Ni05NDNhLTYwY2I3NzgxOTkzNiZxdW90OyBuYW1lPSZxdW90O1BhZ2UtMSZxdW90OyZndDs3VmpiY3Bzd0VQMGFQeVlEQ0loNXRKM3JURDExNjJtYlBtVVVrTEVtZ0tpUWIvMzZMa2d5WUpIVTZiaU8yNG45WUhGMnRaSjJqNDRsZW1pVXJtODR6dWRqRnBHazUxalJ1b2N1ZTQ2RGJNZUhueExaU01RT1hDU1JtTk5JWVRVd3BUK0pBaTJGTG1oRWlwYWpZQ3dSTkcrREljc3lFb29XaGpsbnE3YmJqQ1h0VVhNY0V3T1loamd4MFc4MEVuT0o5cDJMR3I4bE5KN3JrVzAva0paSEhEN0ZuQzB5TlY3UFFiUHFJODBwMXJIVVFvczVqdGlxQWFHckhocHh4b1JzcGVzUlNjcms2clRKZnRmUFdMZno1aVFUKzNSUVpWbmlaS0dXZnNzS0FjZ2dpamdwQ21oTmN4d1NOVnV4MFJtYWl6U0JsdDFEdzlXY0NpSzkwT1VLR0FGWXlGSWFLbnNoT0h2YTVoR1dPSnl4VEZ6amxDWWxQMGFWSzR5RHMzSzQ4VlE1VE5WZ1pZZ3FvNlNjczFWYWFaS01XTUk0UEdjc0E2ZGh6SEZFWWMwN01FNW9uTUZqQ0NZQytEREJqeVNac0lJS3lscUdKZUdDQWdFKzdEZ0lsamVzQXhYdmtRbkJVakNZK1ZZbEtIdVFkUU5TK2I4aExDV0NiOEJGV2M5c0x3ak9QZGx0b3pITFU4aXE1cC90S2RiTUc5eERta3BZY1Q3ZWpsRFhIUnFxOU4wMGNBMGFURVozQUF3SG4wKzI4ckMxaHRXM28veGdDNnJQTVRpdzNjUFdYeVJFMzdmMjQ0Ti9BRHA0QmgwK1hZMi92S3ZDVVZVQjJXK3RDcjVCZzd1UFh3Y25XL1QvV0JDZ25MdGNDTkFSQmVIQ1lNTFg4YnNjSEZVT0xOc3o1V0RmUDRXRHlFSHdma2c0SlUzb0lFUVFIRkVUOUYydHdRZURCdUdDTDZ1NmxGVWlXVFFvNzJid3lISUMyUmsyV1BMYm1rT3ErT1llakdmV3VXVzdHdmxlcHZUY0N6d05UQWluc0pheVZsV3V5WnFLZXowRGFLc09jajdYdEZ6ZXl6VXAySUtIYWozcW5Dd3dqNGxPcFlSSTFMcFJtblZybEtTcklocmpKTUdDTHR2MzBLNHlxUkVtakdhaVNRc1gyY2JaMGRvcHQxeVM2dHE4SFJyUlVOK001dTFFazlrd29rR3Q4YWJobHBjT3hVdFQ3eG9zYU4xZm9TSEQxZ3pkcG5nLzB1cU4xaVN0bndqRndCWjcvUjhMcGcxblJmV09BZzQvbHUzbjY5b0lyYmo4WGM0b2U4aEQrcENtb0hBcUpNeEdScFUreHZhQXZTNWV1UTBPSWgydWZoMnpGUTZuNDF4cHV4MS9KTjRCaE1ONUcrR3dkalREa0lEbnBXSXZjZkJOY1FoT1RCenNDMk9IQmZZZmk0UFZSMGEwdm52dVd2Vm5aNDRIa3dyYlZMbkFQN0JVbUxmZ0Ewb0ZKekdjRy80SnRiQjlkNDlqaHQ3RUxiVjQvVEVESHV1M243SnE5VHRtZFBVTCZsdDsvZGlhZ3JhbSZndDsmbHQ7L214ZmlsZSZndDsiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7Ij48ZGVmcz48bGluZWFyR3JhZGllbnQgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiIGlkPSJteC1ncmFkaWVudC1iM2IzYjMtMS05OTk5OTktMS1zLTAiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNCM0IzQjMiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM5OTk5OTkiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjUsMC41KSI+PHBhdGggZD0iTSAwLjUgMjEgTCAwLjUgMjEuNDUgTCAxMC41IDIxLjcgTCAyMC41IDIxLjMxIEwgMzAuNSAyMS4zOCBMIDQwLjUgMjEuMjcgTCA1MC41IDIwLjcgTCA2MC41IDIxLjUgTCA3MC41IDIxLjc1IEwgODAuNSAyMS40IEwgOTAuNSAyMS42OCBMIDEwMC41IDIxLjMyIEwgMTEwLjUgMjEuNjQgTCAxMjAuNSAyMS40MyBMIDEzMC41IDIxLjEgTCAxNDAuNSAyMS4wNyBMIDE1MC41IDIxIEwgMTUwLjY3IDIxIEwgMTUxLjExIDMxIEwgMTQ5Ljk0IDQxIEwgMTQ5Ljc5IDUxIEwgMTUxLjIxIDYxIEwgMTUwLjM5IDcxIEwgMTUwLjA3IDgxIEwgMTUxLjIzIDkxIEwgMTUwLjk4IDEwMSBMIDE0OS43NiAxMTEgTCAxNTAuOTMgMTIxIEwgMTUwLjUyIDEzMSBMIDE1MC40MiAxNDEgTCAxNTAuOTQgMTUxIEwgMTUwLjQ3IDE2MSBMIDE1MS4wMSAxNzEgTCAxNTAuNDMgMTgxIEwgMTUwLjE3IDE5MSBMIDE0OS45MSAyMDEgTCAxNTEuMTYgMjExIEwgMTUwLjM3IDIyMSBMIDE1MC44NCAyMzEgTCAxNTAuODcgMjQxIEwgMTUwLjYxIDI1MSBMIDE1MC4wNiAyNjEgTCAxNTAuOTIgMjcxIEwgMTUwLjY3IDI4MSBMIDE1MS4xOSAyOTEgTCAxNTAuMjUgMzAxIEwgMTQ5Ljk3IDMxMSBMIDE1MS4yNCAzMjEgTCAxNTAuOTEgMzMxIEwgMTUwLjUgMzQxIEwgMTUwLjUgMzQwLjU2IEwgMTQwLjUgMzQxLjA2IEwgMTMwLjUgMzQxLjM1IEwgMTIwLjUgMzQxLjU5IEwgMTEwLjUgMzQwLjU4IEwgMTAwLjUgMzQxLjA5IEwgOTAuNSAzNDEuMDQgTCA4MC41IDM0MC42NCBMIDcwLjUgMzQwLjg5IEwgNjAuNSAzNDAuODIgTCA1MC41IDM0MS4wOSBMIDQwLjUgMzQxLjM3IEwgMzAuNSAzNDAuNjYgTCAyMC41IDM0MS4zNSBMIDEwLjUgMzQxLjYyIEwgMC41IDM0MSBMIDAuMDYgMzQxIEwgLTAuMTUgMzMxIEwgMC43OCAzMjEgTCAwLjk3IDMxMSBMIDAuNDggMzAxIEwgMC4zNiAyOTEgTCAwLjQ4IDI4MSBMIDAuMzkgMjcxIEwgMC44NiAyNjEgTCAwLjI4IDI1MSBMIDAuMzcgMjQxIEwgLTAuMTIgMjMxIEwgMC4xMiAyMjEgTCAwLjUyIDIxMSBMIDEuMTkgMjAxIEwgMC42MSAxOTEgTCAwLjkzIDE4MSBMIDEuMjIgMTcxIEwgMC41OCAxNjEgTCAwLjgxIDE1MSBMIDAuMTQgMTQxIEwgMC42MyAxMzEgTCAxLjE1IDEyMSBMIDAuNyAxMTEgTCAwLjA1IDEwMSBMIC0wLjA0IDkxIEwgMS4yIDgxIEwgLTAuMTUgNzEgTCAxLjE3IDYxIEwgMC4xNiA1MSBMIDEuMDMgNDEgTCAwLjc1IDMxIEwgMC41IDIxIEwgMC41IDIxIFogWiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1LjUsNC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSIxMTgiIGhlaWdodD0iMTIiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7Q29taWMgU2FucyBNUyZxdW90OzsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6IDEyMHB4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB3b3JkLXdyYXA6IG5vcm1hbDsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij5Ib3N0IEFkZHJlc3MgU3BhY2U8L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iNTkiIHk9IjEyIiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIiBmb250LXdlaWdodD0iYm9sZCI+SG9zdCBBZGRyZXNzIFNwYWNlPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDAuNSAyMTYgTCAwLjUgMjE1LjUzIEwgMTAuNSAyMTUuNzYgTCAyMC41IDIxNS43NSBMIDMwLjUgMjE2LjA3IEwgNDAuNSAyMTUuNCBMIDUwLjUgMjE2LjIzIEwgNjAuNSAyMTUuODggTCA3MC41IDIxNS44NyBMIDgwLjUgMjE2LjA4IEwgOTAuNSAyMTUuMzEgTCAxMDAuNSAyMTYuNjUgTCAxMTAuNSAyMTYuMjEgTCAxMjAuNSAyMTUuMzQgTCAxMzAuNSAyMTUuODYgTCAxNDAuNSAyMTUuNTQgTCAxNTAuNSAyMTYgTCAxNTAuMjcgMjE2IEwgMTUwLjkyIDIyNiBMIDE1MC40MSAyMzYgTCAxNTAuNjQgMjQ2IEwgMTUwLjM1IDI1NiBMIDE1MS4xMyAyNjYgTCAxNTAuNSAyNzYgTCAxNTAuNSAyNzYuNjIgTCAxNDAuNSAyNzUuNzQgTCAxMzAuNSAyNzUuODggTCAxMjAuNSAyNzYuMjUgTCAxMTAuNSAyNzYuNTUgTCAxMDAuNSAyNzUuNTEgTCA5MC41IDI3NS44NyBMIDgwLjUgMjc2LjE4IEwgNzAuNSAyNzUuNTIgTCA2MC41IDI3Ni4yNyBMIDUwLjUgMjc1LjQ0IEwgNDAuNSAyNzUuODggTCAzMC41IDI3NS42NSBMIDIwLjUgMjc1LjQ3IEwgMTAuNSAyNzUuNzQgTCAwLjUgMjc2IEwgMC4xNiAyNzYgTCAxLjIyIDI2NiBMIDAuMjQgMjU2IEwgLTAuMDcgMjQ2IEwgMC44NCAyMzYgTCAwLjIgMjI2IEwgMC41IDIxNiBMIDAuNSAyMTYgWiBaIiBmaWxsPSJ1cmwoI214LWdyYWRpZW50LWIzYjNiMy0xLTk5OTk5OS0xLXMtMCkiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MC41LDE5OS41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSI0OSIgaGVpZ2h0PSIxMiIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogNTFweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0OyI+UENJIEJBUjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyNSIgeT0iMTIiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiIGZvbnQtd2VpZ2h0PSJib2xkIj5QQ0kgQkFSPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDI4MC41IDIxIEwgMjgwLjUgMjAuNDMgTCAyOTAuNSAyMC40NyBMIDMwMC41IDIxLjUzIEwgMzEwLjUgMjEuMDcgTCAzMjAuNSAyMC4zNCBMIDMzMC41IDIxLjIxIEwgMzQwLjUgMjAuMzEgTCAzNTAuNSAyMS41OCBMIDM2MC41IDIxLjU4IEwgMzcwLjUgMjEuMzcgTCAzODAuNSAyMC45MSBMIDM5MC41IDIwLjk2IEwgNDAwLjUgMjEuMTcgTCA0MTAuNSAyMS40NSBMIDQyMC41IDIxLjUgTCA0MzAuNSAyMSBMIDQzMC4xOSAyMSBMIDQzMC4zNCAzMSBMIDQzMS4wMiA0MSBMIDQzMC44IDUxIEwgNDMwLjE2IDYxIEwgNDMwLjY1IDcxIEwgNDMwLjQ1IDgxIEwgNDMxLjIxIDkxIEwgNDMwLjk2IDEwMSBMIDQzMS4wOCAxMTEgTCA0MzAuODcgMTIxIEwgNDMxLjAyIDEzMSBMIDQzMC41NyAxNDEgTCA0MzEuMDUgMTUxIEwgNDMxLjAyIDE2MSBMIDQzMS4wNCAxNzEgTCA0MzAuOTYgMTgxIEwgNDMwLjk0IDE5MSBMIDQzMC4zNiAyMDEgTCA0MzAuMDMgMjExIEwgNDI5Ljc3IDIyMSBMIDQzMC43NyAyMzEgTCA0MzAuMTcgMjQxIEwgNDMxLjA5IDI1MSBMIDQzMS4wMiAyNjEgTCA0MjkuOTUgMjcxIEwgNDMwLjQ5IDI4MSBMIDQzMS4xIDI5MSBMIDQzMC42MyAzMDEgTCA0MzAuMDMgMzExIEwgNDMxLjA3IDMyMSBMIDQzMC45MiAzMzEgTCA0MzAuNSAzNDEgTCA0MzAuNSAzNDAuMzEgTCA0MjAuNSAzNDAuODMgTCA0MTAuNSAzNDEuMTEgTCA0MDAuNSAzNDAuMjggTCAzOTAuNSAzNDEuMSBMIDM4MC41IDM0MC40NyBMIDM3MC41IDM0MC40MSBMIDM2MC41IDM0MC43NiBMIDM1MC41IDM0MC40NyBMIDM0MC41IDM0MS41MyBMIDMzMC41IDM0MC4zNyBMIDMyMC41IDM0MC45MSBMIDMxMC41IDM0MS4xNCBMIDMwMC41IDM0MS4yMyBMIDI5MC41IDM0MC4yNiBMIDI4MC41IDM0MSBMIDI4MC4yOCAzNDEgTCAyODAuNzYgMzMxIEwgMjgxLjI0IDMyMSBMIDI4MC40OSAzMTEgTCAyODAuMDcgMzAxIEwgMjgwLjQ0IDI5MSBMIDI4MS4wOSAyODEgTCAyODAuNTkgMjcxIEwgMjgwLjk0IDI2MSBMIDI4MC45NSAyNTEgTCAyNzkuNzcgMjQxIEwgMjgwLjA1IDIzMSBMIDI4MC4zNSAyMjEgTCAyODAuNTggMjExIEwgMjgwLjYzIDIwMSBMIDI3OS45MyAxOTEgTCAyODAuOTkgMTgxIEwgMjc5Ljk1IDE3MSBMIDI4MS4xIDE2MSBMIDI4MC42NSAxNTEgTCAyODEuMDYgMTQxIEwgMjgwLjM3IDEzMSBMIDI3OS44NiAxMjEgTCAyODAuNzcgMTExIEwgMjgxLjIyIDEwMSBMIDI3OS45MiA5MSBMIDI3OS43OCA4MSBMIDI3OS45NSA3MSBMIDI4MC4zNiA2MSBMIDI4MC44OCA1MSBMIDI3OS44IDQxIEwgMjgxLjE0IDMxIEwgMjgwLjUgMjEgTCAyODAuNSAyMSBaIFoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyOTAuNSw0LjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgcG9pbnRlci1ldmVudHM9ImFsbCIgd2lkdGg9IjEzMCIgaGVpZ2h0PSIxMiIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogMTMwcHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHdvcmQtd3JhcDogbm9ybWFsOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246aW5oZXJpdDsiPlFFTVUgQWRkcmVzcyBTcGFjZTwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI2NSIgeT0iMTIiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiIGZvbnQtd2VpZ2h0PSJib2xkIj5RRU1VIEFkZHJlc3MgU3BhY2U8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gMjc5LjUgMTQ2IEwgMjc5LjUgMTQ1LjQ1IEwgMjg5LjUgMTQ1LjY4IEwgMjk5LjUgMTQ1LjQxIEwgMzA5LjUgMTQ2LjY3IEwgMzE5LjUgMTQ1LjQxIEwgMzI5LjUgMTQ2LjcxIEwgMzM5LjUgMTQ2LjIzIEwgMzQ5LjUgMTQ2LjQ0IEwgMzU5LjUgMTQ2LjcxIEwgMzY5LjUgMTQ1LjM0IEwgMzc5LjUgMTQ2LjQgTCAzODkuNSAxNDUuNDUgTCAzOTkuNSAxNDUuNSBMIDQwOS41IDE0Ni41NCBMIDQxOS41IDE0Ni40MyBMIDQyOS41IDE0NiBMIDQzMCAxNDYgTCA0MjkuMzkgMTU2IEwgNDI5LjQ5IDE2NiBMIDQzMC4yMiAxNzYgTCA0MjkuNTUgMTg2IEwgNDI5LjQgMTk2IEwgNDI5LjUgMjA2IEwgNDI5LjUgMjA2LjA3IEwgNDE5LjUgMjA2LjE3IEwgNDA5LjUgMjA2LjI5IEwgMzk5LjUgMjA1LjQ0IEwgMzg5LjUgMjA2LjEyIEwgMzc5LjUgMjA1LjY0IEwgMzY5LjUgMjA2LjYyIEwgMzU5LjUgMjA2LjQgTCAzNDkuNSAyMDUuNjggTCAzMzkuNSAyMDUuNDEgTCAzMjkuNSAyMDUuODIgTCAzMTkuNSAyMDYuMjIgTCAzMDkuNSAyMDYuMjQgTCAyOTkuNSAyMDUuNjQgTCAyODkuNSAyMDYuMDcgTCAyNzkuNSAyMDYgTCAyNzkuMzggMjA2IEwgMjc5LjU1IDE5NiBMIDI3OS4zOCAxODYgTCAyNzkuNzYgMTc2IEwgMjc5LjQ0IDE2NiBMIDI3OS4zIDE1NiBMIDI3OS41IDE0NiBMIDI3OS41IDE0NiBaIFoiIGZpbGw9InVybCgjbXgtZ3JhZGllbnQtYjNiM2IzLTEtOTk5OTk5LTEtcy0wKSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMzNy41LDEyOS41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSIzMyIgaGVpZ2h0PSIxMiIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogMzRweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0OyI+SU9WQTwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIxNyIgeT0iMTIiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiIGZvbnQtd2VpZ2h0PSJib2xkIj5JT1ZBPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDU4NC41IDE2IEwgNTg0LjUgMTUuNDUgTCA1OTQuNSAxNS45NyBMIDYwNC41IDE2LjE1IEwgNjE0LjUgMTUuNzYgTCA2MjQuNSAxNi40NCBMIDYzNC41IDE2LjcxIEwgNjQ0LjUgMTUuODEgTCA2NTQuNSAxNi4zOSBMIDY2NC41IDE2LjE3IEwgNjc0LjUgMTUuMzIgTCA2ODQuNSAxNS42OSBMIDY5NC41IDE2LjQyIEwgNzA0LjUgMTYuNTYgTCA3MTQuNSAxNi41OCBMIDcyNC41IDE2LjMyIEwgNzM0LjUgMTYgTCA3MzQuMDIgMTYgTCA3MzUuMTIgMjYgTCA3MzQuMTcgMzYgTCA3MzQuMTkgNDYgTCA3MzQuNDQgNTYgTCA3MzQuNiA2NiBMIDczNC43NCA3NiBMIDczNC45NSA4NiBMIDczNC43MSA5NiBMIDczNS4wNCAxMDYgTCA3MzQuMTggMTE2IEwgNzMzLjk4IDEyNiBMIDczNC4zNyAxMzYgTCA3MzUuMTQgMTQ2IEwgNzM0LjE5IDE1NiBMIDczNC44OSAxNjYgTCA3MzQuMjMgMTc2IEwgNzM0LjA2IDE4NiBMIDczNC44MSAxOTYgTCA3MzQuODIgMjA2IEwgNzM0LjcgMjE2IEwgNzM0LjIgMjI2IEwgNzM0Ljk3IDIzNiBMIDczNC4yOCAyNDYgTCA3MzQuOTUgMjU2IEwgNzMzLjk3IDI2NiBMIDczMy44MSAyNzYgTCA3MzUuMDQgMjg2IEwgNzM0LjM5IDI5NiBMIDczNC4zMyAzMDYgTCA3MzUuMDMgMzE2IEwgNzM0LjQ5IDMyNiBMIDczNC41IDMzNiBMIDczNC41IDMzNS44MSBMIDcyNC41IDMzNi4wNSBMIDcxNC41IDMzNi42OSBMIDcwNC41IDMzNS40NSBMIDY5NC41IDMzNS43OCBMIDY4NC41IDMzNi4yNCBMIDY3NC41IDMzNi4wOSBMIDY2NC41IDMzNS4zOCBMIDY1NC41IDMzNS40OSBMIDY0NC41IDMzNi4yOSBMIDYzNC41IDMzNi40NyBMIDYyNC41IDMzNi4wMyBMIDYxNC41IDMzNS40NSBMIDYwNC41IDMzNi4zNSBMIDU5NC41IDMzNS43OSBMIDU4NC41IDMzNiBMIDU4NC4yMiAzMzYgTCA1ODQuMDkgMzI2IEwgNTg0LjIyIDMxNiBMIDU4NC4wOCAzMDYgTCA1ODQuNzEgMjk2IEwgNTgzLjk1IDI4NiBMIDU4My43OSAyNzYgTCA1ODQuNzMgMjY2IEwgNTg0LjY5IDI1NiBMIDU4NC41NSAyNDYgTCA1ODQuNjMgMjM2IEwgNTg0Ljk1IDIyNiBMIDU4My45IDIxNiBMIDU4NC42OSAyMDYgTCA1ODQuNTQgMTk2IEwgNTg1LjA2IDE4NiBMIDU4NC41MSAxNzYgTCA1ODQuNzUgMTY2IEwgNTg0Ljg0IDE1NiBMIDU4My45MiAxNDYgTCA1ODQuNDQgMTM2IEwgNTg0LjQzIDEyNiBMIDU4NC4zNCAxMTYgTCA1ODQuNDEgMTA2IEwgNTgzLjc4IDk2IEwgNTg0LjQ5IDg2IEwgNTg0Ljc3IDc2IEwgNTg0LjM4IDY2IEwgNTg0LjYxIDU2IEwgNTg0LjY3IDQ2IEwgNTg0LjIxIDM2IEwgNTgzLjg0IDI2IEwgNTg0LjUgMTYgTCA1ODQuNSAxNiBaIFoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MDMuNSwtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSIxMTEiIGhlaWdodD0iMTIiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7Q29taWMgU2FucyBNUyZxdW90OzsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6IDExMXB4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB3b3JkLXdyYXA6IG5vcm1hbDsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij5WTSBBZGRyZXNzIFNwYWNlPC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjU2IiB5PSIxMiIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMnB4IiBmb250LWZhbWlseT0iQ29taWMgU2FucyBNUyIgZm9udC13ZWlnaHQ9ImJvbGQiPlZNIEFkZHJlc3MgU3BhY2U8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gNTg0LjUgODYgTCA1ODQuNSA4NS42NCBMIDU5NC41IDg2LjI5IEwgNjA0LjUgODUuODcgTCA2MTQuNSA4NS40NCBMIDYyNC41IDg2LjQ5IEwgNjM0LjUgODUuNzYgTCA2NDQuNSA4NS43IEwgNjU0LjUgODUuNiBMIDY2NC41IDg1Ljk5IEwgNjc0LjUgODUuMzkgTCA2ODQuNSA4NS42OSBMIDY5NC41IDg2LjAxIEwgNzA0LjUgODUuNSBMIDcxNC41IDg2Ljc1IEwgNzI0LjUgODYuMTUgTCA3MzQuNSA4NiBMIDczNC4wOSA4NiBMIDczNC40MiA5NiBMIDczNC4wMyAxMDYgTCA3MzMuODggMTE2IEwgNzM0LjU1IDEyNiBMIDczMy45MyAxMzYgTCA3MzQuNSAxNDYgTCA3MzQuNSAxNDYuMzkgTCA3MjQuNSAxNDYuNCBMIDcxNC41IDE0NS4zMSBMIDcwNC41IDE0Ni4xMiBMIDY5NC41IDE0NS40OCBMIDY4NC41IDE0NS40MSBMIDY3NC41IDE0Ni4yMSBMIDY2NC41IDE0NS4zNCBMIDY1NC41IDE0Ni4zIEwgNjQ0LjUgMTQ1Ljg4IEwgNjM0LjUgMTQ1Ljg1IEwgNjI0LjUgMTQ1Ljk3IEwgNjE0LjUgMTQ1LjM3IEwgNjA0LjUgMTQ2LjQ0IEwgNTk0LjUgMTQ2LjM1IEwgNTg0LjUgMTQ2IEwgNTg0IDE0NiBMIDU4NC40IDEzNiBMIDU4NC40OCAxMjYgTCA1ODQuMzkgMTE2IEwgNTg1LjA5IDEwNiBMIDU4NC45MiA5NiBMIDU4NC41IDg2IEwgNTg0LjUgODYgWiBaIiBmaWxsPSJ1cmwoI214LWdyYWRpZW50LWIzYjNiMy0xLTk5OTk5OS0xLXMtMCkiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MzQuNSw2OS41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSI0OSIgaGVpZ2h0PSIxMiIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogNTFweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0OyI+UENJIEJBUjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyNSIgeT0iMTIiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiIGZvbnQtd2VpZ2h0PSJib2xkIj5QQ0kgQkFSPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDE1MC40NyAyNDUuOTQgUSAyMTguNSAxODYgMjc1LjMgMTgxLjQyIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDI2OS43MiAxODUuMzggTCAyNzYuNDIgMTgxLjMzIEwgMjY5LjE2IDE3OC40IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTguNSwxNTcuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMTEyIiBoZWlnaHQ9IjE3IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdoaXRlLXNwYWNlOiBub3dyYXA7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0OyI+PGZvbnQgc3R5bGU9ImZvbnQtc2l6ZTogMTZweCI+dmZpb19wY2lfbW1hcDwvZm9udD48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iNTYiIHk9IjE1IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj5bTm90IHN1cHBvcnRlZCBieSB2aWV3ZXJdPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDQyOS4yOSAxNzYuNTMgUSA0NjguNSAxMTYgNTgyLjM1IDExNi41MiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSA1NzYuNDUgMTE5Ljk5IEwgNTgzLjQ3IDExNi41MiBMIDU3Ni40OSAxMTIuOTkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQzNy41LDkyLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgcG9pbnRlci1ldmVudHM9ImFsbCIgd2lkdGg9IjEzNiIgaGVpZ2h0PSIxNyIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aGl0ZS1zcGFjZTogbm93cmFwOyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246aW5oZXJpdDsiPjxmb250IHN0eWxlPSJmb250LXNpemU6IDE2cHgiPnZmaW9fcmVnaW9uX21tYXA8L2ZvbnQ+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjY4IiB5PSIxNSIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMnB4IiBmb250LWZhbWlseT0iQ29taWMgU2FucyBNUyI+Jmx0O2ZvbnQgc3R5bGU9ImZvbnQtc2l6ZTogMTZweCImZ3Q7dmZpb19yZWdpb25fbW1hcCZsdDsvZm9udCZndDs8L3RleHQ+PC9zd2l0Y2g+PC9nPjwvZz48L3N2Zz4="></p>
<p>QEMU首先调用vfio_region_mmap，
通过mmap region-&gt;vbasedev-&gt;fd 把设备MMIO映射到QEMU进程的虚拟地址空间，
这实际上通过调用vfio-pci内核驱动vfio_pci_mmap -&gt; remap_pfn_range，
<em>remap_pfn_range</em>是内核提供的API，
可以将一段连续的物理地址空间映射到进程的虚拟地址空间，
这里用它将设备的BAR空间的MMIO先映射到QEMU进程的虚拟地址空间再注册给虚拟机。</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>vfio_pci_mmap</span><span class=p>(</span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=n>device_data</span><span class=p>,</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=nc>vm_area_struct</span><span class=w> </span><span class=o>*</span><span class=n>vma</span><span class=p>)</span>
<span class=p>{</span>
<span class=w>    </span><span class=n>req_len</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vma</span><span class=o>-&gt;</span><span class=n>vm_end</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>vma</span><span class=o>-&gt;</span><span class=n>vm_start</span><span class=p>;</span><span class=w>     </span><span class=c1>// MMIO size</span>
<span class=w>    </span><span class=n>vma</span><span class=o>-&gt;</span><span class=n>vm_pgoff</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>pci_resource_start</span><span class=p>(</span><span class=n>pdev</span><span class=p>,</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>PAGE_SHIFT</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>pgoff</span><span class=p>;</span><span class=w>  </span><span class=c1>// MMIO page address </span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>remap_pfn_range</span><span class=p>(</span><span class=n>vma</span><span class=p>,</span><span class=w> </span><span class=n>vma</span><span class=o>-&gt;</span><span class=n>vm_start</span><span class=p>,</span><span class=w> </span><span class=n>vma</span><span class=o>-&gt;</span><span class=n>vm_pgoff</span><span class=p>,</span>
<span class=w>            </span><span class=n>req_len</span><span class=p>,</span><span class=w> </span><span class=n>vma</span><span class=o>-&gt;</span><span class=n>vm_page_prot</span><span class=p>);</span>

<span class=p>}</span>
</code></pre></div></div>
<p>再来看下QEMU是如何注册这段虚拟地址(IOVA)到虚拟机的。</p>
<p>vfio_region_mmap调用memory_region_init_ram_device_ptr把前面mmap过来的
这段IOVA作为RAM类型设备注册给虚拟机。</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=kt>int</span><span class=w> </span><span class=nf>vfio_region_mmap</span><span class=p>(</span><span class=n>VFIORegion</span><span class=w> </span><span class=o>*</span><span class=n>region</span><span class=p>)</span><span class=w> </span>
<span class=p>{</span>
<span class=w>    </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>g_strdup_printf</span><span class=p>(</span><span class=s>"%s mmaps[%d]"</span><span class=p>,</span>
<span class=w>                               </span><span class=n>memory_region_name</span><span class=p>(</span><span class=n>region</span><span class=o>-&gt;</span><span class=n>mem</span><span class=p>),</span><span class=w> </span><span class=n>i</span><span class=p>);</span>
<span class=w>    </span><span class=n>memory_region_init_ram_device_ptr</span><span class=p>(</span><span class=o>&amp;</span><span class=n>region</span><span class=o>-&gt;</span><span class=n>mmaps</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>mem</span><span class=p>,</span>
<span class=w>                                        </span><span class=n>memory_region_owner</span><span class=p>(</span><span class=n>region</span><span class=o>-&gt;</span><span class=n>mem</span><span class=p>),</span>
<span class=w>                                        </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>region</span><span class=o>-&gt;</span><span class=n>mmaps</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>size</span><span class=p>,</span>
<span class=w>                                        </span><span class=n>region</span><span class=o>-&gt;</span><span class=n>mmaps</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>mmap</span><span class=p>);</span>
<span class=w>    </span><span class=n>memory_region_add_subregion</span><span class=p>(</span><span class=n>region</span><span class=o>-&gt;</span><span class=n>mem</span><span class=p>,</span><span class=w> </span><span class=n>region</span><span class=o>-&gt;</span><span class=n>mmaps</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>offset</span><span class=p>,</span>
<span class=w>                                </span><span class=o>&amp;</span><span class=n>region</span><span class=o>-&gt;</span><span class=n>mmaps</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>mem</span><span class=p>);</span><span class=w>                                    </span>
<span class=p>}</span>
</code></pre></div></div>
<p>memory_region_init_ram_device_ptr中会标志 mr-&gt;ram = true，
那么QEMU就会通过kvm_set_phys_mem注册这段内存给虚拟机（是RAM类型才会建立EPT映射关系），
这样KVM就会为这段地址空间建立EPT页表，
虚拟机访问设备的MMIO空间时通过EPT页表翻直接访问不需要VM-Exit。
例如，网卡的收发包场景，虚拟机可以直接操作真实网卡的相关寄存器（MMIO映射）而没有陷入先出开销，大幅度提升了虚拟化场景下的I/O性能。</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=k>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>kvm_set_phys_mem</span><span class=p>(</span><span class=n>KVMMemoryListener</span><span class=w> </span><span class=o>*</span><span class=n>kml</span><span class=p>,</span>
<span class=w>                             </span><span class=n>MemoryRegionSection</span><span class=w> </span><span class=o>*</span><span class=n>section</span><span class=p>,</span><span class=w> </span><span class=kt>bool</span><span class=w> </span><span class=n>add</span><span class=p>)</span>
<span class=p>{</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>memory_region_is_ram</span><span class=p>(</span><span class=n>mr</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>  </span><span class=c1>// mr-&gt;ram = true 会注册到KVM</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>writeable</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=o>!</span><span class=n>kvm_readonly_mem_allowed</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>mr</span><span class=o>-&gt;</span><span class=n>romd_mode</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=cm>/* If the memory device is not in romd_mode, then we actually want</span>
<span class=cm>             * to remove the kvm memory slot so all accesses will trap. */</span>
<span class=w>            </span><span class=n>add</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>false</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=n>ram</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>memory_region_get_ram_ptr</span><span class=p>(</span><span class=n>mr</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w>   </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_region</span><span class=w> </span><span class=o>+</span><span class=w>  </span>
<span class=w>          </span><span class=p>(</span><span class=n>start_addr</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_address_space</span><span class=p>);</span>
<span class=w>    </span><span class=n>kvm_set_user_memory_region</span><span class=w>  </span><span class=c1>// 作为RAM设备注册到KVM中</span>
<span class=p>}</span>
</code></pre></div></div>
<h3>2.VFIO中如何实现MSI/MSI-X，Interrupt Remapping，以及Posted Interrupt的支持？</h3>
<p>对于VFIO设备直通而言，设备中断的处理方式共有4种:</p>
<ul>
<li>INTx 最传统的PCI设备引脚Pin方式</li>
<li>MSI/MSI-X方式</li>
<li>Interrupt Remapping方式</li>
<li>VT-d Posted Interrupt方式</li>
</ul>
<p>那么它们分别是如何设计实现的呢？
这里我们来重点探索一下MSI/MSI-X的实现方式以及VT-d Posted Interrupt方式。
如果忘了MSI和MSI-X的知识点可以看下《<a href=https://www.xilinx.com/Attachment/PCI_SPEV_V3_0.pdf>PCI Local Bus Specification 
 Revision 3.0</a>》的Chapter 6有比较详细的介绍。</p>
<p>先看下QEMU这边中断初始化和中断使能相关的函数调用关系图：</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=n>vfio_realize</span>
<span class=w>    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_get_device</span><span class=w>       </span><span class=c1>// get device info: num_irqs, num_regions, flags</span>
<span class=w>    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_msix_early_setup</span><span class=w> </span><span class=c1>// get MSI-X info: table_bar,table_offset, pba_ -&gt; pci_device_route_intx_to_irqbar,pba_offset, entries</span>
<span class=w>        </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_pci_fixup_msix_region</span>
<span class=w>        </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_pci_relocate_msix</span>
<span class=w>    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_add_capabilities</span>
<span class=w>            </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_add_std_cap</span>
<span class=w>                </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_msi_setup</span><span class=w>  </span><span class=o>-&gt;</span><span class=w> </span><span class=n>msi_init</span>
<span class=w>                </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_msix_setup</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>msix_init</span>
<span class=w>    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_intx_enable</span><span class=w>    </span><span class=c1>// enable intx</span>
<span class=w>        </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>pci_device_route_intx_to_irq</span>
<span class=w>        </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>event_notifier_init</span><span class=w> </span><span class=o>&amp;</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>intx</span><span class=p>.</span><span class=n>interrupt</span>
<span class=w>        </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>ioctl</span><span class=w> </span><span class=n>VFIO_DEVICE_SET_IRQS</span>

<span class=n>kvm_cpu_exec</span>
<span class=w>   </span><span class=p>...</span>
<span class=w>    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_pci_write_config</span>
<span class=w>            </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_msi_enable</span><span class=w> </span>
<span class=w>                    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>event_notifier_init</span><span class=w>        </span><span class=c1>// init eventfd as irqfd</span>
<span class=w>                    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_add_kvm_msi_virq</span><span class=w>  </span><span class=p>...</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>kvm_irqchip_assign_irqfd</span>
<span class=w>                    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_enable_vectors</span><span class=w> </span><span class=nb>false</span><span class=w> </span>
<span class=w>            </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_msix_enable</span>
<span class=w>                </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_msix_vector_do_use</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>msix_vector_use</span>
<span class=w>                </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_msix_vector_release</span>
<span class=w>                </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>msix_set_vector_notifiers</span>
</code></pre></div></div>
<p>从图中可以看出，直通设备初始化时候会从物理设备的PCI配置空间读取INTx、MSI、MSI-X的相关信息并且进行一些必要的初始化（setup）再进行中断使能（enable）的。
根据调试的结果来看，INTx的enable是最早的，
而MSI/MSI-X初始化是在guest启动后进行enable。</p>
<p>这里以MSI-X为例，
首先调用vfio_msix_early_setup函数从硬件设备的PCI配置空间查询MSI-X相关信息包括:</p>
<ul>
<li>MSI-X Table Size ：MSI-X Table 大小</li>
<li>MSI-X Table BAR Indicator ：MSI-X Table存放的BAR空间编号</li>
<li>MSI-X Table Offset ：存放MSI-X Table在Table BAR空间中的偏移量</li>
<li>MSI-X PBA BIR ：存放MSI-X 的Pending Bit Array的BAR空间编号</li>
<li>MSI-X PBA Offset ：存放MSI-X Table在PBA BAR空间中的偏移量</li>
</ul>
<p>获取必要信息之后，通过vfio_msix_setup来完成直通设备的MSI-X的初始化工作，
包括调用pci_add_capability为设备添加PCI_CAP_ID_MSIX Capability，
并注册MSI-X的BAR空间到虚拟机的物理地址空间等。</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=k>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>vfio_msix_early_setup</span><span class=p>(</span><span class=n>VFIOPCIDevice</span><span class=w> </span><span class=o>*</span><span class=n>vdev</span><span class=p>,</span><span class=w> </span><span class=n>Error</span><span class=w> </span><span class=o>**</span><span class=n>errp</span><span class=p>)</span>
<span class=p>{</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>pread</span><span class=p>(</span><span class=n>fd</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>ctrl</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>ctrl</span><span class=p>),</span>
<span class=w>              </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>config_offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>pos</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>PCI_MSIX_FLAGS</span><span class=p>)</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>ctrl</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>error_setg_errno</span><span class=p>(</span><span class=n>errp</span><span class=p>,</span><span class=w> </span><span class=n>errno</span><span class=p>,</span><span class=w> </span><span class=s>"failed to read PCI MSIX FLAGS"</span><span class=p>);</span>
<span class=w>        </span><span class=k>return</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>pread</span><span class=p>(</span><span class=n>fd</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>table</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>table</span><span class=p>),</span>
<span class=w>              </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>config_offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>pos</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>PCI_MSIX_TABLE</span><span class=p>)</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>table</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>error_setg_errno</span><span class=p>(</span><span class=n>errp</span><span class=p>,</span><span class=w> </span><span class=n>errno</span><span class=p>,</span><span class=w> </span><span class=s>"failed to read PCI MSIX TABLE"</span><span class=p>);</span>
<span class=w>        </span><span class=k>return</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>pread</span><span class=p>(</span><span class=n>fd</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>pba</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>pba</span><span class=p>),</span>
<span class=w>              </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>config_offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>pos</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>PCI_MSIX_PBA</span><span class=p>)</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>pba</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>error_setg_errno</span><span class=p>(</span><span class=n>errp</span><span class=p>,</span><span class=w> </span><span class=n>errno</span><span class=p>,</span><span class=w> </span><span class=s>"failed to read PCI MSIX PBA"</span><span class=p>);</span>
<span class=w>        </span><span class=k>return</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=n>ctrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>le16_to_cpu</span><span class=p>(</span><span class=n>ctrl</span><span class=p>);</span>
<span class=w>    </span><span class=n>table</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>le32_to_cpu</span><span class=p>(</span><span class=n>table</span><span class=p>);</span>
<span class=w>    </span><span class=n>pba</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>le32_to_cpu</span><span class=p>(</span><span class=n>pba</span><span class=p>);</span>

<span class=w>    </span><span class=n>msix</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>g_malloc0</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=o>*</span><span class=n>msix</span><span class=p>));</span>
<span class=w>    </span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>table_bar</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>table</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>PCI_MSIX_FLAGS_BIRMASK</span><span class=p>;</span>
<span class=w>    </span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>table_offset</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>table</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=o>~</span><span class=n>PCI_MSIX_FLAGS_BIRMASK</span><span class=p>;</span>
<span class=w>    </span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>pba_bar</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>pba</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>PCI_MSIX_FLAGS_BIRMASK</span><span class=p>;</span>
<span class=w>    </span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>pba_offset</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>pba</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=o>~</span><span class=n>PCI_MSIX_FLAGS_BIRMASK</span><span class=p>;</span>
<span class=w>    </span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>entries</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>ctrl</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>PCI_MSIX_FLAGS_QSIZE</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
<span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>vfio_msix_setup</span><span class=p>(</span><span class=n>VFIOPCIDevice</span><span class=w> </span><span class=o>*</span><span class=n>vdev</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>pos</span><span class=p>,</span><span class=w> </span><span class=n>Error</span><span class=w> </span><span class=o>**</span><span class=n>errp</span><span class=p>)</span>
<span class=p>{</span>

<span class=w>    </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>pending</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>g_malloc0</span><span class=p>(</span><span class=n>BITS_TO_LONGS</span><span class=p>(</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>entries</span><span class=p>)</span><span class=w> </span><span class=o>*</span>
<span class=w>                                    </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>unsigned</span><span class=w> </span><span class=kt>long</span><span class=p>));</span>
<span class=w>    </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>msix_init</span><span class=p>(</span><span class=o>&amp;</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>pdev</span><span class=p>,</span><span class=w> </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>entries</span><span class=p>,</span>
<span class=w>                    </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>bars</span><span class=p>[</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>table_bar</span><span class=p>].</span><span class=n>mr</span><span class=p>,</span>
<span class=w>                    </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>table_bar</span><span class=p>,</span><span class=w> </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>table_offset</span><span class=p>,</span>
<span class=w>                    </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>bars</span><span class=p>[</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>pba_bar</span><span class=p>].</span><span class=n>mr</span><span class=p>,</span>
<span class=w>                    </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>pba_bar</span><span class=p>,</span><span class=w> </span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>msix</span><span class=o>-&gt;</span><span class=n>pba_offset</span><span class=p>,</span><span class=w> </span><span class=n>pos</span><span class=p>,</span>
<span class=w>                    </span><span class=o>&amp;</span><span class=n>err</span><span class=p>);</span>
<span class=w>    </span><span class=n>memory_region_set_enabled</span><span class=p>(</span><span class=o>&amp;</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>pdev</span><span class=p>.</span><span class=n>msix_pba_mmio</span><span class=p>,</span><span class=w> </span><span class=nb>false</span><span class=p>);</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>object_property_get_bool</span><span class=p>(</span><span class=n>OBJECT</span><span class=p>(</span><span class=n>qdev_get_machine</span><span class=p>()),</span>
<span class=w>                                 </span><span class=s>"vfio-no-msix-emulation"</span><span class=p>,</span><span class=w> </span><span class=nb>NULL</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>memory_region_set_enabled</span><span class=p>(</span><span class=o>&amp;</span><span class=n>vdev</span><span class=o>-&gt;</span><span class=n>pdev</span><span class=p>.</span><span class=n>msix_table_mmio</span><span class=p>,</span><span class=w> </span><span class=nb>false</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></div>
<p>最后guest启动后调用vfio_msix_enable使能MSI-X中断。</p>
<h3>irqfd 和 ioeventfd</h3>
<p>我们知道QEMU本身有一套完整的模拟PCI设备INTx、MSI、MSI-X中断机制，
其实现方式是irqfd（QEMU中断注入到guest）和ioeventfd（guest中断通知到QEMU），
内部实现都是基于内核提供的eventfd机制。</p>
<p>看代码的时候一直没明白设备中断绑定的irqfd是在什么时候注册的，从代码上看不是中断enable时候。
后来结合代码调试才明白，
原来中断enable时候将设备的MSI/MSI-X BAR空间映射用MMIO方式注册给了虚拟机（参考msix_init, msi_init函数实现），
当虚拟机内部第一次访问MSI-X Table BAR空间的MMIO时会退出到用户态完成irqfd的注册，
调用堆栈为：</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=cp>#0  kvm_irqchip_assign_irqfd</span>
<span class=cp>#1   in kvm_irqchip_add_irqfd_notifier_gsi </span>
<span class=cp>#2   in vfio_add_kvm_msi_virq </span>
<span class=cp>#3   in vfio_msix_vector_do_use </span>
<span class=cp>#4   in vfio_msix_vector_use </span>
<span class=cp>#5   in msix_fire_vector_notifier</span>
<span class=cp>#6   in msix_handle_mask_update </span>
<span class=cp>#7   in msix_table_mmio_write </span>
<span class=cp>#8   in memory_region_write_accessor</span>
<span class=cp>#9   in access_with_adjusted_size </span>
<span class=cp>#10  in memory_region_dispatch_write </span>
<span class=cp>#11  in address_space_write_continue </span>
<span class=cp>#12  in address_space_write </span>
<span class=cp>#13  in address_space_rw </span>
<span class=cp>#14  in kvm_cpu_exec </span>
</code></pre></div></div>
<p>关于irqfd的社区patch可以从这里获取<a href=https://lwn.net/Articles/332924/>https://lwn.net/Articles/332924</a>。</p>
<p>备注：Alex Williamson在最新的VFIO模块中加入新特性，支持直接使用物理设备的MSIX BAR空间，
这样一来可以直接将物理设备的MSI-X BAR空间直接mmap过来然后呈现给虚拟机，
guest直接使用而不用再进行模拟了。</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=k>commit</span><span class=w> </span><span class=n>ae0215b2bb56a9d5321a185dde133bfdd306a4c0</span>
<span class=nl>Author</span><span class=p>:</span><span class=w> </span><span class=n>Alexey</span><span class=w> </span><span class=n>Kardashevskiy</span><span class=w> </span><span class=o>&lt;</span><span class=n>aik</span><span class=nv>@ozlabs</span><span class=p>.</span><span class=n>ru</span><span class=o>&gt;</span>
<span class=nc>Date</span><span class=err>:</span><span class=w>   </span><span class=n>Tue</span><span class=w> </span><span class=n>Mar</span><span class=w> </span><span class=mi>13</span><span class=w> </span><span class=mi>11</span><span class=err>:</span><span class=mi>17</span><span class=err>:</span><span class=mi>31</span><span class=w> </span><span class=mi>2018</span><span class=w> </span><span class=o>-</span><span class=mi>0600</span>

<span class=w>    </span><span class=n>vfio</span><span class=o>-</span><span class=nl>pci</span><span class=p>:</span><span class=w> </span><span class=n>Allow</span><span class=w> </span><span class=n>mmap</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>MSIX</span><span class=w> </span><span class=n>BAR</span>

<span class=w>    </span><span class=k>At</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>moment</span><span class=w> </span><span class=n>we</span><span class=w> </span><span class=n>unconditionally</span><span class=w> </span><span class=n>avoid</span><span class=w> </span><span class=n>mapping</span><span class=w> </span><span class=n>MSIX</span><span class=w> </span><span class=k>data</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>BAR</span><span class=w> </span><span class=ow>and</span>
<span class=w>    </span><span class=n>emulate</span><span class=w> </span><span class=n>MSIX</span><span class=w> </span><span class=nc>table</span><span class=w> </span><span class=ow>in</span><span class=w> </span><span class=n>QEMU</span><span class=p>.</span><span class=w> </span><span class=n>However</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=ow>not</span><span class=w> </span><span class=n>always</span><span class=w> </span><span class=n>necessary</span><span class=w> </span><span class=k>as</span>
<span class=w>    </span><span class=n>a</span><span class=w> </span><span class=n>platform</span><span class=w> </span><span class=n>may</span><span class=w> </span><span class=n>provide</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>paravirt</span><span class=w> </span><span class=n>interface</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>MSIX</span><span class=w> </span><span class=n>configuration</span><span class=p>;</span>
<span class=w>    </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=n>can</span><span class=w> </span><span class=n>affect</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>speed</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>MMIO</span><span class=w> </span><span class=n>access</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>emulating</span><span class=w> </span><span class=n>them</span><span class=w> </span><span class=ow>in</span><span class=w> </span><span class=n>QEMU</span><span class=w> </span><span class=k>when</span>
<span class=w>    </span><span class=n>frequently</span><span class=w> </span><span class=n>accessed</span><span class=w> </span><span class=n>registers</span><span class=w> </span><span class=n>share</span><span class=w> </span><span class=n>same</span><span class=w> </span><span class=k>system</span><span class=w> </span><span class=n>page</span><span class=w> </span><span class=k>with</span><span class=w> </span><span class=n>MSIX</span><span class=w> </span><span class=k>data</span><span class=p>,</span>
<span class=w>    </span><span class=n>this</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=n>particularly</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>problem</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>systems</span><span class=w> </span><span class=k>with</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>page</span><span class=w> </span><span class=k>size</span><span class=w> </span><span class=n>bigger</span>
<span class=w>    </span><span class=k>than</span><span class=w> </span><span class=mi>4</span><span class=n>KB</span><span class=p>.</span>

<span class=w>    </span><span class=n>A</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>capability</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>VFIO_REGION_INFO_CAP_MSIX_MAPPABLE</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>has</span><span class=w> </span><span class=n>been</span><span class=w> </span><span class=n>added</span>
<span class=w>    </span><span class=k>to</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>kernel</span><span class=w> </span><span class=o>[</span><span class=n>1</span><span class=o>]</span><span class=w> </span><span class=n>which</span><span class=w> </span><span class=n>tells</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>userspace</span><span class=w> </span><span class=n>that</span><span class=w> </span><span class=n>mapping</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>MSIX</span><span class=w> </span><span class=k>data</span>
<span class=w>    </span><span class=k>is</span><span class=w> </span><span class=n>possible</span><span class=w> </span><span class=n>now</span><span class=p>.</span><span class=w> </span><span class=n>This</span><span class=w> </span><span class=n>makes</span><span class=w> </span><span class=k>use</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=n>so</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>now</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>QEMU</span><span class=w> </span><span class=n>tries</span><span class=w> </span><span class=n>mapping</span>
<span class=w>    </span><span class=n>the</span><span class=w> </span><span class=n>entire</span><span class=w> </span><span class=n>BAR</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>whole</span><span class=w> </span><span class=ow>and</span><span class=w> </span><span class=n>emulate</span><span class=w> </span><span class=n>MSIX</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>top</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>that</span><span class=p>.</span>

<span class=w>    </span><span class=o>[</span><span class=n>1</span><span class=o>]</span><span class=w> </span><span class=nl>https</span><span class=p>:</span><span class=o>//</span><span class=n>git</span><span class=p>.</span><span class=n>kernel</span><span class=p>.</span><span class=n>org</span><span class=o>/</span><span class=n>pub</span><span class=o>/</span><span class=n>scm</span><span class=o>/</span><span class=n>linux</span><span class=o>/</span><span class=n>kernel</span><span class=o>/</span><span class=n>git</span><span class=o>/</span><span class=n>torvalds</span><span class=o>/</span><span class=n>linux</span><span class=p>.</span><span class=n>git</span><span class=o>/</span><span class=k>commit</span><span class=o>/</span><span class=vm>?</span><span class=n>id</span><span class=o>=</span><span class=n>a32295c612c57990d17fb0f41e7134394b2f35f6</span>

<span class=w>    </span><span class=n>Signed</span><span class=o>-</span><span class=k>off</span><span class=o>-</span><span class=k>by</span><span class=err>:</span><span class=w> </span><span class=n>Alexey</span><span class=w> </span><span class=n>Kardashevskiy</span><span class=w> </span><span class=o>&lt;</span><span class=n>aik</span><span class=nv>@ozlabs</span><span class=p>.</span><span class=n>ru</span><span class=o>&gt;</span>
<span class=w>    </span><span class=n>Reviewed</span><span class=o>-</span><span class=k>by</span><span class=err>:</span><span class=w> </span><span class=n>David</span><span class=w> </span><span class=n>Gibson</span><span class=w> </span><span class=o>&lt;</span><span class=n>david</span><span class=nv>@gibson</span><span class=p>.</span><span class=n>dropbear</span><span class=p>.</span><span class=n>id</span><span class=p>.</span><span class=n>au</span><span class=o>&gt;</span>
<span class=w>    </span><span class=n>Signed</span><span class=o>-</span><span class=k>off</span><span class=o>-</span><span class=k>by</span><span class=err>:</span><span class=w> </span><span class=n>Alex</span><span class=w> </span><span class=n>Williamson</span><span class=w> </span><span class=o>&lt;</span><span class=n>alex</span><span class=p>.</span><span class=n>williamson</span><span class=nv>@redhat</span><span class=p>.</span><span class=n>com</span><span class=o>&gt;</span>
</code></pre></div></div>
<h3>3. VFIO中是如何建立DMA Remapping映射关系？</h3>
<p>前面的文章中我们反复提到VT-d DMA Remapping的原理和意义，那么在vfio中这又是如何实现的呢？</p>
<p>实现的原理其实不难，我们知道QEMU会维护虚拟机的物理地址空间映射关系，
而VT-d DMA Remapping需要建立GPA-&gt;HVA地址空间的映射关系，
那么当虚拟机的地址空间布局发生变化时我们都会尝试更新对应的DMA Remapping关系，
这是通过vfio_memory_listener来实现的。</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=k>static</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>MemoryListener</span><span class=w> </span><span class=n>vfio_memory_listener</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=p>.</span><span class=n>region_add</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vfio_listener_region_add</span><span class=p>,</span>
<span class=w>    </span><span class=p>.</span><span class=n>region_del</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vfio_listener_region_del</span><span class=p>,</span>
<span class=p>};</span>
</code></pre></div></div>
<p>vfio_connect_container函数中会将vfio_memory_listener注册给QEMU的物理地址空间address_space_memory，
这样vfio_memory_listener会监听虚拟机的物理地址空间变化，
调用对应的回调函数更新DMA Remapping关系。</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=n>memory_listener_register</span><span class=p>(</span><span class=o>&amp;</span><span class=n>container</span><span class=o>-&gt;</span><span class=n>listener</span><span class=p>,</span><span class=w> </span><span class=n>container</span><span class=o>-&gt;</span><span class=n>space</span><span class=o>-&gt;</span><span class=n>as</span><span class=p>);</span>
</code></pre></div></div>
<p>那么说了很久的IOMMU页表是如何创建和更新的呢？
看下vfio_listener_region_add/vfio_listener_region_del函数的实现就知道。
在该函数中先check对应的section是否是RAM（只对RAM类型的区域进行DMA Remapping），
再进行一些Sanity Check后调用vfio_dma_map将映射关系建立起来，
所以重点还是在于vfio_dma_map的函数实现。</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=k>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>vfio_listener_region_add</span><span class=p>(</span><span class=n>MemoryListener</span><span class=w> </span><span class=o>*</span><span class=n>listener</span><span class=p>,</span>
<span class=w>                                     </span><span class=n>MemoryRegionSection</span><span class=w> </span><span class=o>*</span><span class=n>section</span><span class=p>)</span>
<span class=p>{</span>
<span class=w>    </span><span class=n>VFIOContainer</span><span class=w> </span><span class=o>*</span><span class=n>container</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>container_of</span><span class=p>(</span><span class=n>listener</span><span class=p>,</span><span class=w> </span><span class=n>VFIOContainer</span><span class=p>,</span><span class=w> </span><span class=n>listener</span><span class=p>);</span>
<span class=w>    </span><span class=n>hwaddr</span><span class=w> </span><span class=n>iova</span><span class=p>,</span><span class=w> </span><span class=n>end</span><span class=p>;</span>
<span class=w>    </span><span class=n>Int128</span><span class=w> </span><span class=n>llend</span><span class=p>,</span><span class=w> </span><span class=n>llsize</span><span class=p>;</span>
<span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=n>vaddr</span><span class=p>;</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>ret</span><span class=p>;</span>
<span class=w>    </span><span class=n>VFIOHostDMAWindow</span><span class=w> </span><span class=o>*</span><span class=n>hostwin</span><span class=p>;</span>
<span class=w>    </span><span class=kt>bool</span><span class=w> </span><span class=n>hostwin_found</span><span class=p>;</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>vfio_listener_skipped_section</span><span class=p>(</span><span class=n>section</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>   </span><span class=c1>// do dma_map only if MRS is RAM type</span>
<span class=w>        </span><span class=n>trace_vfio_listener_region_add_skip</span><span class=p>(</span>
<span class=w>                </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_address_space</span><span class=p>,</span>
<span class=w>                </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_address_space</span><span class=w> </span><span class=o>+</span>
<span class=w>                </span><span class=n>int128_get64</span><span class=p>(</span><span class=n>int128_sub</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>size</span><span class=p>,</span><span class=w> </span><span class=n>int128_one</span><span class=p>())));</span>
<span class=w>        </span><span class=k>return</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>unlikely</span><span class=p>((</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_address_space</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=o>~</span><span class=n>TARGET_PAGE_MASK</span><span class=p>)</span><span class=w> </span><span class=o>!=</span>
<span class=w>                 </span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_region</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=o>~</span><span class=n>TARGET_PAGE_MASK</span><span class=p>)))</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>error_report</span><span class=p>(</span><span class=s>"%s received unaligned region"</span><span class=p>,</span><span class=w> </span><span class=n>__func__</span><span class=p>);</span>
<span class=w>        </span><span class=k>return</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=n>iova</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>TARGET_PAGE_ALIGN</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_address_space</span><span class=p>);</span>
<span class=w>    </span><span class=n>llend</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>int128_make64</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_address_space</span><span class=p>);</span>
<span class=w>    </span><span class=n>llend</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>int128_add</span><span class=p>(</span><span class=n>llend</span><span class=p>,</span><span class=w> </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>size</span><span class=p>);</span>
<span class=w>    </span><span class=n>llend</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>int128_and</span><span class=p>(</span><span class=n>llend</span><span class=p>,</span><span class=w> </span><span class=n>int128_exts64</span><span class=p>(</span><span class=n>TARGET_PAGE_MASK</span><span class=p>));</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>int128_ge</span><span class=p>(</span><span class=n>int128_make64</span><span class=p>(</span><span class=n>iova</span><span class=p>),</span><span class=w> </span><span class=n>llend</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>return</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>end</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>int128_get64</span><span class=p>(</span><span class=n>int128_sub</span><span class=p>(</span><span class=n>llend</span><span class=p>,</span><span class=w> </span><span class=n>int128_one</span><span class=p>()));</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>container</span><span class=o>-&gt;</span><span class=n>iommu_type</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>VFIO_SPAPR_TCE_v2_IOMMU</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>hwaddr</span><span class=w> </span><span class=n>pgsize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>

<span class=w>        </span><span class=cm>/* For now intersections are not allowed, we may relax this later */</span>
<span class=w>        </span><span class=n>QLIST_FOREACH</span><span class=p>(</span><span class=n>hostwin</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>container</span><span class=o>-&gt;</span><span class=n>hostwin_list</span><span class=p>,</span><span class=w> </span><span class=n>hostwin_next</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>ranges_overlap</span><span class=p>(</span><span class=n>hostwin</span><span class=o>-&gt;</span><span class=n>min_iova</span><span class=p>,</span>
<span class=w>                               </span><span class=n>hostwin</span><span class=o>-&gt;</span><span class=n>max_iova</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>hostwin</span><span class=o>-&gt;</span><span class=n>min_iova</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
<span class=w>                               </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_address_space</span><span class=p>,</span>
<span class=w>                               </span><span class=n>int128_get64</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>size</span><span class=p>)))</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>-1</span><span class=p>;</span>
<span class=w>                </span><span class=k>goto</span><span class=w> </span><span class=n>fail</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>}</span>

<span class=w>        </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vfio_spapr_create_window</span><span class=p>(</span><span class=n>container</span><span class=p>,</span><span class=w> </span><span class=n>section</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>pgsize</span><span class=p>);</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>ret</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>goto</span><span class=w> </span><span class=n>fail</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>

<span class=w>        </span><span class=n>vfio_host_win_add</span><span class=p>(</span><span class=n>container</span><span class=p>,</span><span class=w> </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_address_space</span><span class=p>,</span>
<span class=w>                          </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_address_space</span><span class=w> </span><span class=o>+</span>
<span class=w>                          </span><span class=n>int128_get64</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>size</span><span class=p>)</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>pgsize</span><span class=p>);</span>
<span class=cp>#ifdef CONFIG_KVM</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>kvm_enabled</span><span class=p>())</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=n>VFIOGroup</span><span class=w> </span><span class=o>*</span><span class=n>group</span><span class=p>;</span>
<span class=w>            </span><span class=n>IOMMUMemoryRegion</span><span class=w> </span><span class=o>*</span><span class=n>iommu_mr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>IOMMU_MEMORY_REGION</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>mr</span><span class=p>);</span>
<span class=w>            </span><span class=k>struct</span><span class=w> </span><span class=nc>kvm_vfio_spapr_tce</span><span class=w> </span><span class=n>param</span><span class=p>;</span>
<span class=w>            </span><span class=k>struct</span><span class=w> </span><span class=nc>kvm_device_attr</span><span class=w> </span><span class=n>attr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>.</span><span class=n>group</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>KVM_DEV_VFIO_GROUP</span><span class=p>,</span>
<span class=w>                </span><span class=p>.</span><span class=n>attr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>KVM_DEV_VFIO_GROUP_SET_SPAPR_TCE</span><span class=p>,</span>
<span class=w>                </span><span class=p>.</span><span class=n>addr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>uint64_t</span><span class=p>)(</span><span class=kt>unsigned</span><span class=w> </span><span class=kt>long</span><span class=p>)</span><span class=o>&amp;</span><span class=n>param</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>memory_region_iommu_get_attr</span><span class=p>(</span><span class=n>iommu_mr</span><span class=p>,</span><span class=w> </span><span class=n>IOMMU_ATTR_SPAPR_TCE_FD</span><span class=p>,</span>
<span class=w>                                              </span><span class=o>&amp;</span><span class=n>param</span><span class=p>.</span><span class=n>tablefd</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=n>QLIST_FOREACH</span><span class=p>(</span><span class=n>group</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>container</span><span class=o>-&gt;</span><span class=n>group_list</span><span class=p>,</span><span class=w> </span><span class=n>container_next</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=n>param</span><span class=p>.</span><span class=n>groupfd</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>group</span><span class=o>-&gt;</span><span class=n>fd</span><span class=p>;</span>
<span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>ioctl</span><span class=p>(</span><span class=n>vfio_kvm_device_fd</span><span class=p>,</span><span class=w> </span><span class=n>KVM_SET_DEVICE_ATTR</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>attr</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=n>error_report</span><span class=p>(</span><span class=s>"vfio: failed to setup fd %d "</span>
<span class=w>                                     </span><span class=s>"for a group with fd %d: %s"</span><span class=p>,</span>
<span class=w>                                     </span><span class=n>param</span><span class=p>.</span><span class=n>tablefd</span><span class=p>,</span><span class=w> </span><span class=n>param</span><span class=p>.</span><span class=n>groupfd</span><span class=p>,</span>
<span class=w>                                     </span><span class=n>strerror</span><span class=p>(</span><span class=n>errno</span><span class=p>));</span>
<span class=w>                        </span><span class=k>return</span><span class=p>;</span>
<span class=w>                    </span><span class=p>}</span>
<span class=w>                    </span><span class=n>trace_vfio_spapr_group_attach</span><span class=p>(</span><span class=n>param</span><span class=p>.</span><span class=n>groupfd</span><span class=p>,</span><span class=w> </span><span class=n>param</span><span class=p>.</span><span class=n>tablefd</span><span class=p>);</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>}</span>
<span class=cp>#endif</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=n>hostwin_found</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>false</span><span class=p>;</span>
<span class=w>    </span><span class=n>QLIST_FOREACH</span><span class=p>(</span><span class=n>hostwin</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>container</span><span class=o>-&gt;</span><span class=n>hostwin_list</span><span class=p>,</span><span class=w> </span><span class=n>hostwin_next</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>hostwin</span><span class=o>-&gt;</span><span class=n>min_iova</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>iova</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>hostwin</span><span class=o>-&gt;</span><span class=n>max_iova</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=n>hostwin_found</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>true</span><span class=p>;</span>
<span class=w>            </span><span class=k>break</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>hostwin_found</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>error_report</span><span class=p>(</span><span class=s>"vfio: IOMMU container %p can't map guest IOVA region"</span>
<span class=w>                     </span><span class=s>" 0x%"</span><span class=n>HWADDR_PRIx</span><span class=s>"..0x%"</span><span class=n>HWADDR_PRIx</span><span class=p>,</span>
<span class=w>                     </span><span class=n>container</span><span class=p>,</span><span class=w> </span><span class=n>iova</span><span class=p>,</span><span class=w> </span><span class=n>end</span><span class=p>);</span>
<span class=w>        </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>-</span><span class=n>EFAULT</span><span class=p>;</span>
<span class=w>        </span><span class=k>goto</span><span class=w> </span><span class=n>fail</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=n>memory_region_ref</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>mr</span><span class=p>);</span><span class=w>     </span><span class=c1>// increase ref of MR by one</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>memory_region_is_iommu</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>mr</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>      </span><span class=c1>// guest IOMMU emulation</span>
<span class=w>        </span><span class=n>VFIOGuestIOMMU</span><span class=w> </span><span class=o>*</span><span class=n>giommu</span><span class=p>;</span>
<span class=w>        </span><span class=n>IOMMUMemoryRegion</span><span class=w> </span><span class=o>*</span><span class=n>iommu_mr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>IOMMU_MEMORY_REGION</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>mr</span><span class=p>);</span>

<span class=w>        </span><span class=n>trace_vfio_listener_region_add_iommu</span><span class=p>(</span><span class=n>iova</span><span class=p>,</span><span class=w> </span><span class=n>end</span><span class=p>);</span>
<span class=w>        </span><span class=cm>/*</span>
<span class=cm>         * FIXME: For VFIO iommu types which have KVM acceleration to</span>
<span class=cm>         * avoid bouncing all map/unmaps through qemu this way, this</span>
<span class=cm>         * would be the right place to wire that up (tell the KVM</span>
<span class=cm>         * device emulation the VFIO iommu handles to use).</span>
<span class=cm>         */</span>
<span class=w>        </span><span class=n>giommu</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>g_malloc0</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=o>*</span><span class=n>giommu</span><span class=p>));</span>
<span class=w>        </span><span class=n>giommu</span><span class=o>-&gt;</span><span class=n>iommu</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>iommu_mr</span><span class=p>;</span>
<span class=w>        </span><span class=n>giommu</span><span class=o>-&gt;</span><span class=n>iommu_offset</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_address_space</span><span class=w> </span><span class=o>-</span>
<span class=w>                               </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_region</span><span class=p>;</span>
<span class=w>        </span><span class=n>giommu</span><span class=o>-&gt;</span><span class=n>container</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>container</span><span class=p>;</span>
<span class=w>        </span><span class=n>llend</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>int128_add</span><span class=p>(</span><span class=n>int128_make64</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_region</span><span class=p>),</span>
<span class=w>                           </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>size</span><span class=p>);</span>
<span class=w>        </span><span class=n>llend</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>int128_sub</span><span class=p>(</span><span class=n>llend</span><span class=p>,</span><span class=w> </span><span class=n>int128_one</span><span class=p>());</span>
<span class=w>        </span><span class=n>iommu_notifier_init</span><span class=p>(</span><span class=o>&amp;</span><span class=n>giommu</span><span class=o>-&gt;</span><span class=n>n</span><span class=p>,</span><span class=w> </span><span class=n>vfio_iommu_map_notify</span><span class=p>,</span>
<span class=w>                            </span><span class=n>IOMMU_NOTIFIER_ALL</span><span class=p>,</span>
<span class=w>                            </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_region</span><span class=p>,</span>
<span class=w>                            </span><span class=n>int128_get64</span><span class=p>(</span><span class=n>llend</span><span class=p>));</span>
<span class=w>        </span><span class=n>QLIST_INSERT_HEAD</span><span class=p>(</span><span class=o>&amp;</span><span class=n>container</span><span class=o>-&gt;</span><span class=n>giommu_list</span><span class=p>,</span><span class=w> </span><span class=n>giommu</span><span class=p>,</span><span class=w> </span><span class=n>giommu_next</span><span class=p>);</span>

<span class=w>        </span><span class=n>memory_region_register_iommu_notifier</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>mr</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>giommu</span><span class=o>-&gt;</span><span class=n>n</span><span class=p>);</span>
<span class=w>        </span><span class=n>memory_region_iommu_replay</span><span class=p>(</span><span class=n>giommu</span><span class=o>-&gt;</span><span class=n>iommu</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>giommu</span><span class=o>-&gt;</span><span class=n>n</span><span class=p>);</span>

<span class=w>        </span><span class=k>return</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=cm>/* Here we assume that memory_region_is_ram(section-&gt;mr)==true */</span>

<span class=w>    </span><span class=n>vaddr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>memory_region_get_ram_ptr</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>mr</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w>        </span><span class=c1>// get hva</span>
<span class=w>            </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_region</span><span class=w> </span><span class=o>+</span>
<span class=w>            </span><span class=p>(</span><span class=n>iova</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_address_space</span><span class=p>);</span>

<span class=w>    </span><span class=n>trace_vfio_listener_region_add_ram</span><span class=p>(</span><span class=n>iova</span><span class=p>,</span><span class=w> </span><span class=n>end</span><span class=p>,</span><span class=w> </span><span class=n>vaddr</span><span class=p>);</span>

<span class=w>    </span><span class=n>llsize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>int128_sub</span><span class=p>(</span><span class=n>llend</span><span class=p>,</span><span class=w> </span><span class=n>int128_make64</span><span class=p>(</span><span class=n>iova</span><span class=p>));</span><span class=w>        </span><span class=c1>// calc map size</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>memory_region_is_ram_device</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>mr</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>hwaddr</span><span class=w> </span><span class=n>pgmask</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=mi>1ULL</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>ctz64</span><span class=p>(</span><span class=n>hostwin</span><span class=o>-&gt;</span><span class=n>iova_pgsizes</span><span class=p>))</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>

<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>((</span><span class=n>iova</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>pgmask</span><span class=p>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=p>(</span><span class=n>int128_get64</span><span class=p>(</span><span class=n>llsize</span><span class=p>)</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>pgmask</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=n>trace_vfio_listener_region_add_no_dma_map</span><span class=p>(</span>
<span class=w>                </span><span class=n>memory_region_name</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>mr</span><span class=p>),</span>
<span class=w>                </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>offset_within_address_space</span><span class=p>,</span>
<span class=w>                </span><span class=n>int128_getlo</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>size</span><span class=p>),</span>
<span class=w>                </span><span class=n>pgmask</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
<span class=w>            </span><span class=k>return</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vfio_dma_map</span><span class=p>(</span><span class=n>container</span><span class=p>,</span><span class=w> </span><span class=n>iova</span><span class=p>,</span><span class=w> </span><span class=n>int128_get64</span><span class=p>(</span><span class=n>llsize</span><span class=p>),</span><span class=w>   </span><span class=c1>// do VFIO_IOMMU_MAP_DMA</span>
<span class=w>                       </span><span class=n>vaddr</span><span class=p>,</span><span class=w> </span><span class=n>section</span><span class=o>-&gt;</span><span class=n>readonly</span><span class=p>);</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>ret</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>error_report</span><span class=p>(</span><span class=s>"vfio_dma_map(%p, 0x%"</span><span class=n>HWADDR_PRIx</span><span class=s>", "</span>
<span class=w>                     </span><span class=s>"0x%"</span><span class=n>HWADDR_PRIx</span><span class=s>", %p) = %d (%m)"</span><span class=p>,</span>
<span class=w>                     </span><span class=n>container</span><span class=p>,</span><span class=w> </span><span class=n>iova</span><span class=p>,</span><span class=w> </span><span class=n>int128_get64</span><span class=p>(</span><span class=n>llsize</span><span class=p>),</span><span class=w> </span><span class=n>vaddr</span><span class=p>,</span><span class=w> </span><span class=n>ret</span><span class=p>);</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>memory_region_is_ram_device</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>mr</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=cm>/* Allow unexpected mappings not to be fatal for RAM devices */</span>
<span class=w>            </span><span class=k>return</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>goto</span><span class=w> </span><span class=n>fail</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=p>;</span>

<span class=nl>fail</span><span class=p>:</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>memory_region_is_ram_device</span><span class=p>(</span><span class=n>section</span><span class=o>-&gt;</span><span class=n>mr</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>error_report</span><span class=p>(</span><span class=s>"failed to vfio_dma_map. pci p2p may not work"</span><span class=p>);</span>
<span class=w>        </span><span class=k>return</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=cm>/*</span>
<span class=cm>     * On the initfn path, store the first error in the container so we</span>
<span class=cm>     * can gracefully fail.  Runtime, there's not much we can do other</span>
<span class=cm>     * than throw a hardware error.</span>
<span class=cm>     */</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>container</span><span class=o>-&gt;</span><span class=n>initialized</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>container</span><span class=o>-&gt;</span><span class=n>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=n>container</span><span class=o>-&gt;</span><span class=n>error</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ret</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>hw_error</span><span class=p>(</span><span class=s>"vfio: DMA mapping failed, unable to continue"</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></div>
<p>vfio_dma_map函数中会传入建立DMA Remapping的基本信息，
这里是用数据结构vfio_iommu_type1_dma_map来描述，
然后交给内核去做DMA Remapping。</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>vfio_iommu_type1_dma_map</span><span class=w> </span><span class=n>map</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=p>.</span><span class=n>argsz</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>map</span><span class=p>),</span>
<span class=w>        </span><span class=p>.</span><span class=n>flags</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>VFIO_DMA_MAP_FLAG_READ</span><span class=p>,</span><span class=w>    </span><span class=c1>// flags</span>
<span class=w>        </span><span class=p>.</span><span class=n>vaddr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>__u64</span><span class=p>)(</span><span class=kt>uintptr_t</span><span class=p>)</span><span class=n>vaddr</span><span class=p>,</span><span class=w>   </span><span class=c1>// HVA</span>
<span class=w>        </span><span class=p>.</span><span class=n>iova</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>iova</span><span class=p>,</span><span class=w>                       </span><span class=c1>// iova -&gt; gpa</span>
<span class=w>        </span><span class=p>.</span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=p>,</span><span class=w>                       </span><span class=c1>// map size</span>
<span class=w>    </span><span class=p>};</span>
</code></pre></div></div>
<p>该函数对应的内核调用栈见下面的图，其主要流程包含2个步骤，简称pin和map：</p>
<ul>
<li>vfio_pin_pages_remote 把虚拟机的物理内存都pin住，物理内存不能交换</li>
<li>vfio_iommu_map 创建虚拟机domain的IOMMU页表，DMA Remapping地址翻译时候使用</li>
</ul>
<p>值得注意的是在pin步骤中，
pin虚拟机物理内存是调用get_user_pages_fast来实现的，
如果虚拟机的内存未申请那么会先将内存申请出来，
这个过程可能会非常耗时并且会持有进程的mmap_sem大锁。</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=n>vfio_dma_do_map</span>
<span class=o>--------------------------------------------------------------</span>
<span class=n>vfio_pin_map_dma</span>
<span class=w>    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_pin_pages_remote</span><span class=w>   </span><span class=c1>// pin pages in memory</span>
<span class=w>        </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vaddr_get_pfn</span>
<span class=w>            </span><span class=o>|</span><span class=n>get_user_pages_fast</span>
<span class=w>                </span><span class=o>|</span><span class=n>gup_pud_range</span>
<span class=w>                    </span><span class=n>gup_pud_range</span>
<span class=w>                        </span><span class=n>gup_pte_range</span>
<span class=w>                            </span><span class=n>get_page</span><span class=w>   </span><span class=c1>// pin page, without mm-&gt;mmap_sem held</span>
<span class=w>                </span><span class=o>|</span><span class=n>get_user_pages_unlocked</span>
<span class=w>                    </span><span class=n>__get_user_pages_locked</span>
<span class=w>                        </span><span class=n>__get_user_pages</span>
<span class=w>                            </span><span class=o>|</span><span class=n>handle_mm_fault</span>
<span class=w>                                </span><span class=n>__handle_mm_fault</span><span class=w> </span><span class=c1>// do_page_fault process</span>
<span class=w>                                    </span><span class=n>alloc</span><span class=w> </span><span class=n>pud</span><span class=o>-&gt;</span><span class=n>pmd</span><span class=o>-&gt;</span><span class=n>pte</span>
<span class=w>                                    </span><span class=n>handle_pte_fault</span>
<span class=w>                                        </span><span class=n>do_anonymous_page</span>
<span class=w>                                            </span><span class=n>alloc_zeroed_user_highpage_movable</span>
<span class=w>                                            </span><span class=p>...</span><span class=w> </span><span class=n>alloc</span><span class=w> </span><span class=n>page</span><span class=w> </span><span class=n>with</span><span class=w> </span><span class=n>__GFP_ZERO</span>
<span class=w>                            </span><span class=o>|</span><span class=n>_get_page</span>
<span class=w>                                </span><span class=n>atomic_inc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>page_count</span><span class=p>)</span><span class=w> </span><span class=c1>// pin page</span>
<span class=w>            </span><span class=o>|</span><span class=n>get_user_pages_remote</span>
<span class=w>                </span><span class=n>__get_user_pages_locked</span>

<span class=w>    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_iommu_map</span><span class=w>  </span><span class=c1>// create IOMMU domain page table</span>
<span class=w>        </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>iommu_map</span>
<span class=w>            </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>intel_iommu_map</span><span class=w>     </span><span class=c1>// intel-iommu.c</span>
<span class=w>                </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>domain_pfn_mapping</span>
<span class=w>                    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>pfn_to_dma_pte</span>
</code></pre></div></div>
<p>同理，vfio_listener_region_add回调函数实现了DMA Remapping关系的反注册。</p>
<h3>4. VFIO中又是如何支持设备热插拔的？</h3>
<p>vfio热插拔仍然是走的QEMU设备热插拔流程，大致流程如下：</p>
<div class=highlight><div class=codecopy>
 <button class=codecopy-btn title=Copy to clipboard aria-label=Copy>Copy
 </button><pre><span></span><code><span class=n>qdev_device_add</span>
<span class=w>    </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>device_set_realized</span>
<span class=w>        </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>hotplug_handler_plug</span>
<span class=w>            </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>piix4_device_plug_cb</span>
<span class=w>                </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>piix4_send_gpe</span><span class=w> </span><span class=c1>// inject ACPI GPE to guest OS</span>
<span class=w>        </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>pci_qdev_realize</span>
<span class=w>                </span><span class=o>|-&gt;</span><span class=w> </span><span class=n>vfio_realize</span>
</code></pre></div></div>
<p>device_set_realized函数负责将设备上线，
piix4_send_gpe函数中会注入一个ACPI GPE事件通知GuestOS，
vfio_realize函数负责整个vfio的设备初始化流程。
那么vfio_realize中主要做了哪些事情呢？
可以用下面这一张图概括~<a href=https://kernelgo.org/images/qemu-vfio.svg>点击链接查看原图</a></p>
<p>vfio_realize的具体流程这里就不再展开免得啰嗦！
感兴趣的请自己分析代码去，所有的vfio实现细节都在这里面。</p>
<p><img alt=vfio-pci-bar src="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTI0MXB4IiBoZWlnaHQ9Ijk5OHB4IiB2ZXJzaW9uPSIxLjEiIGNvbnRlbnQ9IiZsdDtteGZpbGUgdXNlckFnZW50PSZxdW90O01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNjYuMC4zMzU5LjEzOSBTYWZhcmkvNTM3LjM2JnF1b3Q7IHZlcnNpb249JnF1b3Q7OC43LjYmcXVvdDsgZWRpdG9yPSZxdW90O3d3dy5kcmF3LmlvJnF1b3Q7IHR5cGU9JnF1b3Q7Z2l0aHViJnF1b3Q7Jmd0OyZsdDtkaWFncmFtIGlkPSZxdW90O2JmZmQ4NWU4LTA3MTktMzIzYy1iNTZjLTNmNDlhNDRhYmU2MCZxdW90OyBuYW1lPSZxdW90O1BhZ2UtMSZxdW90OyZndDs3VjFkZDZJNEdQNDFQV2YzWWprSkNSKzVuSEZzdDJlMzB6blRtZG1aS3c3VlZOa0NzWWh0M1YrL1FRTVNnaFFWc0MxNm9SSXdYOC96ZnVUTkM1NmhRZkI4RWJtejZSVWJVLzlNQitQbk0vVHBUTmVoaVUzK2taUXMxeVcyS1FvbWtUY1dGMjBLYnJ6L3FDZ0VvblRoamVsY3VqQm16SSs5bVZ3NFltRklSN0ZVNWtZUmU1SXZ1Mk8rM09yTW5WQ2w0R2JrK21ycFA5NDRub3BSNk5hbS9FL3FUYVpweTlBazZ6TzM3dWgrRXJGRktObzcwOUhkNnJVK0hiaHBYV0tnODZrN1prKzVJalE4UTRPSXNYajlMWGdlVUQrWjIzVGExcjg3MzNJMjYzZEV3N2pPRC9UMUR4NWRmeUdHL25qbk1TZWlycCtBc3U1anZFem5aVFV5bXZ3V25xR1BUMU12cGpjemQ1U2NmZUpNNEdYVE9QREY2V3hzZ0IrTVdPQ054UGM3ei9jSHpHZlJxdEowZ25nNUMrTnpOL0Q4aERXRDFROTBjT09HYy81eGRjTXY0SjJhaFB6Y2lJK09Sa2tUY2NUdWFhNHVzSHJ4TStwRWlMbDVwRkZNbjNORlltSXVLQXRvSEMzNUplS3NKVEFTSElZcFprOGJSc0NVc05NY0c5THJYRUhDU1ZiekJnaitSV0JSam91QmxMbW5ZMDVSY2NpaWVNb21MSFQ5NGFiMG80eE9Eb2wvYVJ3dmhaUzVpNWp4b2swTmZ6TTJFOWU5Q0FBTngrZGUwdWtWanZ6b1F5SnNTWWRtTkt5YTlUbGJSQ014RUN3RTJvMG1OQk9nZFZreXhrcG9JdXE3c2Zjb2kra2hFMjNiVFU0MEgzYTAvSmxORHovNGxSeG94bHNBd1Q0V0JyaGNDZkdPT1lrdW5mVmJEZWtHZkZrUDZhUWxQYVJBbzRxTFFzRGM1TmNnODNhSm9jOWUvRE9WTFA0OWQwWVNnVnFFMTFYQzQ1cUV6MDIwVWFMdjA3TGFjaUZhK01JODN0OE1aMmdERFJLQUxWTzhHd1hZaVVZTUhkbEF2SnR5QSt1eGlqcnpGci9Rakg1WU0rdjVVNXBaOFNpYnNucWFWNkhXQXcwV1RzS2gzODUwODJHUitFQWMyL014ZmVUdmlVcmdIeXVGd0t2SUx2aTkzOW9CNHlKK3FuYlFRVXRlQ2dISzVMOGJMeVYxU1NRM0JSM0xSS2E5S2JPUlhENjhVYzk5ZFIzTFJoSmJobW9rY1V0R0VzSVNxOWdISnpJZGQxNUdVRjJyMnJ5TWJGbk1paUJCOGhtN1hzakoyR3RSVVN5RzFhSEZnTERSaGUwYkVoVlVZazZPSnlxb1hGVHVId05oVGh4M1BENnR2cmkwR0hJVXFOU3drTGFrUlYwWmUyd1U4MHRNTjBnbU9yeWR6MWJqbEkvLytuSGxETDRPUDN3Yk9wK0dQeTRIdzM1amFBSHpSUXpiODVHaE12bjlVSGkycXZCU3kzTUVoYWV1TmxjS2I4Wm1DOTRVUFRuUkpVNjBnYnAwb2trNVFva2Rva0dDMGRoNVl0SDRCRkVlSWhOZ3JVT1Ewam9VTVJwNXpweHJIaWRpd1FrZ0NTQ3pTeGtDUFYySVpwdkUrWVVvT0pheHlWaFRrSkpnN2owNzFJMzhwVE9uY2Q4OTY2S2tXRGJvVXBWQjJGUEhUQzhKMmh4djd5L3RUVkZXYnQxbzdrUjA0czNqdmdkc2lvSmlZNnREaTc4bFVwQzRaU04zNXQ1NnZrZm5QUWNJMlJKQUJKZHFNcU10aUxic242ZlM0OUFvY2tJV2UzZGU3MFdwaUJUcEZpbDFPMTFHS3FJUEo2UUVVbkxNQm9LT2hjb3NoMnJsdUhHYytPZGQ2RHdzdk9pKzcwRGhBbENrSkQrbExaaDRhejMxNGtyQ2Eya1MwQkc4dUMzaHRVU3hzZEFKQXJmbmk1M2lOb0tOelU3ak5tcHc3WVNKV1F1VHR2WjJVRVVvamNzbkd5VlI2U1JpMEcrUXVPQm84bjUxeDNFQ2RGaElEUlFNakVocDNDUTQvc3BibTl5cHpQaVUyZ2paaGpSbW1tcVpuaExMYzdUd0FUb3NuZUNkb05QY3ZKZm5qQnBtNFZZSVZCQ3N1c21uTDFiVVhIb3BVbGZGZGZKTDF4K241TksxcWkxc25IZWFLb1RVeFhLdDVJY2Y1NWZYenNYWDYrOWZuSnZoTjJkdy9mbmJoOHZQdzY4bktQTlFaaERsb2NSdFFha3VwdXREbVlCNGVYMTE5ZjBFb0FSZ2lTeEN1eTBBclFNQVhJSG5YQ1F3Zmo2L1BxR1lSeEYxbXE1dkhlUXN2ZGxZQ1NyeFdOSFJZaVZJalpVRU5HRFIwdkdUSUhDNENnT2Y5cjFLWktWTDc0UDA5TDdRVkM2a3RMMmpaVktna3JqVlNWWktaSVVVYmxZdms1WFd2QU84SlpRMURseW45MUZHbUttb0ttamFlbzRBcnRoeFpPRXBEVW1OekpjbXZiWVZCTWFxWDczSmZwbEZOQmxaditGUnNzVEs3bjV2Sy9hTHQ3cHFRbjY4MEl1ZHlNMXVtcG5GUGJkRHlwNEtnU1hCK2d5YzVwUDYzdkVkeWVseklDVFg3R2lSOTdRM09kbFliMTJKVkJhdXd2b3RDampWU3BXaTBKcnVNbFduVEJXTnFrZDNsRytHeUtzWmRUTmtSMUdvUmZ6U1cvSHJFcitiaDNjZ1dQQWljQUhDdWpza0tMMDFNM05IV3RzaE1kWFV6cmZFRUlrTmRhTTVYYkhCMEhEK0pRY3lETVBRWVA2MUwxV3FXeUdWclRUSUkzV25iVGNlN1d3K0svWml0MUt5bnFZcGlYN29kYU1mblhGTGd0bmNkeTlXcWNoc1Q5TjA4QmlwamhqeTJ0bEE5bWVEaHBGcEU2UURaTnVGcEU0TEVvMWdhR0hMc0hRYkdrWnJURkYzQ3R0bHl1NXNlRDNJVndHR0tnSGJWMGRZZG5zNlFnMkZIQW41S3UxUnl4dEplLzRtbUdJRHdMMklEVk53TTB5eGNYditoaHFWT1Q1VHNDMXg1UStnQWI1RUVTVmZhT1R4QVNacnpoMGVXS2lYTUt2dUE4aGVCYk5NSk9tZy9abFYwUWdCUk1OUU4zV0lETExKQjJ5ZWRaYitHbGxuU1FwS0E5alltWE92aUV0a084eW1yS1gydG1lbUJpMElNU0NJR01TUzE5cUVRTTFHaG1FQmJCS0wySzE1T2RhaEs2YnQ1R2hxZGYxS1dHRmdVd01JY3o1WU9zY3NmYjVCbW8rSUU4cWJCb1NtYmhGZ3Bna3VPNmVsNGkxNWppOUF6d0Z5bDduTFpza0Y4OHJSbExhellkSzZ4bjE1WmFzeDJaT09hbFJIWVVsSHllb0RBdENVMDEyaHBDREFVRU5kYUNuN1pQRmFaeE91WUpQUkVKdXdabGF3aVhURUp0SXhtMTQ3K25aaHh3QVN1Qi9BeFlxVTNhTUdNVHgweCtDZFk2anZ1K3VqVkpUK24wd0xHSFljclg5ekdPNGJRUzFXaEdCN0dIWWNUMzlyR0tLbTVCQzFKNGNRSEphTlg3aDFzVzZxeXY1UUhycVMwd3NCUW5QZnhacHVhQURtUENPNTJ0VFBhSHJwVnV5K25kNHNYdEhQNmwvc3V0empoNXMvQmx0ZnZ2bjNOVFQ4SHc9PSZsdDsvZGlhZ3JhbSZndDsmbHQ7L214ZmlsZSZndDsiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7Ij48ZGVmcy8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC41LDAuNSkiPjxyZWN0IHg9IjAiIHk9IjciIHdpZHRoPSIxMTAiIGhlaWdodD0iMjAiIHJ4PSIzIiByeT0iMyIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMuNSw3LjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgcG9pbnRlci1ldmVudHM9ImFsbCIgd2lkdGg9IjEwMiIgaGVpZ2h0PSIxOSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogMTAycHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHdvcmQtd3JhcDogbm9ybWFsOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0OyI+dmZpb19yZWFsaXplPC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjUxIiB5PSIxNiIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMnB4IiBmb250LWZhbWlseT0iQ29taWMgU2FucyBNUyI+dmZpb19yZWFsaXplPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDI0NS4zOCAyNyBMIDI0NS4zOCAxODQuNzkgUSAyNDUuMzggMTk0Ljc5IDI0NS4zOCAyMDQuNzkgTCAyNDUuMzggMzU5Ljc2IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDI0MS44OCAzNTMuODggTCAyNDUuMzggMzYwLjg4IEwgMjQ4Ljg4IDM1My44OCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAzMTAgMTYuODYgTCAzMzIuNjIgMTYuODYgUSAzNDIuNjIgMTYuODYgMzUyLjYyIDE2Ljg2IEwgMzcyLjggMTYuODYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMzY2LjkyIDIwLjM2IEwgMzczLjkyIDE2Ljg2IEwgMzY2LjkyIDEzLjM2IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cmVjdCB4PSIxODEiIHk9IjciIHdpZHRoPSIxMjkiIGhlaWdodD0iMjAiIHJ4PSIzIiByeT0iMyIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3OS41LDcuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMTMxIiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAxMzBweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij52ZmlvX2dldF9ncm91cDwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI2NiIgeT0iMTYiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiPnZmaW9fZ2V0X2dyb3VwPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDExMC4yMSAxNi44NiBMIDE3OS4wMSAxNi44NiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAxNzMuMTIgMjAuMzYgTCAxODAuMTIgMTYuODYgTCAxNzMuMTIgMTMuMzYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxyZWN0IHg9IjM3NSIgeT0iNyIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMCIgcng9IjMiIHJ5PSIzIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzM4LjUsNy41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSIyNzMiIGhlaWdodD0iMTkiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7Q29taWMgU2FucyBNUyZxdW90OzsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6IDI3M3B4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB3b3JkLXdyYXA6IG5vcm1hbDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246aW5oZXJpdDsiPnFlbXVfb3BlbigiL2Rldi92ZmlvL2dyb3VwaWQiKTwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIxMzciIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj5xZW11X29wZW4oIi9kZXYvdmZpby9ncm91cGlkIik8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gMzIwIDM3MiBMIDM3Ny43NiAzNzIiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMzcxLjg4IDM3NS41IEwgMzc4Ljg4IDM3MiBMIDM3MS44OCAzNjguNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHJlY3QgeD0iMTcxIiB5PSIzNjIiIHdpZHRoPSIxNDkiIGhlaWdodD0iMjAiIHJ4PSIzIiByeT0iMyIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3Ny41LDM2Mi41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSIxMzUiIGhlaWdodD0iMTkiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7Q29taWMgU2FucyBNUyZxdW90OzsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6IDEzOHB4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB3b3JkLXdyYXA6IG5vcm1hbDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246aW5oZXJpdDsiPnZmaW9fZ2V0X2RldmljZTwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI2OCIgeT0iMTYiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiPnZmaW9fZ2V0X2RldmljZTwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSA1NzUgNjcuMjEgTCA1OTUuMzggNjcuMjEgUSA2MDUuMzggNjcuMjEgNjE1LjM4IDY3LjIxIEwgNjMzLjQ5IDY3LjIxIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDYyNy42MSA3MC43MSBMIDYzNC42MSA2Ny4yMSBMIDYyNy42MSA2My43MSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHJlY3QgeD0iMzc1IiB5PSI1NyIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMCIgcng9IjMiIHJ5PSIzIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzc1LjUsNTcuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMTk4IiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAyMDFweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij52ZmlvX2Nvbm5lY3RfY29udGFpbmVyPC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9Ijk5IiB5PSIxNiIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMnB4IiBmb250LWZhbWlseT0iQ29taWMgU2FucyBNUyI+dmZpb19jb25uZWN0X2NvbnRhaW5lcjwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSA1NzAgMzcyLjAzIEwgNjMzLjQ5IDM3Mi4wMyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSA2MjcuNjEgMzc1LjUzIEwgNjM0LjYxIDM3Mi4wMyBMIDYyNy42MSAzNjguNTMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxyZWN0IHg9IjM4MCIgeT0iMzYyIiB3aWR0aD0iMTkwIiBoZWlnaHQ9IjIwIiByeD0iMyIgcnk9IjMiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNTQuNSwzNjIuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMjQwIiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAyNDFweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij52ZmlvX2t2bV9kZXZpY2VfYWRkX2dyb3VwPC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjEyMCIgeT0iMTYiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiPnZmaW9fa3ZtX2RldmljZV9hZGRfZ3JvdXA8L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjYzNiIgeT0iMzYyIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwIiByeD0iMyIgcnk9IjMiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MTIuNSwzNjIuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMjQ2IiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAyNDlweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij5pb2N0bMKgwqBLVk1fQ1JFQVRFX0RFVklDRTwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIxMjMiIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj5pb2N0bMKgwqBLVk1fQ1JFQVRFX0RFVklDRTwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSAzMjAgNDMyLjAzIEwgMzc3LjYzIDQzMi4wMyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAzNzEuNzQgNDM1LjUzIEwgMzc4Ljc0IDQzMi4wMyBMIDM3MS43NCA0MjguNTMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxyZWN0IHg9IjE3MSIgeT0iNDIyIiB3aWR0aD0iMTQ5IiBoZWlnaHQ9IjIwIiByeD0iMyIgcnk9IjMiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTUuNSw0MjIuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAxODBweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij52ZmlvX3BvcHVsYXRlX2RldmljZTwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI5MCIgeT0iMTYiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiPnZmaW9fcG9wdWxhdGVfZGV2aWNlPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxNzEiIHk9IjQ5MS41IiB3aWR0aD0iMTQ5IiBoZWlnaHQ9IjIwIiByeD0iMyIgcnk9IjMiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDIuNSw0OTEuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMjA2IiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAyMDVweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij52ZmlvX2FkZF9lbWxhdGVkX3dvcmQ8L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTAzIiB5PSIxNiIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMnB4IiBmb250LWZhbWlseT0iQ29taWMgU2FucyBNUyI+dmZpb19hZGRfZW1sYXRlZF93b3JkPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxNzEiIHk9IjU1MiIgd2lkdGg9IjE0OSIgaGVpZ2h0PSIyMCIgcng9IjMiIHJ5PSIzIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTY3LjUsNTUyLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgcG9pbnRlci1ldmVudHM9ImFsbCIgd2lkdGg9IjE1NiIgaGVpZ2h0PSIxOSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogMTU3cHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHdvcmQtd3JhcDogbm9ybWFsOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0OyI+dmZpb19wY2lfc2l6ZV9yb208L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iNzgiIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj52ZmlvX3BjaV9zaXplX3JvbTwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSAzMjAgNjc3LjU1IEwgMzQwLjIxIDY3Ny41NSBRIDM1MC4yMSA2NzcuNTUgMzYwLjIxIDY3Ny41NSBMIDM3OC4zMiA2NzcuNTUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMzcyLjQzIDY4MS4wNSBMIDM3OS40MyA2NzcuNTUgTCAzNzIuNDMgNjc0LjA1IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cmVjdCB4PSIxNzEiIHk9IjY2Ny41IiB3aWR0aD0iMTQ5IiBoZWlnaHQ9IjIwIiByeD0iMyIgcnk9IjMiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDkuNSw2NjcuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAxOTVweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij52ZmlvX21zaXhfZWFybHlfc2V0dXA8L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iOTYiIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj52ZmlvX21zaXhfZWFybHlfc2V0dXA8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gMzIwIDc0My43NiBMIDM0MC4yMSA3NDMuNzYgUSAzNTAuMjEgNzQzLjc2IDM2MC4yMSA3NDMuNzYgTCAzNzcuNjMgNzQzLjc2IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDM3MS43NCA3NDcuMjYgTCAzNzguNzQgNzQzLjc2IEwgMzcxLjc0IDc0MC4yNiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHJlY3QgeD0iMTcxIiB5PSI3MzQiIHdpZHRoPSIxNDkiIGhlaWdodD0iMjAiIHJ4PSIzIiByeT0iMyIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2NC41LDczNC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSIxNjIiIGhlaWdodD0iMTkiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7Q29taWMgU2FucyBNUyZxdW90OzsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6IDE2MnB4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB3b3JkLXdyYXA6IG5vcm1hbDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246aW5oZXJpdDsiPnZmaW9fYmFyc19yZWdpc3RlcjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI4MSIgeT0iMTYiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiPnZmaW9fYmFyc19yZWdpc3RlcjwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iMTY4IiB5PSI4MjcuNSIgd2lkdGg9IjE1OSIgaGVpZ2h0PSIyMCIgcng9IjMiIHJ5PSIzIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTYzLjUsODI3LjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgcG9pbnRlci1ldmVudHM9ImFsbCIgd2lkdGg9IjE2OCIgaGVpZ2h0PSIxOSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogMTY4cHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHdvcmQtd3JhcDogbm9ybWFsOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0OyI+dmZpb19hZGRfY2FwYWJpbGllczwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI4NCIgeT0iMTYiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiPnZmaW9fYWRkX2NhcGFiaWxpZXM8L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjE2OCIgeT0iODc3LjUiIHdpZHRoPSIxNTkiIGhlaWdodD0iMjAiIHJ4PSIzIiByeT0iMyIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMy41LDg3Ny41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSIyMjciIGhlaWdodD0iMTkiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7Q29taWMgU2FucyBNUyZxdW90OzsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6IDIyOXB4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB3b3JkLXdyYXA6IG5vcm1hbDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246aW5oZXJpdDsiPnZmaW9fcmVnaXN0ZXJfZXJyX25vdGlmaWVyPC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjExNCIgeT0iMTYiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiPnZmaW9fcmVnaXN0ZXJfZXJyX25vdGlmaWVyPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxNjYiIHk9IjkyNy41IiB3aWR0aD0iMTU5IiBoZWlnaHQ9IjIwIiByeD0iMyIgcnk9IjMiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzEuNSw5MjcuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMjI4IiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAyMjlweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij52ZmlvX3JlZ2lzdGVyX3JlcV9ub3RpZmllcjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIxMTQiIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj52ZmlvX3JlZ2lzdGVyX3JlcV9ub3RpZmllcjwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iMTY0IiB5PSI5NzciIHdpZHRoPSIxNTkiIGhlaWdodD0iMjAiIHJ4PSIzIiByeT0iMyIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMy41LDk3Ny41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSIyMTkiIGhlaWdodD0iMTkiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7Q29taWMgU2FucyBNUyZxdW90OzsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6IDIyMHB4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB3b3JkLXdyYXA6IG5vcm1hbDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246aW5oZXJpdDsiPnZmaW9fc2V0dXBfcmVzZXRmbl9xdWlyazwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIxMTAiIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj52ZmlvX3NldHVwX3Jlc2V0Zm5fcXVpcms8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gNTI5IDc0My43NiBMIDU0NC4zNCA3NDMuNzYgUSA1NTQuMzQgNzQzLjc2IDU2NC4zNCA3NDMuNzYgTCA1NzcuNjMgNzQzLjc2IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDU3MS43NCA3NDcuMjYgTCA1NzguNzQgNzQzLjc2IEwgNTcxLjc0IDc0MC4yNiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHJlY3QgeD0iMzgwIiB5PSI3MzMuNSIgd2lkdGg9IjE0OSIgaGVpZ2h0PSIyMCIgcng9IjMiIHJ5PSIzIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzc3LjUsNzMzLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgcG9pbnRlci1ldmVudHM9ImFsbCIgd2lkdGg9IjE1MyIgaGVpZ2h0PSIxOSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogMTU2cHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHdvcmQtd3JhcDogbm9ybWFsOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0OyI+dmZpb19yZWdpb25fbW1hcDwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI3NyIgeT0iMTYiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiPnZmaW9fcmVnaW9uX21tYXA8L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjU4MCIgeT0iNzMzLjUiIHdpZHRoPSI5MCIgaGVpZ2h0PSIyMCIgcng9IjMiIHJ5PSIzIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjAwLjUsNzMzLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgcG9pbnRlci1ldmVudHM9ImFsbCIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiA0OHB4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB3b3JkLXdyYXA6IG5vcm1hbDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246aW5oZXJpdDsiPm1tYXA8L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMjQiIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj5tbWFwPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIzODAuNSIgeT0iNjY3LjUiIHdpZHRoPSIxNDkiIGhlaWdodD0iMjAiIHJ4PSIzIiByeT0iMyIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM1NS41LDY2Ny41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSIxOTgiIGhlaWdodD0iMTkiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7Q29taWMgU2FucyBNUyZxdW90OzsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6IDE5OXB4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB3b3JkLXdyYXA6IG5vcm1hbDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246aW5oZXJpdDsiPnZmaW9fcGNpX3JlbG9jYXRlX21zaXg8L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iOTkiIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj52ZmlvX3BjaV9yZWxvY2F0ZV9tc2l4PC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDQ3NS4wMyA3LjIxIEwgNDc1LjAzIDcuMjEiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gNDc1LjAzIDcuMjEgTCA0NzUuMDMgNy4yMSBMIDQ3NS4wMyA3LjIxIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDQ5MCAxNyBMIDQ4OS43NCAxNy4xNyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSA0ODkuMDEgMTguNzEgTCA0ODkuOTggMTcuMDIgTCA0ODguMDQgMTcuMjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxyZWN0IHg9IjYzNiIgeT0iNTciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAiIHJ4PSIzIiByeT0iMyIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYxNC41LDU3LjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgcG9pbnRlci1ldmVudHM9ImFsbCIgd2lkdGg9IjI0MiIgaGVpZ2h0PSIxOSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogMjQ0cHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHdvcmQtd3JhcDogbm9ybWFsOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0OyI+cWVtdV9vcGVuKCIvZGV2L3ZmaW8vdmZpbyIpPC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjEyMSIgeT0iMTYiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiPnFlbXVfb3BlbigiL2Rldi92ZmlvL3ZmaW8iKTwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iNjM2IiB5PSIxMDciIHdpZHRoPSIyNDAiIGhlaWdodD0iMjAiIHJ4PSIzIiByeT0iMyIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU4Ny41LDEwNy41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSIzMzYiIGhlaWdodD0iMTkiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7Q29taWMgU2FucyBNUyZxdW90OzsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6IDMzOXB4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB3b3JkLXdyYXA6IG5vcm1hbDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246aW5oZXJpdDsiPmlvY3RswqDCoFZGSU9fR1JPVVBfU0VUX0NPTlRBSU5FUjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIxNjgiIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj5pb2N0bMKgwqBWRklPX0dST1VQX1NFVF9DT05UQUlORVI8L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjYzNiIgeT0iMTU3IiB3aWR0aD0iMTgwIiBoZWlnaHQ9IjIwIiByeD0iMyIgcnk9IjMiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MTMuNSwxNTcuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMjI0IiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAyMjNweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij5pb2N0bMKgwqBWRklPX1NFVF9JT01NVTwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIxMTIiIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj5pb2N0bMKgwqBWRklPX1NFVF9JT01NVTwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iNjM2IiB5PSIyMDciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAiIHJ4PSIzIiByeT0iMyIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU5NC41LDIwNy41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSIyODIiIGhlaWdodD0iMTkiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7Q29taWMgU2FucyBNUyZxdW90OzsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6IDI4NXB4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB3b3JkLXdyYXA6IG5vcm1hbDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246aW5oZXJpdDsiPmlvY3RswqDCoFZGSU9fSU9NTVVfR0VUX0lORk88L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTQxIiB5PSIxNiIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMnB4IiBmb250LWZhbWlseT0iQ29taWMgU2FucyBNUyI+aW9jdGzCoMKgVkZJT19JT01NVV9HRVRfSU5GTzwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSA4MzYgMjY3LjIxIEwgODU4LjE0IDI2Ny4yMSBRIDg2OC4xNCAyNjcuMjEgODc4LjE0IDI2Ny4yMSBMIDg5Ny42MyAyNjcuMjEiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gODkxLjc0IDI3MC43MSBMIDg5OC43NCAyNjcuMjEgTCA4OTEuNzQgMjYzLjcxIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cmVjdCB4PSI2MzYiIHk9IjI1NyIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMCIgcng9IjMiIHJ5PSIzIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjI0LjUsMjU3LjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgcG9pbnRlci1ldmVudHM9ImFsbCIgd2lkdGg9IjIyMiIgaGVpZ2h0PSIxOSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogMjIzcHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHdvcmQtd3JhcDogbm9ybWFsOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0OyI+bWVtb3J5X2xpc3RlbmVyX3JlZ2lzdGVyPC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjExMSIgeT0iMTYiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiPm1lbW9yeV9saXN0ZW5lcl9yZWdpc3RlcjwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSAxMDgwIDI2Ny4yMSBMIDEwOTQuNjkgMjY3LjIxIFEgMTEwNC42OSAyNjcuMjEgMTExNC42OSAyNjcuMjEgTCAxMTI3Ljk3IDI2Ny4yMSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAxMTIyLjA5IDI3MC43MSBMIDExMjkuMDkgMjY3LjIxIEwgMTEyMi4wOSAyNjMuNzEiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxyZWN0IHg9IjkwMCIgeT0iMjU3IiB3aWR0aD0iMTgwIiBoZWlnaHQ9IjIwIiByeD0iMyIgcnk9IjMiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4NzguNSwyNTcuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMjIyIiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAyMjNweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij5tZW1vcnlfbGlzdGVuZXJfcmVnaXN0ZXI8L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTExIiB5PSIxNiIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMnB4IiBmb250LWZhbWlseT0iQ29taWMgU2FucyBNUyI+bWVtb3J5X2xpc3RlbmVyX3JlZ2lzdGVyPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxMTMwIiB5PSIyNTciIHdpZHRoPSIxMTAiIGhlaWdodD0iMjAiIHJ4PSIzIiByeT0iMyIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMjMuNSwyNTcuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMTIzIiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAxMjNweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij52ZmlvX2RtYV9tYXA8L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iNjIiIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj52ZmlvX2RtYV9tYXA8L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjM4MCIgeT0iNDIyIiB3aWR0aD0iMTkwIiBoZWlnaHQ9IjIwIiByeD0iMyIgcnk9IjMiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzOTguNSw0MjIuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiBwb2ludGVyLWV2ZW50cz0iYWxsIiB3aWR0aD0iMTUzIiBoZWlnaHQ9IjE5IiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0NvbWljIFNhbnMgTVMmcXVvdDs7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAxNTRweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd29yZC13cmFwOiBub3JtYWw7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7Ij52ZmlvX3JlZ2lvbl9zZXR1cDwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI3NyIgeT0iMTYiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiPnZmaW9fcmVnaW9uX3NldHVwPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxNzEiIHk9IjYwNyIgd2lkdGg9IjE0OSIgaGVpZ2h0PSIyMCIgcng9IjMiIHJ5PSIzIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTY1LjUsNjA3LjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgcG9pbnRlci1ldmVudHM9ImFsbCIgd2lkdGg9IjE1OSIgaGVpZ2h0PSIxOSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogMTU5cHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHdvcmQtd3JhcDogbm9ybWFsOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0OyI+dmZpb19iYXJzX3ByZXBhcmU8L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iODAiIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj52ZmlvX2JhcnNfcHJlcGFyZTwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iNTgwIiB5PSI3NzguNSIgd2lkdGg9IjIyMCIgaGVpZ2h0PSIyMCIgcng9IjMiIHJ5PSIzIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTMyLjUsNzc4LjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgcG9pbnRlci1ldmVudHM9ImFsbCIgd2lkdGg9IjMxNSIgaGVpZ2h0PSIxOSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtDb21pYyBTYW5zIE1TJnF1b3Q7OyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogMzE1cHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHdvcmQtd3JhcDogbm9ybWFsOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0OyI+bWVtb3J5X3JlZ2lvbl9pbml0X3JhbV9kZXZpY2VfcHRyPC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjE1OCIgeT0iMTYiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTVMiPm1lbW9yeV9yZWdpb25faW5pdF9yYW1fZGV2aWNlX3B0cjwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSA1MjggNzg4LjUgTCA1NzcuNzYgNzg4LjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gNTcxLjg4IDc5MiBMIDU3OC44OCA3ODguNSBMIDU3MS44OCA3ODUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxyZWN0IHg9IjM3OSIgeT0iNzc4LjUiIHdpZHRoPSIxNDkiIGhlaWdodD0iMjAiIHJ4PSIzIiByeT0iMyIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM4MS41LDc3OC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiIHBvaW50ZXItZXZlbnRzPSJhbGwiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTkiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7Q29taWMgU2FucyBNUyZxdW90OzsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6IDE0NXB4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB3b3JkLXdyYXA6IG5vcm1hbDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246aW5oZXJpdDsiPnBjaV9yZWdpc3Rlcl9iYXI8L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iNzIiIHk9IjE2IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEycHgiIGZvbnQtZmFtaWx5PSJDb21pYyBTYW5zIE1TIj5wY2lfcmVnaXN0ZXJfYmFyPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDI0NS4zOCAzODEuNjkgTCAyNDUuMzggNDE5LjQ1IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDI0MS44OCA0MTMuNTcgTCAyNDUuMzggNDIwLjU3IEwgMjQ4Ljg4IDQxMy41NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAyNDUuNDQgNDQyLjExIEwgMjQ1LjM4IDQ4OS4xMSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAyNDEuODkgNDgzLjIyIEwgMjQ1LjM4IDQ5MC4yMyBMIDI0OC44OSA0ODMuMjMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMjQ1LjM4IDUxMS4zNCBMIDI0NS4zOCA1NDkuOCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAyNDEuODggNTQzLjkyIEwgMjQ1LjM4IDU1MC45MiBMIDI0OC44OCA1NDMuOTIiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMjQ1LjM4IDU3Mi4wMyBMIDI0NS40MyA2MDQuNzEiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMjQxLjkyIDU5OC44MyBMIDI0NS40NCA2MDUuODIgTCAyNDguOTIgNTk4LjgyIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDI0NS40NCA2MjYuOTQgTCAyNDUuMDIgNjY0Ljc2IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDI0MS41OSA2NTguODQgTCAyNDUuMDEgNjY1Ljg4IEwgMjQ4LjU5IDY1OC45MiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAyNDUuNDQgNjg3LjQ0IEwgMjQ1LjM4IDczMS44NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAyNDEuODkgNzI1Ljk4IEwgMjQ1LjM4IDczMi45OSBMIDI0OC44OSA3MjUuOTkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMjQ1LjM4IDc1NC4xIEwgMjQ1LjM4IDgyNC45NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAyNDEuODggODE5LjA5IEwgMjQ1LjM4IDgyNi4wOSBMIDI0OC44OCA4MTkuMDkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMjQ1Ljk0IDg0Ny40NCBMIDI0Ni4xNSA4NzYuNiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAyNDIuNjEgODcwLjc0IEwgMjQ2LjE2IDg3Ny43MiBMIDI0OS42MSA4NzAuNjkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gNDc2LjAzIDI3LjA1IEwgNDc2LjAxIDQ3IFEgNDc2IDU3IDQ3NiA1NS44OCBMIDQ3NiA1NC43NiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSA0NzIuNTEgNDguODggTCA0NzYgNTUuODggTCA0NzkuNTEgNDguODkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMjQ0Ljk0IDg5Ni45NCBMIDI0NS4xNSA5MjYuMSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAyNDEuNjEgOTIwLjI0IEwgMjQ1LjE2IDkyNy4yMiBMIDI0OC42MSA5MjAuMTkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMjQ0LjQ0IDk0Ni45NCBMIDI0NC42NSA5NzYuMSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAyNDEuMTEgOTcwLjI0IEwgMjQ0LjY2IDk3Ny4yMiBMIDI0OC4xMSA5NzAuMTkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gNzQwIDc4IEwgNzQwIDEwNC43NiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSA3MzYuNSA5OC44OCBMIDc0MCAxMDUuODggTCA3NDMuNSA5OC44OCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSA3NDAgMTI3IEwgNzQwIDE1My43NiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSA3MzYuNSAxNDcuODggTCA3NDAgMTU0Ljg4IEwgNzQzLjUgMTQ3Ljg4IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDc0MCAxNzcgTCA3NDAgMjAzLjc2IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDczNi41IDE5Ny44OCBMIDc0MCAyMDQuODggTCA3NDMuNSAxOTcuODgiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gNzQwIDIyNyBMIDc0MCAyNTMuNzYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gNzM2LjUgMjQ3Ljg4IEwgNzQwIDI1NC44OCBMIDc0My41IDI0Ny44OCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSA0NTUuMDMgNzU0LjEgTCA0NTUuMDMgNzczLjQxIEwgNDU1LjAzIDc3Mi41NiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSA0NTUuMDMgNzc3LjgxIEwgNDUxLjUzIDc3MC44MSBMIDQ1NS4wMyA3NzIuNTYgTCA0NTguNTMgNzcwLjgxIFoiIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjwvZz48L3N2Zz4="></p>
 
 
 <p id=post-share-links>
 Share on:
 <a href="https://twitter.com/intent/tweet?text=VFIO%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%E7%82%B9%E5%88%86%E6%9E%90&amp;url=https%3A//blog.kernel.love/vfio-insight.html&amp;hashtags=virtualization" target=_blank rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
 ❄ <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//blog.kernel.love/vfio-insight.html" target=_blank rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
 ❄ <a href="mailto:?subject=VFIO%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%E7%82%B9%E5%88%86%E6%9E%90&amp;body=https%3A//blog.kernel.love/vfio-insight.html" target=_blank rel="nofollow noopener noreferrer" title="Share via Email">Email</a>
 
 
 <hr>
<section>
 <h2>Related Posts</h2>
<ul class=related-posts-list>
<li><a href=https://blog.kernel.love/vtd_interrupt_remapping_code_analysis.html title="VT-d Interrupt Remapping代码分析">VT-d Interrupt Remapping代码分析</a></li>
<li><a href=https://blog.kernel.love/vtd-posted-interrupt-code-analysis.html title="VT-d Interrupt Posting代码分析">VT-d Interrupt Posting代码分析</a></li>
<li><a href=https://blog.kernel.love/x86-nmi.html title="Virt NMI Emulation">Virt NMI Emulation</a></li>
<li><a href=https://blog.kernel.love/microVM.html title=轻量级虚拟化技术>轻量级虚拟化技术</a></li>
<li><a href=https://blog.kernel.love/virtio-overview.html title=Virtio协议概述>Virtio协议概述</a></li>
</ul>
<hr>
</section>
 <aside>
 <nav>
 <ul class=articles-timeline>
 <li class=previous-article>« <a href=https://blog.kernel.love/intel_iommu.html title="Previous: Intel IOMMU功能介绍">Intel IOMMU功能介绍</a></li>
 <li class=next-article><a href=https://blog.kernel.love/kernel-debug-using-qemu.html title="Next: 使用gdb和qemu来调试linux内核">使用gdb和qemu来调试linux内核</a> »</li>
 </ul>
 </nav>
 </aside>
 </div>
 <section id=article-sidebar class=span2>
 <h4>Published</h4>
 <time itemprop=dateCreated datetime=2018-05-28T23:00:00+08:00>Mon 28 May 2018</time>
 <h4>Category</h4>
 <a class=category-link href=https://blog.kernel.love/categories.html#virt-ref>virt</a>
 <h4>Tags</h4>
 <ul class="list-of-tags tags-in-article">
 <li><a href=https://blog.kernel.love/tags.html#virtualization-ref>virtualization
 <span class=superscript>12</span>
</a></li>
 </ul>
<h4>Contact</h4>
<div id=sidebar-social-link>
 <a href=https://github.com/fangying title target=_blank rel="nofollow noopener noreferrer">
 <svg xmlns=http://www.w3.org/2000/svg aria-label=GitHub role=img viewBox="0 0 512 512"><rect width=512 height=512 rx=15% fill=#1B1817></rect><path fill=#fff d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"></path></svg>
 </a>
</div>
 
 
 </section>
</div>
</article>
<div class="pswp sf-hidden" tabindex=-1 role=dialog aria-hidden=true>
 
 
 
 
</div> </div>
 <div class=span1></div>
 </div>
 </div>
 </div>
<footer>
 <div>
 <span xmlns:dct=http://purl.org/dc/terms/ property=dct:title> blog.kernel.love"</span> by <a xmlns:cc=http://creativecommons.org/ns# href=https://blog.kernel.love/ property=cc:attributionName rel=cc:attributionURL>Yori Fang</a> is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-sa/3.0/deed.en_US>Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
 </div>
 <div id=fpowered>
 Powered by: <a href=http://getpelican.com/ title="Pelican Home Page" target=_blank rel="nofollow noopener noreferrer">Pelican</a>
 Theme: <a href=https://elegant.oncrashreboot.com/ title="Theme Elegant Home Page" target=_blank rel="nofollow noopener noreferrer">Elegant</a>
 </div>
</footer> 
 
 
 
 
 
 
<div style=all:initial><div style=all:initial id=__hcfy__><template shadowrootmode=open><style class=sf-hidden>#root{-webkit-text-size-adjust:100%;box-sizing:border-box;font-size:14px;font-weight:400;letter-spacing:0;line-height:1.28581;text-transform:none;color:#182026;font-family:-apple-system,"BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Open Sans","Helvetica Neue","Icons16",sans-serif;touch-action:manipulation}#root>.bp5-portal{z-index:9999999999}</style><style class=sf-hidden>#translate-panel{background-color:#f6f7f9;display:flex;flex-direction:column;padding-bottom:8px}.bp5-dark #translate-panel{background-color:#252a31}#translate-panel .fixed{flex-shrink:0;margin-bottom:10px}#translate-panel .body{flex-grow:1;overflow:auto;overscroll-behavior:contain}#translate-panel .body::-webkit-scrollbar{width:8px;background-color:rgba(0,0,0,0);-webkit-border-radius:100px}#translate-panel .body::-webkit-scrollbar:hover{background-color:rgba(0,0,0,.09)}#translate-panel .body::-webkit-scrollbar-thumb:vertical{background:rgba(0,0,0,.5);-webkit-border-radius:100px}#translate-panel .body::-webkit-scrollbar-thumb:vertical:active{background:rgba(0,0,0,.61);-webkit-border-radius:100px}#translate-panel.size-small,#translate-panel.size-small h6.bp5-heading,#translate-panel.size-small .bp5-control.bp5-large,#translate-panel.size-small textarea.bp5-input.bp5-small{font-size:14px}#translate-panel.size-small .phonetic-item,#translate-panel.size-small .quick-settings a{font-size:12px}#translate-panel.size-middle,#translate-panel.size-middle h6.bp5-heading,#translate-panel.size-middle .bp5-control.bp5-large,#translate-panel.size-middle textarea.bp5-input{font-size:18px}#translate-panel.size-middle .phonetic-item,#translate-panel.size-middle .quick-settings a{font-size:14px}#translate-panel.size-large,#translate-panel.size-large h6.bp5-heading,#translate-panel.size-large .bp5-control.bp5-large,#translate-panel.size-large textarea.bp5-input.bp5-large{font-size:22px}#translate-panel.size-large .source,#translate-panel.size-large .phonetic-item,#translate-panel.size-large .quick-settings a{font-size:18px}#translate-panel .bp5-button.bp5-small,#translate-panel .bp5-small .bp5-button{min-height:20px;min-width:20px}#translate-panel .header{display:flex;align-items:center;padding:4px 6px 4px 10px;border-bottom:1px solid #d1d1d1}.bp5-dark #translate-panel .header{border-bottom-color:rgba(17,20,24,.4)}#translate-panel .header .drag-block{min-width:5px;flex-shrink:0;flex-grow:1;align-self:stretch}#translate-panel .header .left{flex-shrink:0;display:flex}#translate-panel .header .right{flex-shrink:0;display:flex;align-items:center}#translate-panel .header .right .bp5-icon-arrow-right{flex-shrink:0;margin:0 5px}#translate-panel .header .right>.bp5-button{flex-shrink:0;margin:0 1px}#translate-panel .header .right>.bp5-button:last-child{margin-right:0}#translate-panel .quick-settings{padding:4px 9px;margin:0 1px}#translate-panel .quick-settings>div{margin-bottom:5px}#translate-panel .quick-settings .bp5-control{margin-bottom:0}#translate-panel .query-text{position:relative;padding:10px 10px 2px 10px}#translate-panel .query-text textarea.bp5-input{min-height:44px;font-family:system-ui,-apple-system,"Segoe UI","Roboto","Ubuntu","Cantarell","Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";overscroll-behavior:contain}#translate-panel .query-text .translate-btn{position:absolute;opacity:.6}#translate-panel .query-text .translate-btn:hover{opacity:1}#translate-panel .body{padding:0 10px}#translate-panel .body .bp5-card:first-child{margin-top:1px}#translate-panel .body .bp5-card:last-child{margin-bottom:1px}#translate-panel .body .no-api{margin:20px 0}.result-block{margin:8px 0;padding:2px 5px}.result-block .bp5-button{visibility:hidden}.result-block .error .bp5-button,.result-block:hover .bp5-button{visibility:visible}.result-block .legend{display:flex;align-items:center;justify-content:space-between}.result-block .legend .legend-left{display:flex;align-items:center}.result-block .legend .api-ico,.result-block .legend .bp5-heading{flex-shrink:0;white-space:nowrap}.result-block .legend .api-ico{display:inline-block;width:14px;height:14px;background-size:contain;margin-right:3px}.result-block .legend .bp5-heading{margin-bottom:0;margin-right:10px}.result-block .legend .source{cursor:pointer;font-size:12px;display:inline-flex;align-items:center}.result-block .legend .source .source-text{overflow:hidden}.result-block .legend .source .bp5-icon{position:relative;top:-1px;margin-left:1px}.result-block .phonetic{display:flex;flex-wrap:wrap}.result-block .phonetic .phonetic-item{display:flex;align-items:center;font-size:12px}.result-block .phonetic .phonetic-item:not(:last-child){margin-right:12px}.result-block .common-result p{line-height:1.3;margin:2px 0;overflow-wrap:break-word}.result-block .common-result .dict a{text-decoration:underline}.result-block .error{font-size:12px;padding:5px 10px}.result-block .dict-pos{margin-right:5px}.external-translators{margin-bottom:3px;padding:0;display:flex;flex-wrap:wrap}.external-translators>div{margin:0 5px 5px 0}.quick-links a{margin:0 5px 5px 0}#popper-container{width:250px;max-width:100%;position:absolute;left:0;top:0;z-index:9999999998;touch-action:none;transition:opacity .2s;background-color:#f6f7f9}.bp5-dark #popper-container{background-color:#252a31}#popper-container.show{opacity:1;pointer-events:auto;-moz-user-select:auto;user-select:auto}#popper-container,#popper-container[data-popper-reference-hidden=true]{opacity:0;pointer-events:none;-moz-user-select:none;user-select:none}#popper-container .drag-block{cursor:-webkit-grab;cursor:grab}#popper-container.pin{position:fixed}#popper-container.pin .arrow{display:none}#popper-container .arrow,#popper-container .arrow::before{position:absolute;width:8px;height:8px;z-index:-1}#popper-container .arrow::before{content:"";transform:rotate(45deg);background:#f6f7f9}.bp5-dark #popper-container .arrow::before{background-color:#252a31}#popper-container .arrow{display:none}#popper-container.show[data-popper-placement]:not([data-popper-reference-hidden=true]) .arrow{display:block}#popper-container[data-popper-placement^=top] .arrow{bottom:-5px}#popper-container[data-popper-placement^=top] .arrow::before{border-right:1px solid #d1d1d1;border-bottom:1px solid #d1d1d1}#popper-container[data-popper-placement^=bottom] .arrow{top:-5px}#popper-container[data-popper-placement^=bottom] .arrow::before{border-left:1px solid #d1d1d1;border-top:1px solid #d1d1d1}#popper-container[data-popper-placement^=left] .arrow{right:-5px}#popper-container[data-popper-placement^=left] .arrow::before{border-right:1px solid #d1d1d1;border-top:1px solid #d1d1d1}#popper-container[data-popper-placement^=right] .arrow{left:-5px}#popper-container[data-popper-placement^=right] .arrow::before{border-left:1px solid #d1d1d1;border-bottom:1px solid #d1d1d1}#translate-btn{display:none;position:absolute;z-index:9999999999;left:0;top:0}#translate-btn .bp5-button{padding:2px;min-width:0;min-height:0}#translate-btn .btn-icon{width:18px;height:18px;background-image:url(moz-extension://19651fe5-a2eb-4315-b2c9-0ae3c022c917/logo.png);background-size:contain}.bp5-dark #translate-btn .btn-icon{background-image:url(moz-extension://19651fe5-a2eb-4315-b2c9-0ae3c022c917/logowhite36.png)}#translate-btn.show{display:block}.translate-type-selector .bp5-label{display:inline}.translate-type-selector .bp5-radio{margin-bottom:0}#ocr-container{position:fixed;z-index:99999999999999;left:0;top:0;right:0;bottom:0}#ocr-container .toolbar{display:none;position:absolute;z-index:1}#ocr-container img{max-width:100%}#app{cursor:default}.switch-pin{flex-shrink:0;cursor:pointer}.switch-pin .bp5-icon-pin{transition:transform .2s,color .2s;transform:rotate(-45deg)}.pin .switch-pin .bp5-icon-pin{transform:rotate(-70deg)}.cut-btn{margin-left:2px}.app-toaster-container{position:fixed!important;z-index:9999999999!important}.app-toaster-container .bp5-toast{min-width:auto}#web-trs-panel .app-toaster-container{padding-right:0;padding-left:0}#web-trs-panel .page-trs-form-group{margin:0 0 0 0;align-items:center}#web-trs-panel .page-trs-form-group>label{width:70px}</style><div id=root dir=ltr><div id=app><div id=translate-btn class=sf-hidden></div><div id=popper-container style=width:290px;transform:translate(0px) class=bp5-elevation-4><div id=translate-panel class=size-small><div class=fixed><div class=header><div class=left><div class=switch-pin><button type=button class="bp5-button bp5-minimal bp5-small"><span aria-hidden=true class="bp5-icon bp5-icon-pin"><svg data-icon=pin height=14 role=img viewBox="0 0 16 16" width=14><path d="M9.41.92c-.51.51-.41 1.5.15 2.56L4.34 7.54C2.8 6.48 1.45 6.05.92 6.58l3.54 3.54-3.54 4.95 4.95-3.54 3.54 3.54c.53-.53.1-1.88-.96-3.42l4.06-5.22c1.06.56 2.04.66 2.55.15L9.41.92z" fill-rule=evenodd></path></svg></span></button></div><button type=button title=图片翻译 class="bp5-button bp5-minimal bp5-small"><span aria-hidden=true class="bp5-icon bp5-icon-media"><svg data-icon=media height=14 role=img viewBox="0 0 16 16" width=14><path d="M11.99 6.99c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm3-5h-14c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-10c0-.55-.45-1-1-1zm-1 9l-5-3-1 2-3-4-3 5v-7h12v7z" fill-rule=evenodd></path></svg></span></button><button type=button title=语音翻译 class="bp5-button bp5-minimal bp5-small"><span class=bp5-icon><svg version=1.1 id=Capa_1 width=14 height=14 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 490.9 490.9" xml:space=preserve><g><g><path d="M245.5,322.9c53,0,96.2-43.2,96.2-96.2V96.2c0-53-43.2-96.2-96.2-96.2s-96.2,43.2-96.2,96.2v130.5 C149.3,279.8,192.5,322.9,245.5,322.9z M173.8,96.2c0-39.5,32.2-71.7,71.7-71.7s71.7,32.2,71.7,71.7v130.5 c0,39.5-32.2,71.7-71.7,71.7s-71.7-32.2-71.7-71.7V96.2z"></path><path d="M94.4,214.5c-6.8,0-12.3,5.5-12.3,12.3c0,85.9,66.7,156.6,151.1,162.8v76.7h-63.9c-6.8,0-12.3,5.5-12.3,12.3 s5.5,12.3,12.3,12.3h152.3c6.8,0,12.3-5.5,12.3-12.3s-5.5-12.3-12.3-12.3h-63.9v-76.7c84.4-6.3,151.1-76.9,151.1-162.8 c0-6.8-5.5-12.3-12.3-12.3s-12.3,5.5-12.3,12.3c0,76.6-62.3,138.9-138.9,138.9s-138.9-62.3-138.9-138.9 C106.6,220,101.2,214.5,94.4,214.5z"></path></g></g></svg></span></button></div><div class=drag-block title=按住不放可以拖动></div><div class=right><button type=button disabled title=添加到收藏夹 class="bp5-button bp5-disabled bp5-minimal bp5-small" tabindex=-1><span aria-hidden=true class="bp5-icon bp5-icon-star-empty"><svg data-icon=star-empty height=14 role=img viewBox="0 0 16 16" width=14><path d="M16 6.11l-5.53-.84L8 0 5.53 5.27 0 6.11l4 4.1L3.06 16 8 13.27 12.94 16 12 10.21l4-4.1zM4.91 13.2l.59-3.62L3 7.02l3.45-.53L8 3.2l1.55 3.29 3.45.53-2.5 2.56.59 3.62L8 11.49 4.91 13.2z" fill-rule=evenodd></path></svg></span></button><button type=button class="bp5-button bp5-minimal bp5-small settings" title=快捷设置><span aria-hidden=true class="bp5-icon bp5-icon-cog"><svg data-icon=cog height=14 role=img viewBox="0 0 16 16" width=14><path d="M15.19 6.39h-1.85c-.11-.37-.27-.71-.45-1.04l1.36-1.36c.31-.31.31-.82 0-1.13l-1.13-1.13a.803.803 0 00-1.13 0l-1.36 1.36c-.33-.17-.67-.33-1.04-.44V.79c0-.44-.36-.8-.8-.8h-1.6c-.44 0-.8.36-.8.8v1.86c-.39.12-.75.28-1.1.47l-1.3-1.3c-.3-.3-.79-.3-1.09 0L1.82 2.91c-.3.3-.3.79 0 1.09l1.3 1.3c-.2.34-.36.7-.48 1.09H.79c-.44 0-.8.36-.8.8v1.6c0 .44.36.8.8.8h1.85c.11.37.27.71.45 1.04l-1.36 1.36c-.31.31-.31.82 0 1.13l1.13 1.13c.31.31.82.31 1.13 0l1.36-1.36c.33.18.67.33 1.04.44v1.86c0 .44.36.8.8.8h1.6c.44 0 .8-.36.8-.8v-1.86c.39-.12.75-.28 1.1-.47l1.3 1.3c.3.3.79.3 1.09 0l1.09-1.09c.3-.3.3-.79 0-1.09l-1.3-1.3c.19-.35.36-.71.48-1.1h1.85c.44 0 .8-.36.8-.8v-1.6a.816.816 0 00-.81-.79zm-7.2 4.6c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z" fill-rule=evenodd></path></svg></span></button><button type=button title=关闭(Esc) class="bp5-button bp5-minimal bp5-small"><span aria-hidden=true class="bp5-icon bp5-icon-cross"><svg data-icon=cross height=18 role=img viewBox="0 0 16 16" width=18><path d="M9.41 8l3.29-3.29c.19-.18.3-.43.3-.71a1.003 1.003 0 00-1.71-.71L8 6.59l-3.29-3.3a1.003 1.003 0 00-1.42 1.42L6.59 8 3.3 11.29c-.19.18-.3.43-.3.71a1.003 1.003 0 001.71.71L8 9.41l3.29 3.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71L9.41 8z" fill-rule=evenodd></path></svg></span></button></div></div><div class=bp5-collapse><div class="bp5-collapse-body sf-hidden" aria-hidden=true></div></div></div><div class=body><p>请输入需要翻译的文本。</p></div></div><div class="arrow sf-hidden"></div></div><div id=web-trs-panel></div></div></div></template></div></div><script data-template-shadow-root>(()=>{document.currentScript.remove();processNode(document);function processNode(node){node.querySelectorAll("template[shadowrootmode]").forEach(element=>{let shadowRoot = element.parentElement.shadowRoot;if (!shadowRoot) {try {shadowRoot=element.parentElement.attachShadow({mode:element.getAttribute("shadowrootmode"),delegatesFocus:element.getAttribute("shadowrootdelegatesfocus")!=null,clonable:element.getAttribute("shadowrootclonable")!=null,serializable:element.getAttribute("shadowrootserializable")!=null});shadowRoot.innerHTML=element.innerHTML;element.remove()} catch (error) {} if (shadowRoot) {processNode(shadowRoot)}}})}})()</script></body><!-- Theme: Elegant built for Pelican
        License : MIT -->