<!-- Filename: 书签工具栏/博客_论坛/个人/开发内功修炼@张彦飞 - 分享我的技术日常思考，和大伙儿一起共同成长！ (2025-04-01 22：04：35).html
 Page saved with X-Webpage-Conserve 
 url: https://terenceli.github.io/%E6%8A%80%E6%9C%AF/2018/08/11/dirty-pages-tracking-in-migration
 Summary: 
-->
<html lang="en"><head>
        <meta charset="utf-8">
        <title>qemu/kvm dirty pages tracking in migration</title>
        <meta name="description" content="dirty page tracking">
        <meta name="author" content="Terenceli">

        <!-- Enable responsive viewport -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <!-- Le styles -->
        <link href="/assets/themes/twitter//bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
        <link href="/assets/themes/twitter//css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
        <script type="text/javascript" async="" src="https://ssl.google-analytics.com/ga.js"></script><script src="/assets/themes/twitter//google-code-prettify/jquery.js"></script>
        <script src="/assets/themes/twitter//google-code-prettify/prettify.js"></script>
        <link href="/assets/themes/twitter//google-code-prettify/sunburst.css" rel="stylesheet" type="text/css" media="all">
        <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Tangerine">
        <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Inconsolata">
        <script type="text/javascript">
            $(function(){
                $("pre").addClass("prettyprint");
                prettyPrint();
            });
        </script>
        <!-- Le fav and touch icons -->
    <!-- Update these with your own images
        <link rel="shortcut icon" href="images/favicon.ico">
        <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

        <!-- atom & rss feed -->
        <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
        <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

    <script type="text/javascript" async="" src="http://terenceli.disqus.com/embed.js"></script><style data-id="immersive-translate-input-injected-css">.immersive-translate-input {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  z-index: 2147483647;
  display: flex;
  justify-content: center;
  align-items: center;
}
.immersive-translate-attach-loading::after {
  content: " ";

  --loading-color: #f78fb6;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  display: block;
  margin: 12px auto;
  position: relative;
  color: white;
  left: -100px;
  box-sizing: border-box;
  animation: immersiveTranslateShadowRolling 1.5s linear infinite;

  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-2000%, -50%);
  z-index: 100;
}

.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}

.immersive-translate-input-loading {
  --loading-color: #f78fb6;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  display: block;
  margin: 12px auto;
  position: relative;
  color: white;
  left: -100px;
  box-sizing: border-box;
  animation: immersiveTranslateShadowRolling 1.5s linear infinite;
}

@keyframes immersiveTranslateShadowRolling {
  0% {
    box-shadow: 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0),
      0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
  }

  12% {
    box-shadow: 100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0),
      0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
  }

  25% {
    box-shadow: 110px 0 var(--loading-color), 100px 0 var(--loading-color),
      0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
  }

  36% {
    box-shadow: 120px 0 var(--loading-color), 110px 0 var(--loading-color),
      100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0);
  }

  50% {
    box-shadow: 130px 0 var(--loading-color), 120px 0 var(--loading-color),
      110px 0 var(--loading-color), 100px 0 var(--loading-color);
  }

  62% {
    box-shadow: 200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color),
      120px 0 var(--loading-color), 110px 0 var(--loading-color);
  }

  75% {
    box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
      130px 0 var(--loading-color), 120px 0 var(--loading-color);
  }

  87% {
    box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
      200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color);
  }

  100% {
    box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
      200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0);
  }
}

.immersive-translate-toast {
  display: flex;
  position: fixed;
  z-index: 2147483647;
  left: 0;
  right: 0;
  top: 1%;
  width: fit-content;
  padding: 12px 20px;
  margin: auto;
  overflow: auto;
  background: #fef6f9;
  box-shadow: 0px 4px 10px 0px rgba(0, 10, 30, 0.06);
  font-size: 15px;
  border-radius: 8px;
  color: #333;
}

.immersive-translate-toast-content {
  display: flex;
  flex-direction: row;
  align-items: center;
}

.immersive-translate-toast-hidden {
  margin: 0 20px 0 72px;
  text-decoration: underline;
  cursor: pointer;
}

.immersive-translate-toast-close {
  color: #666666;
  font-size: 20px;
  font-weight: bold;
  padding: 0 10px;
  cursor: pointer;
}

@media screen and (max-width: 768px) {
  .immersive-translate-toast {
    top: 0;
    padding: 12px 0px 0 10px;
  }
  .immersive-translate-toast-content {
    flex-direction: column;
    text-align: center;
  }
  .immersive-translate-toast-hidden {
    margin: 10px auto;
  }
}

.immersive-translate-modal {
  display: none;
  position: fixed;
  z-index: 2147483647;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgb(0, 0, 0);
  background-color: rgba(0, 0, 0, 0.4);
  font-size: 15px;
}

.immersive-translate-modal-content {
  background-color: #fefefe;
  margin: 10% auto;
  padding: 40px 24px 24px;
  border: 1px solid #888;
  border-radius: 10px;
  width: 80%;
  max-width: 270px;
  font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Ubuntu",
    "Cantarell", "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
    "Segoe UI Symbol", "Noto Color Emoji";
  position: relative;
}

@media screen and (max-width: 768px) {
  .immersive-translate-modal-content {
    margin: 50% auto !important;
  }
}

.immersive-translate-modal .immersive-translate-modal-content-in-input {
  max-width: 500px;
}
.immersive-translate-modal-content-in-input .immersive-translate-modal-body {
  text-align: left;
  max-height: unset;
}

.immersive-translate-modal-title {
  text-align: center;
  font-size: 16px;
  font-weight: 700;
  color: #333333;
}

.immersive-translate-modal-body {
  text-align: center;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  word-break: break-all;
  margin-top: 24px;
}

@media screen and (max-width: 768px) {
  .immersive-translate-modal-body {
    max-height: 250px;
    overflow-y: auto;
  }
}

.immersive-translate-close {
  color: #666666;
  position: absolute;
  right: 16px;
  top: 16px;
  font-size: 20px;
  font-weight: bold;
}

.immersive-translate-close:hover,
.immersive-translate-close:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}

.immersive-translate-modal-footer {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 24px;
}

.immersive-translate-btn {
  width: fit-content;
  color: #fff;
  background-color: #ea4c89;
  border: none;
  font-size: 16px;
  margin: 0 8px;
  padding: 9px 30px;
  border-radius: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.immersive-translate-btn:hover {
  background-color: #f082ac;
}
.immersive-translate-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
.immersive-translate-btn:disabled:hover {
  background-color: #ea4c89;
}

.immersive-translate-cancel-btn {
  /* gray color */
  background-color: rgb(89, 107, 120);
}

.immersive-translate-cancel-btn:hover {
  background-color: hsl(205, 20%, 32%);
}

.immersive-translate-action-btn {
  background-color: transparent;
  color: #ea4c89;
  border: 1px solid #ea4c89;
}

.immersive-translate-btn svg {
  margin-right: 5px;
}

.immersive-translate-link {
  cursor: pointer;
  user-select: none;
  -webkit-user-drag: none;
  text-decoration: none;
  color: #007bff;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
}

.immersive-translate-primary-link {
  cursor: pointer;
  user-select: none;
  -webkit-user-drag: none;
  text-decoration: none;
  color: #ea4c89;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
}

.immersive-translate-modal input[type="radio"] {
  margin: 0 6px;
  cursor: pointer;
}

.immersive-translate-modal label {
  cursor: pointer;
}

.immersive-translate-close-action {
  position: absolute;
  top: 2px;
  right: 0px;
  cursor: pointer;
}

.imt-image-status {
  background-color: rgba(0, 0, 0, 0.5) !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
  border-radius: 16px !important;
}
.imt-image-status img,
.imt-image-status svg,
.imt-img-loading {
  width: 28px !important;
  height: 28px !important;
  margin: 0 0 8px 0 !important;
  min-height: 28px !important;
  min-width: 28px !important;
  position: relative !important;
}
.imt-img-loading {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAAtFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////oK74hAAAAPHRSTlMABBMIDyQXHwyBfFdDMSw+OjXCb+5RG51IvV/k0rOqlGRM6KKMhdvNyZBz9MaupmxpWyj437iYd/yJVNZeuUC7AAACt0lEQVRIx53T2XKiUBCA4QYOiyCbiAsuuGBcYtxiYtT3f6/pbqoYHVFO5r+iivpo6DpAWYpqeoFfr9f90DsYAuRSWkFnPO50OgR9PwiCUFcl2GEcx+N/YBh6pvKaefHlUgZd1zVe0NbYcQjGBfzrPE8Xz8aF+71D8gG6DHFPpc4a7xFiCDuhaWgKgGIJQ3d5IMGDrpS4S5KgpIm+en9f6PlAhKby4JwEIxlYJV9h5k5nee9GoxHJ2IDSNB0dwdad1NAxDJ/uXDHYmebdk4PdbkS58CIVHdYSUHTYYRWOJblWSyu2lmy3KNFVJNBhxcuGW4YBVCbYGRZwIooipHsNqjM4FbgOQqQqSKQQU9V8xmi1QlgHqQQ6DDBvRUVCDirs+EzGDGOQTCATgtYTnbCVLgsVgRE0T1QE0qHCFAht2z6dLvJQs3Lo2FQoDxWNUiBhaP4eRgwNkI+dAjVOA/kUrIDwf3CG8NfNOE0eiFotSuo+rBiq8tD9oY4Qzc6YJw99hl1wzpQvD7ef2M8QgnOGJfJw+EltQc+oX2yn907QB22WZcvlUpd143dqQu+8pCJZuGE4xCuPXJqqcs5sNpsI93Rmzym1k4Npk+oD1SH3/a3LOK/JpUBpWfqNySxWzCfNCUITuDG5dtuphrUJ1myeIE9bIsPiKrfqTai5WZxbhtNphYx6GEIHihyGFTI69lje/rxajdh0s0msZ0zYxyPLhYCb1CyHm9Qsd2H37Y3lugVwL9kNh8Ot8cha6fUNQ8nuXi5z9/ExsAO4zQrb/ev1yrCB7lGyQzgYDGuxq1toDN/JGvN+HyWNHKB7zEoK+PX11e12G431erGYzwmytAWU56fkMHY5JJnDRR2eZji3AwtIcrEV8Cojat/BdQ7XOwGV1e1hDjGGjXbdArm8uJZtCH5MbcctVX8A1WpqumJHwckAAAAASUVORK5CYII=");
  background-size: 28px 28px;
  animation: image-loading-rotate 1s linear infinite !important;
}

.imt-image-status span {
  color: var(--bg-2, #fff) !important;
  font-size: 14px !important;
  line-height: 14px !important;
  font-weight: 500 !important;
  font-family: "PingFang SC", Arial, sans-serif !important;
}

@keyframes image-loading-rotate {
  from {
    transform: rotate(360deg);
  }
  to {
    transform: rotate(0deg);
  }
}
</style><style>.clearfix { }.clearfix::before, .clearfix::after { display: table; content: ""; line-height: 0; }.clearfix::after { clear: both; }.hide-text { font: 0px / 0 a; color: transparent; text-shadow: none; background-color: transparent; border: 0px; }.input-block-level { display: block; width: 100%; min-height: 30px; box-sizing: border-box; }article, aside, details, figcaption, figure, footer, header, hgroup, nav, section { display: block; }audio, canvas, video { display: inline-block; }audio:not([controls]) { display: none; }html { font-size: 100%; }a:focus { outline: rgb(51, 51, 51) dotted thin; outline-offset: -2px; }a:hover, a:active { outline: 0px; }sub, sup { position: relative; font-size: 75%; line-height: 0; vertical-align: baseline; }sup { top: -0.5em; }sub { bottom: -0.25em; }img { max-width: 100%; height: auto; vertical-align: middle; border: 0px; }#map_canvas img, .google-maps img { max-width: none; }button, input, select, textarea { margin: 0px; font-size: 100%; vertical-align: middle; }button, input { line-height: normal; }button::-moz-focus-inner, input::-moz-focus-inner { padding: 0px; border: 0px; }button, html input[type="button"], input[type="reset"], input[type="submit"] { appearance: button; cursor: pointer; }label, select, button, input[type="button"], input[type="reset"], input[type="submit"], input[type="radio"], input[type="checkbox"] { cursor: pointer; }input[type="search"] { box-sizing: content-box; appearance: textfield; }input[type="search"]::-webkit-search-decoration, input[type="search"]::-webkit-search-cancel-button { appearance: none; }textarea { overflow: auto; vertical-align: top; }@media print {
  * { text-shadow: none !important; color: rgb(0, 0, 0) !important; background: transparent !important; box-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]::after { content: " (" attr(href) ")"; }
  abbr[title]::after { content: " (" attr(title) ")"; }
  .ir a::after, a[href^="javascript:"]::after, a[href^="#"]::after { content: ""; }
  pre, blockquote { border: 1px solid rgb(153, 153, 153); break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3 { }
  h2, h3 { break-after: avoid; }
}body { margin: 0px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); }a { color: rgb(0, 136, 204); text-decoration: none; }a:hover { color: rgb(0, 85, 128); text-decoration: underline; }.img-rounded { border-radius: 6px; }.img-polaroid { padding: 4px; background-color: rgb(255, 255, 255); border: 1px solid rgba(0, 0, 0, 0.2); box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 3px; }.img-circle { border-radius: 500px; }.row { margin-left: -20px; }.row::before, .row::after { display: table; content: ""; line-height: 0; }.row::after { clear: both; }[class*="span"] { float: left; min-height: 1px; margin-left: 20px; }.container, .navbar-static-top .container, .navbar-fixed-top .container, .navbar-fixed-bottom .container { width: 940px; }.span12 { width: 940px; }.span11 { width: 860px; }.span10 { width: 780px; }.span9 { width: 700px; }.span8 { width: 620px; }.span7 { width: 540px; }.span6 { width: 460px; }.span5 { width: 380px; }.span4 { width: 300px; }.span3 { width: 220px; }.span2 { width: 140px; }.span1 { width: 60px; }.offset12 { margin-left: 980px; }.offset11 { margin-left: 900px; }.offset10 { margin-left: 820px; }.offset9 { margin-left: 740px; }.offset8 { margin-left: 660px; }.offset7 { margin-left: 580px; }.offset6 { margin-left: 500px; }.offset5 { margin-left: 420px; }.offset4 { margin-left: 340px; }.offset3 { margin-left: 260px; }.offset2 { margin-left: 180px; }.offset1 { margin-left: 100px; }.row-fluid { width: 100%; }.row-fluid::before, .row-fluid::after { display: table; content: ""; line-height: 0; }.row-fluid::after { clear: both; }.row-fluid [class*="span"] { display: block; width: 100%; min-height: 30px; box-sizing: border-box; float: left; margin-left: 2.12766%; }.row-fluid [class*="span"]:first-child { margin-left: 0px; }.row-fluid .controls-row [class*="span"] + [class*="span"] { margin-left: 2.12766%; }.row-fluid .span12 { width: 100%; }.row-fluid .span11 { width: 91.4894%; }.row-fluid .span10 { width: 82.9787%; }.row-fluid .span9 { width: 74.4681%; }.row-fluid .span8 { width: 65.9574%; }.row-fluid .span7 { width: 57.4468%; }.row-fluid .span6 { width: 48.9362%; }.row-fluid .span5 { width: 40.4255%; }.row-fluid .span4 { width: 31.9149%; }.row-fluid .span3 { width: 23.4043%; }.row-fluid .span2 { width: 14.8936%; }.row-fluid .span1 { width: 6.38298%; }.row-fluid .offset12 { margin-left: 104.255%; }.row-fluid .offset12:first-child { margin-left: 102.128%; }.row-fluid .offset11 { margin-left: 95.7447%; }.row-fluid .offset11:first-child { margin-left: 93.617%; }.row-fluid .offset10 { margin-left: 87.2341%; }.row-fluid .offset10:first-child { margin-left: 85.1064%; }.row-fluid .offset9 { margin-left: 78.7234%; }.row-fluid .offset9:first-child { margin-left: 76.5958%; }.row-fluid .offset8 { margin-left: 70.2128%; }.row-fluid .offset8:first-child { margin-left: 68.0851%; }.row-fluid .offset7 { margin-left: 61.7021%; }.row-fluid .offset7:first-child { margin-left: 59.5745%; }.row-fluid .offset6 { margin-left: 53.1915%; }.row-fluid .offset6:first-child { margin-left: 51.0638%; }.row-fluid .offset5 { margin-left: 44.6809%; }.row-fluid .offset5:first-child { margin-left: 42.5532%; }.row-fluid .offset4 { margin-left: 36.1702%; }.row-fluid .offset4:first-child { margin-left: 34.0426%; }.row-fluid .offset3 { margin-left: 27.6596%; }.row-fluid .offset3:first-child { margin-left: 25.5319%; }.row-fluid .offset2 { margin-left: 19.1489%; }.row-fluid .offset2:first-child { margin-left: 17.0213%; }.row-fluid .offset1 { margin-left: 10.6383%; }.row-fluid .offset1:first-child { margin-left: 8.51064%; }[class*="span"].hide, .row-fluid [class*="span"].hide { display: none; }[class*="span"].pull-right, .row-fluid [class*="span"].pull-right { float: right; }.container { margin-right: auto; margin-left: auto; }.container::before, .container::after { display: table; content: ""; line-height: 0; }.container::after { clear: both; }.container-fluid { padding-right: 20px; padding-left: 20px; }.container-fluid::before, .container-fluid::after { display: table; content: ""; line-height: 0; }.container-fluid::after { clear: both; }p { margin: 0px 0px 10px; }.lead { margin-bottom: 20px; font-size: 21px; font-weight: 200; line-height: 30px; }small { font-size: 85%; }strong { font-weight: bold; }em { font-style: italic; }cite { font-style: normal; }.muted { color: rgb(153, 153, 153); }a.muted:hover { color: rgb(128, 128, 128); }.text-warning { color: rgb(192, 152, 83); }a.text-warning:hover { color: rgb(164, 126, 60); }.text-error { color: rgb(185, 74, 72); }a.text-error:hover { color: rgb(149, 59, 57); }.text-info { color: rgb(58, 135, 173); }a.text-info:hover { color: rgb(45, 105, 135); }.text-success { color: rgb(70, 136, 71); }a.text-success:hover { color: rgb(53, 102, 53); }h1, h2, h3, h4, h5, h6 { margin: 10px 0px; font-family: inherit; font-weight: bold; line-height: 20px; color: inherit; text-rendering: optimizelegibility; }h1 small, h2 small, h3 small, h4 small, h5 small, h6 small { font-weight: normal; line-height: 1; color: rgb(153, 153, 153); }h1, h2, h3 { line-height: 40px; }h1 { font-size: 38.5px; }h2 { font-size: 31.5px; }h3 { font-size: 24.5px; }h4 { font-size: 17.5px; }h5 { font-size: 14px; }h6 { font-size: 11.9px; }h1 small { font-size: 24.5px; }h2 small { font-size: 17.5px; }h3 small { font-size: 14px; }h4 small { font-size: 14px; }.page-header { padding-bottom: 9px; margin: 20px 0px 30px; border-bottom: 1px solid rgb(238, 238, 238); }ul, ol { padding: 0px; margin: 0px 0px 10px 25px; }ul ul, ul ol, ol ol, ol ul { margin-bottom: 0px; }li { line-height: 20px; }ul.unstyled, ol.unstyled { margin-left: 0px; list-style: none; }ul.inline, ol.inline { margin-left: 0px; list-style: none; }ul.inline > li, ol.inline > li { display: inline-block; padding-left: 5px; padding-right: 5px; }dl { margin-bottom: 20px; }dt, dd { line-height: 20px; }dt { font-weight: bold; }dd { margin-left: 10px; }.dl-horizontal { }.dl-horizontal::before, .dl-horizontal::after { display: table; content: ""; line-height: 0; }.dl-horizontal::after { clear: both; }.dl-horizontal dt { float: left; width: 160px; clear: left; text-align: right; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }.dl-horizontal dd { margin-left: 180px; }hr { margin: 20px 0px; border-width: 1px 0px; border-style: solid none; border-color: rgb(238, 238, 238) currentcolor rgb(255, 255, 255); border-image: none; }abbr[title], abbr[data-original-title] { cursor: help; border-bottom: 1px dotted rgb(153, 153, 153); }abbr.initialism { font-size: 90%; text-transform: uppercase; }blockquote { padding: 0px 0px 0px 15px; margin: 0px 0px 20px; border-left: 5px solid rgb(238, 238, 238); }blockquote p { margin-bottom: 0px; font-size: 16px; font-weight: 300; line-height: 25px; }blockquote small { display: block; line-height: 20px; color: rgb(153, 153, 153); }blockquote small::before { content: "— "; }blockquote.pull-right { float: right; padding-right: 15px; padding-left: 0px; border-right: 5px solid rgb(238, 238, 238); border-left: 0px; }blockquote.pull-right p, blockquote.pull-right small { text-align: right; }blockquote.pull-right small::before { content: ""; }blockquote.pull-right small::after { content: " —"; }q::before, q::after, blockquote::before, blockquote::after { content: ""; }address { display: block; margin-bottom: 20px; font-style: normal; line-height: 20px; }code, pre { padding: 0px 3px 2px; font-family: Monaco, Menlo, Consolas, "Courier New", monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 3px; }code { padding: 2px 4px; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); white-space: nowrap; }pre { display: block; padding: 9.5px; margin: 0px 0px 10px; font-size: 13px; line-height: 20px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.15); border-radius: 4px; }pre.prettyprint { margin-bottom: 20px; }pre code { padding: 0px; color: inherit; white-space: pre-wrap; background-color: transparent; border: 0px; }.pre-scrollable { max-height: 340px; overflow-y: scroll; }.label, .badge { display: inline-block; padding: 2px 4px; font-size: 11.844px; font-weight: bold; line-height: 14px; color: rgb(255, 255, 255); vertical-align: baseline; white-space: nowrap; text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 0px; background-color: rgb(153, 153, 153); }.label { border-radius: 3px; }.badge { padding-left: 9px; padding-right: 9px; border-radius: 9px; }.label:empty, .badge:empty { display: none; }a.label:hover, a.badge:hover { color: rgb(255, 255, 255); text-decoration: none; cursor: pointer; }.label-important, .badge-important { background-color: rgb(185, 74, 72); }.label-important[href], .badge-important[href] { background-color: rgb(149, 59, 57); }.label-warning, .badge-warning { background-color: rgb(248, 148, 6); }.label-warning[href], .badge-warning[href] { background-color: rgb(198, 118, 5); }.label-success, .badge-success { background-color: rgb(70, 136, 71); }.label-success[href], .badge-success[href] { background-color: rgb(53, 102, 53); }.label-info, .badge-info { background-color: rgb(58, 135, 173); }.label-info[href], .badge-info[href] { background-color: rgb(45, 105, 135); }.label-inverse, .badge-inverse { background-color: rgb(51, 51, 51); }.label-inverse[href], .badge-inverse[href] { background-color: rgb(26, 26, 26); }.btn .label, .btn .badge { position: relative; top: -1px; }.btn-mini .label, .btn-mini .badge { top: 0px; }table { max-width: 100%; background-color: transparent; border-collapse: collapse; border-spacing: 0px; }.table { width: 100%; margin-bottom: 20px; }.table th, .table td { padding: 8px; line-height: 20px; text-align: left; vertical-align: top; border-top: 1px solid rgb(221, 221, 221); }.table th { font-weight: bold; }.table thead th { vertical-align: bottom; }.table caption + thead tr:first-child th, .table caption + thead tr:first-child td, .table colgroup + thead tr:first-child th, .table colgroup + thead tr:first-child td, .table thead:first-child tr:first-child th, .table thead:first-child tr:first-child td { border-top: 0px; }.table tbody + tbody { border-top: 2px solid rgb(221, 221, 221); }.table .table { background-color: rgb(255, 255, 255); }.table-condensed th, .table-condensed td { padding: 4px 5px; }.table-bordered { border-width: 1px 1px 1px 0px; border-style: solid solid solid none; border-color: rgb(221, 221, 221) rgb(221, 221, 221) rgb(221, 221, 221) currentcolor; border-image: none; border-collapse: separate; border-radius: 4px; }.table-bordered th, .table-bordered td { border-left: 1px solid rgb(221, 221, 221); }.table-bordered caption + thead tr:first-child th, .table-bordered caption + tbody tr:first-child th, .table-bordered caption + tbody tr:first-child td, .table-bordered colgroup + thead tr:first-child th, .table-bordered colgroup + tbody tr:first-child th, .table-bordered colgroup + tbody tr:first-child td, .table-bordered thead:first-child tr:first-child th, .table-bordered tbody:first-child tr:first-child th, .table-bordered tbody:first-child tr:first-child td { border-top: 0px; }.table-bordered thead:first-child tr:first-child > th:first-child, .table-bordered tbody:first-child tr:first-child > td:first-child { border-top-left-radius: 4px; }.table-bordered thead:first-child tr:first-child > th:last-child, .table-bordered tbody:first-child tr:first-child > td:last-child { border-top-right-radius: 4px; }.table-bordered thead:last-child tr:last-child > th:first-child, .table-bordered tbody:last-child tr:last-child > td:first-child, .table-bordered tfoot:last-child tr:last-child > td:first-child { border-bottom-left-radius: 4px; }.table-bordered thead:last-child tr:last-child > th:last-child, .table-bordered tbody:last-child tr:last-child > td:last-child, .table-bordered tfoot:last-child tr:last-child > td:last-child { border-bottom-right-radius: 4px; }.table-bordered tfoot + tbody:last-child tr:last-child td:first-child { border-bottom-left-radius: 0px; }.table-bordered tfoot + tbody:last-child tr:last-child td:last-child { border-bottom-right-radius: 0px; }.table-bordered caption + thead tr:first-child th:first-child, .table-bordered caption + tbody tr:first-child td:first-child, .table-bordered colgroup + thead tr:first-child th:first-child, .table-bordered colgroup + tbody tr:first-child td:first-child { border-top-left-radius: 4px; }.table-bordered caption + thead tr:first-child th:last-child, .table-bordered caption + tbody tr:first-child td:last-child, .table-bordered colgroup + thead tr:first-child th:last-child, .table-bordered colgroup + tbody tr:first-child td:last-child { border-top-right-radius: 4px; }.table-striped tbody > tr:nth-child(2n+1) > td, .table-striped tbody > tr:nth-child(2n+1) > th { background-color: rgb(249, 249, 249); }.table-hover tbody tr:hover td, .table-hover tbody tr:hover th { background-color: rgb(245, 245, 245); }table td[class*="span"], table th[class*="span"], .row-fluid table td[class*="span"], .row-fluid table th[class*="span"] { display: table-cell; float: none; margin-left: 0px; }.table td.span1, .table th.span1 { float: none; width: 44px; margin-left: 0px; }.table td.span2, .table th.span2 { float: none; width: 124px; margin-left: 0px; }.table td.span3, .table th.span3 { float: none; width: 204px; margin-left: 0px; }.table td.span4, .table th.span4 { float: none; width: 284px; margin-left: 0px; }.table td.span5, .table th.span5 { float: none; width: 364px; margin-left: 0px; }.table td.span6, .table th.span6 { float: none; width: 444px; margin-left: 0px; }.table td.span7, .table th.span7 { float: none; width: 524px; margin-left: 0px; }.table td.span8, .table th.span8 { float: none; width: 604px; margin-left: 0px; }.table td.span9, .table th.span9 { float: none; width: 684px; margin-left: 0px; }.table td.span10, .table th.span10 { float: none; width: 764px; margin-left: 0px; }.table td.span11, .table th.span11 { float: none; width: 844px; margin-left: 0px; }.table td.span12, .table th.span12 { float: none; width: 924px; margin-left: 0px; }.table tbody tr.success td { background-color: rgb(223, 240, 216); }.table tbody tr.error td { background-color: rgb(242, 222, 222); }.table tbody tr.warning td { background-color: rgb(252, 248, 227); }.table tbody tr.info td { background-color: rgb(217, 237, 247); }.table-hover tbody tr.success:hover td { background-color: rgb(208, 233, 198); }.table-hover tbody tr.error:hover td { background-color: rgb(235, 204, 204); }.table-hover tbody tr.warning:hover td { background-color: rgb(250, 242, 204); }.table-hover tbody tr.info:hover td { background-color: rgb(196, 227, 243); }form { margin: 0px 0px 20px; }fieldset { padding: 0px; margin: 0px; border: 0px; }legend { display: block; width: 100%; padding: 0px; margin-bottom: 20px; font-size: 21px; line-height: 40px; color: rgb(51, 51, 51); border-width: 0px 0px 1px; border-style: none none solid; border-color: currentcolor currentcolor rgb(229, 229, 229); border-image: none; }legend small { font-size: 15px; color: rgb(153, 153, 153); }label, input, button, select, textarea { font-size: 14px; font-weight: normal; line-height: 20px; }input, button, select, textarea { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; }label { display: block; margin-bottom: 5px; }select, textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input { display: inline-block; height: 20px; padding: 4px 6px; margin-bottom: 10px; font-size: 14px; line-height: 20px; color: rgb(85, 85, 85); border-radius: 4px; vertical-align: middle; }input, textarea, .uneditable-input { width: 206px; }textarea { height: auto; }textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input { background-color: rgb(255, 255, 255); border: 1px solid rgb(204, 204, 204); box-shadow: rgba(0, 0, 0, 0.075) 0px 1px 1px inset; transition: border 0.2s linear, box-shadow 0.2s linear; }textarea:focus, input[type="text"]:focus, input[type="password"]:focus, input[type="datetime"]:focus, input[type="datetime-local"]:focus, input[type="date"]:focus, input[type="month"]:focus, input[type="time"]:focus, input[type="week"]:focus, input[type="number"]:focus, input[type="email"]:focus, input[type="url"]:focus, input[type="search"]:focus, input[type="tel"]:focus, input[type="color"]:focus, .uneditable-input:focus { border-color: rgba(82, 168, 236, 0.8); outline: 0px; box-shadow: rgba(0, 0, 0, 0.075) 0px 1px 1px inset, rgba(82, 168, 236, 0.6) 0px 0px 8px; }input[type="radio"], input[type="checkbox"] { margin: 4px 0px 0px; line-height: normal; }input[type="file"], input[type="image"], input[type="submit"], input[type="reset"], input[type="button"], input[type="radio"], input[type="checkbox"] { width: auto; }select, input[type="file"] { height: 30px; line-height: 30px; }select { width: 220px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); }select[multiple], select[size] { height: auto; }select:focus, input[type="file"]:focus, input[type="radio"]:focus, input[type="checkbox"]:focus { outline: rgb(51, 51, 51) dotted thin; outline-offset: -2px; }.uneditable-input, .uneditable-textarea { color: rgb(153, 153, 153); background-color: rgb(252, 252, 252); border-color: rgb(204, 204, 204); box-shadow: rgba(0, 0, 0, 0.025) 0px 1px 2px inset; cursor: not-allowed; }.uneditable-input { overflow: hidden; white-space: nowrap; }.uneditable-textarea { width: auto; height: auto; }input:-moz-placeholder, textarea:-moz-placeholder { color: rgb(153, 153, 153); }input::-webkit-input-placeholder, textarea::-webkit-input-placeholder { color: rgb(153, 153, 153); }.radio, .checkbox { min-height: 20px; padding-left: 20px; }.radio input[type="radio"], .checkbox input[type="checkbox"] { float: left; margin-left: -20px; }.controls > .radio:first-child, .controls > .checkbox:first-child { padding-top: 5px; }.radio.inline, .checkbox.inline { display: inline-block; padding-top: 5px; margin-bottom: 0px; vertical-align: middle; }.radio.inline + .radio.inline, .checkbox.inline + .checkbox.inline { margin-left: 10px; }.input-mini { width: 60px; }.input-small { width: 90px; }.input-medium { width: 150px; }.input-large { width: 210px; }.input-xlarge { width: 270px; }.input-xxlarge { width: 530px; }input[class*="span"], select[class*="span"], textarea[class*="span"], .uneditable-input[class*="span"], .row-fluid input[class*="span"], .row-fluid select[class*="span"], .row-fluid textarea[class*="span"], .row-fluid .uneditable-input[class*="span"] { float: none; margin-left: 0px; }.input-append input[class*="span"], .input-append .uneditable-input[class*="span"], .input-prepend input[class*="span"], .input-prepend .uneditable-input[class*="span"], .row-fluid input[class*="span"], .row-fluid select[class*="span"], .row-fluid textarea[class*="span"], .row-fluid .uneditable-input[class*="span"], .row-fluid .input-prepend [class*="span"], .row-fluid .input-append [class*="span"] { display: inline-block; }input, textarea, .uneditable-input { margin-left: 0px; }.controls-row [class*="span"] + [class*="span"] { margin-left: 20px; }input.span12, textarea.span12, .uneditable-input.span12 { width: 926px; }input.span11, textarea.span11, .uneditable-input.span11 { width: 846px; }input.span10, textarea.span10, .uneditable-input.span10 { width: 766px; }input.span9, textarea.span9, .uneditable-input.span9 { width: 686px; }input.span8, textarea.span8, .uneditable-input.span8 { width: 606px; }input.span7, textarea.span7, .uneditable-input.span7 { width: 526px; }input.span6, textarea.span6, .uneditable-input.span6 { width: 446px; }input.span5, textarea.span5, .uneditable-input.span5 { width: 366px; }input.span4, textarea.span4, .uneditable-input.span4 { width: 286px; }input.span3, textarea.span3, .uneditable-input.span3 { width: 206px; }input.span2, textarea.span2, .uneditable-input.span2 { width: 126px; }input.span1, textarea.span1, .uneditable-input.span1 { width: 46px; }.controls-row { }.controls-row::before, .controls-row::after { display: table; content: ""; line-height: 0; }.controls-row::after { clear: both; }.controls-row [class*="span"], .row-fluid .controls-row [class*="span"] { float: left; }.controls-row .checkbox[class*="span"], .controls-row .radio[class*="span"] { padding-top: 5px; }input[disabled], select[disabled], textarea[disabled], input[readonly], select[readonly], textarea[readonly] { cursor: not-allowed; background-color: rgb(238, 238, 238); }input[type="radio"][disabled], input[type="checkbox"][disabled], input[type="radio"][readonly], input[type="checkbox"][readonly] { background-color: transparent; }.control-group.warning .control-label, .control-group.warning .help-block, .control-group.warning .help-inline { color: rgb(192, 152, 83); }.control-group.warning .checkbox, .control-group.warning .radio, .control-group.warning input, .control-group.warning select, .control-group.warning textarea { color: rgb(192, 152, 83); }.control-group.warning input, .control-group.warning select, .control-group.warning textarea { border-color: rgb(192, 152, 83); box-shadow: rgba(0, 0, 0, 0.075) 0px 1px 1px inset; }.control-group.warning input:focus, .control-group.warning select:focus, .control-group.warning textarea:focus { border-color: rgb(164, 126, 60); box-shadow: rgba(0, 0, 0, 0.075) 0px 1px 1px inset, rgb(219, 197, 158) 0px 0px 6px; }.control-group.warning .input-prepend .add-on, .control-group.warning .input-append .add-on { color: rgb(192, 152, 83); background-color: rgb(252, 248, 227); border-color: rgb(192, 152, 83); }.control-group.error .control-label, .control-group.error .help-block, .control-group.error .help-inline { color: rgb(185, 74, 72); }.control-group.error .checkbox, .control-group.error .radio, .control-group.error input, .control-group.error select, .control-group.error textarea { color: rgb(185, 74, 72); }.control-group.error input, .control-group.error select, .control-group.error textarea { border-color: rgb(185, 74, 72); box-shadow: rgba(0, 0, 0, 0.075) 0px 1px 1px inset; }.control-group.error input:focus, .control-group.error select:focus, .control-group.error textarea:focus { border-color: rgb(149, 59, 57); box-shadow: rgba(0, 0, 0, 0.075) 0px 1px 1px inset, rgb(213, 147, 146) 0px 0px 6px; }.control-group.error .input-prepend .add-on, .control-group.error .input-append .add-on { color: rgb(185, 74, 72); background-color: rgb(242, 222, 222); border-color: rgb(185, 74, 72); }.control-group.success .control-label, .control-group.success .help-block, .control-group.success .help-inline { color: rgb(70, 136, 71); }.control-group.success .checkbox, .control-group.success .radio, .control-group.success input, .control-group.success select, .control-group.success textarea { color: rgb(70, 136, 71); }.control-group.success input, .control-group.success select, .control-group.success textarea { border-color: rgb(70, 136, 71); box-shadow: rgba(0, 0, 0, 0.075) 0px 1px 1px inset; }.control-group.success input:focus, .control-group.success select:focus, .control-group.success textarea:focus { border-color: rgb(53, 102, 53); box-shadow: rgba(0, 0, 0, 0.075) 0px 1px 1px inset, rgb(122, 186, 123) 0px 0px 6px; }.control-group.success .input-prepend .add-on, .control-group.success .input-append .add-on { color: rgb(70, 136, 71); background-color: rgb(223, 240, 216); border-color: rgb(70, 136, 71); }.control-group.info .control-label, .control-group.info .help-block, .control-group.info .help-inline { color: rgb(58, 135, 173); }.control-group.info .checkbox, .control-group.info .radio, .control-group.info input, .control-group.info select, .control-group.info textarea { color: rgb(58, 135, 173); }.control-group.info input, .control-group.info select, .control-group.info textarea { border-color: rgb(58, 135, 173); box-shadow: rgba(0, 0, 0, 0.075) 0px 1px 1px inset; }.control-group.info input:focus, .control-group.info select:focus, .control-group.info textarea:focus { border-color: rgb(45, 105, 135); box-shadow: rgba(0, 0, 0, 0.075) 0px 1px 1px inset, rgb(122, 181, 211) 0px 0px 6px; }.control-group.info .input-prepend .add-on, .control-group.info .input-append .add-on { color: rgb(58, 135, 173); background-color: rgb(217, 237, 247); border-color: rgb(58, 135, 173); }input:focus:invalid, textarea:focus:invalid, select:focus:invalid { color: rgb(185, 74, 72); border-color: rgb(238, 95, 91); }input:focus:invalid:focus, textarea:focus:invalid:focus, select:focus:invalid:focus { border-color: rgb(233, 50, 45); box-shadow: rgb(248, 185, 183) 0px 0px 6px; }.form-actions { padding: 19px 20px 20px; margin-top: 20px; margin-bottom: 20px; background-color: rgb(245, 245, 245); border-top: 1px solid rgb(229, 229, 229); }.form-actions::before, .form-actions::after { display: table; content: ""; line-height: 0; }.form-actions::after { clear: both; }.help-block, .help-inline { color: rgb(89, 89, 89); }.help-block { display: block; margin-bottom: 10px; }.help-inline { display: inline-block; vertical-align: middle; padding-left: 5px; }.input-append, .input-prepend { margin-bottom: 5px; font-size: 0px; white-space: nowrap; }.input-append input, .input-prepend input, .input-append select, .input-prepend select, .input-append .uneditable-input, .input-prepend .uneditable-input, .input-append .dropdown-menu, .input-prepend .dropdown-menu { font-size: 14px; }.input-append input, .input-prepend input, .input-append select, .input-prepend select, .input-append .uneditable-input, .input-prepend .uneditable-input { position: relative; margin-bottom: 0px; vertical-align: top; border-radius: 0px 4px 4px 0px; }.input-append input:focus, .input-prepend input:focus, .input-append select:focus, .input-prepend select:focus, .input-append .uneditable-input:focus, .input-prepend .uneditable-input:focus { z-index: 2; }.input-append .add-on, .input-prepend .add-on { display: inline-block; width: auto; height: 20px; min-width: 16px; padding: 4px 5px; font-size: 14px; font-weight: normal; line-height: 20px; text-align: center; text-shadow: rgb(255, 255, 255) 0px 1px 0px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); }.input-append .add-on, .input-prepend .add-on, .input-append .btn, .input-prepend .btn, .input-append .btn-group > .dropdown-toggle, .input-prepend .btn-group > .dropdown-toggle { vertical-align: top; border-radius: 0px; }.input-append .active, .input-prepend .active { background-color: rgb(169, 219, 169); border-color: rgb(70, 165, 70); }.input-prepend .add-on, .input-prepend .btn { margin-right: -1px; }.input-prepend .add-on:first-child, .input-prepend .btn:first-child { border-radius: 4px 0px 0px 4px; }.input-append input, .input-append select, .input-append .uneditable-input { border-radius: 4px 0px 0px 4px; }.input-append input + .btn-group .btn:last-child, .input-append select + .btn-group .btn:last-child, .input-append .uneditable-input + .btn-group .btn:last-child { border-radius: 0px 4px 4px 0px; }.input-append .add-on, .input-append .btn, .input-append .btn-group { margin-left: -1px; }.input-append .add-on:last-child, .input-append .btn:last-child, .input-append .btn-group:last-child > .dropdown-toggle { border-radius: 0px 4px 4px 0px; }.input-prepend.input-append input, .input-prepend.input-append select, .input-prepend.input-append .uneditable-input { border-radius: 0px; }.input-prepend.input-append input + .btn-group .btn, .input-prepend.input-append select + .btn-group .btn, .input-prepend.input-append .uneditable-input + .btn-group .btn { border-radius: 0px 4px 4px 0px; }.input-prepend.input-append .add-on:first-child, .input-prepend.input-append .btn:first-child { margin-right: -1px; border-radius: 4px 0px 0px 4px; }.input-prepend.input-append .add-on:last-child, .input-prepend.input-append .btn:last-child { margin-left: -1px; border-radius: 0px 4px 4px 0px; }.input-prepend.input-append .btn-group:first-child { margin-left: 0px; }input.search-query { padding-right: 14px; padding-left: 14px; margin-bottom: 0px; border-radius: 15px; }.form-search .input-append .search-query, .form-search .input-prepend .search-query { border-radius: 0px; }.form-search .input-append .search-query { border-radius: 14px 0px 0px 14px; }.form-search .input-append .btn { border-radius: 0px 14px 14px 0px; }.form-search .input-prepend .search-query { border-radius: 0px 14px 14px 0px; }.form-search .input-prepend .btn { border-radius: 14px 0px 0px 14px; }.form-search input, .form-inline input, .form-horizontal input, .form-search textarea, .form-inline textarea, .form-horizontal textarea, .form-search select, .form-inline select, .form-horizontal select, .form-search .help-inline, .form-inline .help-inline, .form-horizontal .help-inline, .form-search .uneditable-input, .form-inline .uneditable-input, .form-horizontal .uneditable-input, .form-search .input-prepend, .form-inline .input-prepend, .form-horizontal .input-prepend, .form-search .input-append, .form-inline .input-append, .form-horizontal .input-append { display: inline-block; margin-bottom: 0px; vertical-align: middle; }.form-search .hide, .form-inline .hide, .form-horizontal .hide { display: none; }.form-search label, .form-inline label, .form-search .btn-group, .form-inline .btn-group { display: inline-block; }.form-search .input-append, .form-inline .input-append, .form-search .input-prepend, .form-inline .input-prepend { margin-bottom: 0px; }.form-search .radio, .form-search .checkbox, .form-inline .radio, .form-inline .checkbox { padding-left: 0px; margin-bottom: 0px; vertical-align: middle; }.form-search .radio input[type="radio"], .form-search .checkbox input[type="checkbox"], .form-inline .radio input[type="radio"], .form-inline .checkbox input[type="checkbox"] { float: left; margin-right: 3px; margin-left: 0px; }.control-group { margin-bottom: 10px; }legend + .control-group { margin-top: 20px; }.form-horizontal .control-group { margin-bottom: 20px; }.form-horizontal .control-group::before, .form-horizontal .control-group::after { display: table; content: ""; line-height: 0; }.form-horizontal .control-group::after { clear: both; }.form-horizontal .control-label { float: left; width: 160px; padding-top: 5px; text-align: right; }.form-horizontal .controls { margin-left: 180px; }.form-horizontal .controls:first-child { }.form-horizontal .help-block { margin-bottom: 0px; }.form-horizontal input + .help-block, .form-horizontal select + .help-block, .form-horizontal textarea + .help-block, .form-horizontal .uneditable-input + .help-block, .form-horizontal .input-prepend + .help-block, .form-horizontal .input-append + .help-block { margin-top: 10px; }.form-horizontal .form-actions { padding-left: 180px; }.btn { display: inline-block; padding: 4px 12px; margin-bottom: 0px; font-size: 14px; line-height: 20px; text-align: center; vertical-align: middle; cursor: pointer; color: rgb(51, 51, 51); text-shadow: rgba(255, 255, 255, 0.75) 0px 1px 1px; background-color: rgb(245, 245, 245); background-image: linear-gradient(rgb(255, 255, 255), rgb(230, 230, 230)); background-repeat: repeat-x; border-width: 1px; border-style: solid; border-color: rgb(187, 187, 187) rgb(187, 187, 187) rgb(162, 162, 162); border-image: none; border-radius: 4px; box-shadow: rgba(255, 255, 255, 0.2) 0px 1px 0px inset, rgba(0, 0, 0, 0.05) 0px 1px 2px; }.btn:hover, .btn:active, .btn.active, .btn.disabled, .btn[disabled] { color: rgb(51, 51, 51); background-color: rgb(230, 230, 230); }.btn:active, .btn.active { }.btn:first-child { }.btn:hover { color: rgb(51, 51, 51); text-decoration: none; background-position: 0px -15px; transition: background-position 0.1s linear; }.btn:focus { outline: rgb(51, 51, 51) dotted thin; outline-offset: -2px; }.btn.active, .btn:active { background-image: none; outline: 0px; box-shadow: rgba(0, 0, 0, 0.15) 0px 2px 4px inset, rgba(0, 0, 0, 0.05) 0px 1px 2px; }.btn.disabled, .btn[disabled] { cursor: default; background-image: none; opacity: 0.65; box-shadow: none; }.btn-large { padding: 11px 19px; font-size: 17.5px; border-radius: 6px; }.btn-large [class^="icon-"], .btn-large [class*=" icon-"] { margin-top: 4px; }.btn-small { padding: 2px 10px; font-size: 11.9px; border-radius: 3px; }.btn-small [class^="icon-"], .btn-small [class*=" icon-"] { margin-top: 0px; }.btn-mini [class^="icon-"], .btn-mini [class*=" icon-"] { margin-top: -1px; }.btn-mini { padding: 0px 6px; font-size: 10.5px; border-radius: 3px; }.btn-block { display: block; width: 100%; padding-left: 0px; padding-right: 0px; box-sizing: border-box; }.btn-block + .btn-block { margin-top: 5px; }input[type="submit"].btn-block, input[type="reset"].btn-block, input[type="button"].btn-block { width: 100%; }.btn-primary.active, .btn-warning.active, .btn-danger.active, .btn-success.active, .btn-info.active, .btn-inverse.active { color: rgba(255, 255, 255, 0.75); }.btn { border-color: rgba(0, 0, 0, 0.15) rgba(0, 0, 0, 0.15) rgba(0, 0, 0, 0.25); }.btn-primary { color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 0px; background-color: rgb(0, 109, 204); background-image: linear-gradient(rgb(0, 136, 204), rgb(0, 68, 204)); background-repeat: repeat-x; border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25); }.btn-primary:hover, .btn-primary:active, .btn-primary.active, .btn-primary.disabled, .btn-primary[disabled] { color: rgb(255, 255, 255); background-color: rgb(0, 68, 204); }.btn-primary:active, .btn-primary.active { }.btn-warning { color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 0px; background-color: rgb(250, 167, 50); background-image: linear-gradient(rgb(251, 180, 80), rgb(248, 148, 6)); background-repeat: repeat-x; border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25); }.btn-warning:hover, .btn-warning:active, .btn-warning.active, .btn-warning.disabled, .btn-warning[disabled] { color: rgb(255, 255, 255); background-color: rgb(248, 148, 6); }.btn-warning:active, .btn-warning.active { }.btn-danger { color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 0px; background-color: rgb(218, 79, 73); background-image: linear-gradient(rgb(238, 95, 91), rgb(189, 54, 47)); background-repeat: repeat-x; border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25); }.btn-danger:hover, .btn-danger:active, .btn-danger.active, .btn-danger.disabled, .btn-danger[disabled] { color: rgb(255, 255, 255); background-color: rgb(189, 54, 47); }.btn-danger:active, .btn-danger.active { }.btn-success { color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 0px; background-color: rgb(91, 183, 91); background-image: linear-gradient(rgb(98, 196, 98), rgb(81, 163, 81)); background-repeat: repeat-x; border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25); }.btn-success:hover, .btn-success:active, .btn-success.active, .btn-success.disabled, .btn-success[disabled] { color: rgb(255, 255, 255); background-color: rgb(81, 163, 81); }.btn-success:active, .btn-success.active { }.btn-info { color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 0px; background-color: rgb(73, 175, 205); background-image: linear-gradient(rgb(91, 192, 222), rgb(47, 150, 180)); background-repeat: repeat-x; border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25); }.btn-info:hover, .btn-info:active, .btn-info.active, .btn-info.disabled, .btn-info[disabled] { color: rgb(255, 255, 255); background-color: rgb(47, 150, 180); }.btn-info:active, .btn-info.active { }.btn-inverse { color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 0px; background-color: rgb(54, 54, 54); background-image: linear-gradient(rgb(68, 68, 68), rgb(34, 34, 34)); background-repeat: repeat-x; border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25); }.btn-inverse:hover, .btn-inverse:active, .btn-inverse.active, .btn-inverse.disabled, .btn-inverse[disabled] { color: rgb(255, 255, 255); background-color: rgb(34, 34, 34); }.btn-inverse:active, .btn-inverse.active { }button.btn, input[type="submit"].btn { }button.btn::-moz-focus-inner, input[type="submit"].btn::-moz-focus-inner { padding: 0px; border: 0px; }button.btn.btn-large, input[type="submit"].btn.btn-large { }button.btn.btn-small, input[type="submit"].btn.btn-small { }button.btn.btn-mini, input[type="submit"].btn.btn-mini { }.btn-link, .btn-link:active, .btn-link[disabled] { background-color: transparent; background-image: none; box-shadow: none; }.btn-link { border-color: transparent; cursor: pointer; color: rgb(0, 136, 204); border-radius: 0px; }.btn-link:hover { color: rgb(0, 85, 128); text-decoration: underline; background-color: transparent; }.btn-link[disabled]:hover { color: rgb(51, 51, 51); text-decoration: none; }[class^="icon-"], [class*=" icon-"] { display: inline-block; width: 14px; height: 14px; line-height: 14px; vertical-align: text-top; background-image: url("../img/glyphicons-halflings.png"); background-position: 14px 14px; background-repeat: no-repeat; margin-top: 1px; }.icon-white, .nav-pills > .active > a > [class^="icon-"], .nav-pills > .active > a > [class*=" icon-"], .nav-list > .active > a > [class^="icon-"], .nav-list > .active > a > [class*=" icon-"], .navbar-inverse .nav > .active > a > [class^="icon-"], .navbar-inverse .nav > .active > a > [class*=" icon-"], .dropdown-menu > li > a:hover > [class^="icon-"], .dropdown-menu > li > a:hover > [class*=" icon-"], .dropdown-menu > .active > a > [class^="icon-"], .dropdown-menu > .active > a > [class*=" icon-"], .dropdown-submenu:hover > a > [class^="icon-"], .dropdown-submenu:hover > a > [class*=" icon-"] { background-image: url("../img/glyphicons-halflings-white.png"); }.icon-glass { background-position: 0px 0px; }.icon-music { background-position: -24px 0px; }.icon-search { background-position: -48px 0px; }.icon-envelope { background-position: -72px 0px; }.icon-heart { background-position: -96px 0px; }.icon-star { background-position: -120px 0px; }.icon-star-empty { background-position: -144px 0px; }.icon-user { background-position: -168px 0px; }.icon-film { background-position: -192px 0px; }.icon-th-large { background-position: -216px 0px; }.icon-th { background-position: -240px 0px; }.icon-th-list { background-position: -264px 0px; }.icon-ok { background-position: -288px 0px; }.icon-remove { background-position: -312px 0px; }.icon-zoom-in { background-position: -336px 0px; }.icon-zoom-out { background-position: -360px 0px; }.icon-off { background-position: -384px 0px; }.icon-signal { background-position: -408px 0px; }.icon-cog { background-position: -432px 0px; }.icon-trash { background-position: -456px 0px; }.icon-home { background-position: 0px -24px; }.icon-file { background-position: -24px -24px; }.icon-time { background-position: -48px -24px; }.icon-road { background-position: -72px -24px; }.icon-download-alt { background-position: -96px -24px; }.icon-download { background-position: -120px -24px; }.icon-upload { background-position: -144px -24px; }.icon-inbox { background-position: -168px -24px; }.icon-play-circle { background-position: -192px -24px; }.icon-repeat { background-position: -216px -24px; }.icon-refresh { background-position: -240px -24px; }.icon-list-alt { background-position: -264px -24px; }.icon-lock { background-position: -287px -24px; }.icon-flag { background-position: -312px -24px; }.icon-headphones { background-position: -336px -24px; }.icon-volume-off { background-position: -360px -24px; }.icon-volume-down { background-position: -384px -24px; }.icon-volume-up { background-position: -408px -24px; }.icon-qrcode { background-position: -432px -24px; }.icon-barcode { background-position: -456px -24px; }.icon-tag { background-position: 0px -48px; }.icon-tags { background-position: -25px -48px; }.icon-book { background-position: -48px -48px; }.icon-bookmark { background-position: -72px -48px; }.icon-print { background-position: -96px -48px; }.icon-camera { background-position: -120px -48px; }.icon-font { background-position: -144px -48px; }.icon-bold { background-position: -167px -48px; }.icon-italic { background-position: -192px -48px; }.icon-text-height { background-position: -216px -48px; }.icon-text-width { background-position: -240px -48px; }.icon-align-left { background-position: -264px -48px; }.icon-align-center { background-position: -288px -48px; }.icon-align-right { background-position: -312px -48px; }.icon-align-justify { background-position: -336px -48px; }.icon-list { background-position: -360px -48px; }.icon-indent-left { background-position: -384px -48px; }.icon-indent-right { background-position: -408px -48px; }.icon-facetime-video { background-position: -432px -48px; }.icon-picture { background-position: -456px -48px; }.icon-pencil { background-position: 0px -72px; }.icon-map-marker { background-position: -24px -72px; }.icon-adjust { background-position: -48px -72px; }.icon-tint { background-position: -72px -72px; }.icon-edit { background-position: -96px -72px; }.icon-share { background-position: -120px -72px; }.icon-check { background-position: -144px -72px; }.icon-move { background-position: -168px -72px; }.icon-step-backward { background-position: -192px -72px; }.icon-fast-backward { background-position: -216px -72px; }.icon-backward { background-position: -240px -72px; }.icon-play { background-position: -264px -72px; }.icon-pause { background-position: -288px -72px; }.icon-stop { background-position: -312px -72px; }.icon-forward { background-position: -336px -72px; }.icon-fast-forward { background-position: -360px -72px; }.icon-step-forward { background-position: -384px -72px; }.icon-eject { background-position: -408px -72px; }.icon-chevron-left { background-position: -432px -72px; }.icon-chevron-right { background-position: -456px -72px; }.icon-plus-sign { background-position: 0px -96px; }.icon-minus-sign { background-position: -24px -96px; }.icon-remove-sign { background-position: -48px -96px; }.icon-ok-sign { background-position: -72px -96px; }.icon-question-sign { background-position: -96px -96px; }.icon-info-sign { background-position: -120px -96px; }.icon-screenshot { background-position: -144px -96px; }.icon-remove-circle { background-position: -168px -96px; }.icon-ok-circle { background-position: -192px -96px; }.icon-ban-circle { background-position: -216px -96px; }.icon-arrow-left { background-position: -240px -96px; }.icon-arrow-right { background-position: -264px -96px; }.icon-arrow-up { background-position: -289px -96px; }.icon-arrow-down { background-position: -312px -96px; }.icon-share-alt { background-position: -336px -96px; }.icon-resize-full { background-position: -360px -96px; }.icon-resize-small { background-position: -384px -96px; }.icon-plus { background-position: -408px -96px; }.icon-minus { background-position: -433px -96px; }.icon-asterisk { background-position: -456px -96px; }.icon-exclamation-sign { background-position: 0px -120px; }.icon-gift { background-position: -24px -120px; }.icon-leaf { background-position: -48px -120px; }.icon-fire { background-position: -72px -120px; }.icon-eye-open { background-position: -96px -120px; }.icon-eye-close { background-position: -120px -120px; }.icon-warning-sign { background-position: -144px -120px; }.icon-plane { background-position: -168px -120px; }.icon-calendar { background-position: -192px -120px; }.icon-random { background-position: -216px -120px; width: 16px; }.icon-comment { background-position: -240px -120px; }.icon-magnet { background-position: -264px -120px; }.icon-chevron-up { background-position: -288px -120px; }.icon-chevron-down { background-position: -313px -119px; }.icon-retweet { background-position: -336px -120px; }.icon-shopping-cart { background-position: -360px -120px; }.icon-folder-close { background-position: -384px -120px; }.icon-folder-open { background-position: -408px -120px; width: 16px; }.icon-resize-vertical { background-position: -432px -119px; }.icon-resize-horizontal { background-position: -456px -118px; }.icon-hdd { background-position: 0px -144px; }.icon-bullhorn { background-position: -24px -144px; }.icon-bell { background-position: -48px -144px; }.icon-certificate { background-position: -72px -144px; }.icon-thumbs-up { background-position: -96px -144px; }.icon-thumbs-down { background-position: -120px -144px; }.icon-hand-right { background-position: -144px -144px; }.icon-hand-left { background-position: -168px -144px; }.icon-hand-up { background-position: -192px -144px; }.icon-hand-down { background-position: -216px -144px; }.icon-circle-arrow-right { background-position: -240px -144px; }.icon-circle-arrow-left { background-position: -264px -144px; }.icon-circle-arrow-up { background-position: -288px -144px; }.icon-circle-arrow-down { background-position: -312px -144px; }.icon-globe { background-position: -336px -144px; }.icon-wrench { background-position: -360px -144px; }.icon-tasks { background-position: -384px -144px; }.icon-filter { background-position: -408px -144px; }.icon-briefcase { background-position: -432px -144px; }.icon-fullscreen { background-position: -456px -144px; }.btn-group { position: relative; display: inline-block; font-size: 0px; vertical-align: middle; white-space: nowrap; }.btn-group:first-child { }.btn-group + .btn-group { margin-left: 5px; }.btn-toolbar { font-size: 0px; margin-top: 10px; margin-bottom: 10px; }.btn-toolbar > .btn + .btn, .btn-toolbar > .btn-group + .btn, .btn-toolbar > .btn + .btn-group { margin-left: 5px; }.btn-group > .btn { position: relative; border-radius: 0px; }.btn-group > .btn + .btn { margin-left: -1px; }.btn-group > .btn, .btn-group > .dropdown-menu, .btn-group > .popover { font-size: 14px; }.btn-group > .btn-mini { font-size: 10.5px; }.btn-group > .btn-small { font-size: 11.9px; }.btn-group > .btn-large { font-size: 17.5px; }.btn-group > .btn:first-child { margin-left: 0px; border-top-left-radius: 4px; border-bottom-left-radius: 4px; }.btn-group > .btn:last-child, .btn-group > .dropdown-toggle { border-top-right-radius: 4px; border-bottom-right-radius: 4px; }.btn-group > .btn.large:first-child { margin-left: 0px; border-top-left-radius: 6px; border-bottom-left-radius: 6px; }.btn-group > .btn.large:last-child, .btn-group > .large.dropdown-toggle { border-top-right-radius: 6px; border-bottom-right-radius: 6px; }.btn-group > .btn:hover, .btn-group > .btn:focus, .btn-group > .btn:active, .btn-group > .btn.active { z-index: 2; }.btn-group .dropdown-toggle:active, .btn-group.open .dropdown-toggle { outline: 0px; }.btn-group > .btn + .dropdown-toggle { padding-left: 8px; padding-right: 8px; box-shadow: rgba(255, 255, 255, 0.125) 1px 0px 0px inset, rgba(255, 255, 255, 0.2) 0px 1px 0px inset, rgba(0, 0, 0, 0.05) 0px 1px 2px; }.btn-group > .btn-mini + .dropdown-toggle { padding-left: 5px; padding-right: 5px; }.btn-group > .btn-small + .dropdown-toggle { }.btn-group > .btn-large + .dropdown-toggle { padding-left: 12px; padding-right: 12px; }.btn-group.open .dropdown-toggle { background-image: none; box-shadow: rgba(0, 0, 0, 0.15) 0px 2px 4px inset, rgba(0, 0, 0, 0.05) 0px 1px 2px; }.btn-group.open .btn.dropdown-toggle { background-color: rgb(230, 230, 230); }.btn-group.open .btn-primary.dropdown-toggle { background-color: rgb(0, 68, 204); }.btn-group.open .btn-warning.dropdown-toggle { background-color: rgb(248, 148, 6); }.btn-group.open .btn-danger.dropdown-toggle { background-color: rgb(189, 54, 47); }.btn-group.open .btn-success.dropdown-toggle { background-color: rgb(81, 163, 81); }.btn-group.open .btn-info.dropdown-toggle { background-color: rgb(47, 150, 180); }.btn-group.open .btn-inverse.dropdown-toggle { background-color: rgb(34, 34, 34); }.btn .caret { margin-top: 8px; margin-left: 0px; }.btn-mini .caret, .btn-small .caret, .btn-large .caret { margin-top: 6px; }.btn-large .caret { border-left-width: 5px; border-right-width: 5px; border-top-width: 5px; }.dropup .btn-large .caret { border-bottom-width: 5px; }.btn-primary .caret, .btn-warning .caret, .btn-danger .caret, .btn-info .caret, .btn-success .caret, .btn-inverse .caret { border-top-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); }.btn-group-vertical { display: inline-block; }.btn-group-vertical > .btn { display: block; float: none; max-width: 100%; border-radius: 0px; }.btn-group-vertical > .btn + .btn { margin-left: 0px; margin-top: -1px; }.btn-group-vertical > .btn:first-child { border-radius: 4px 4px 0px 0px; }.btn-group-vertical > .btn:last-child { border-radius: 0px 0px 4px 4px; }.btn-group-vertical > .btn-large:first-child { border-radius: 6px 6px 0px 0px; }.btn-group-vertical > .btn-large:last-child { border-radius: 0px 0px 6px 6px; }.nav { margin-left: 0px; margin-bottom: 20px; list-style: none; }.nav > li > a { display: block; }.nav > li > a:hover { text-decoration: none; background-color: rgb(238, 238, 238); }.nav > li > a > img { max-width: none; }.nav > .pull-right { float: right; }.nav-header { display: block; padding: 3px 15px; font-size: 11px; font-weight: bold; line-height: 20px; color: rgb(153, 153, 153); text-shadow: rgba(255, 255, 255, 0.5) 0px 1px 0px; text-transform: uppercase; }.nav li + .nav-header { margin-top: 9px; }.nav-list { padding-left: 15px; padding-right: 15px; margin-bottom: 0px; }.nav-list > li > a, .nav-list .nav-header { margin-left: -15px; margin-right: -15px; text-shadow: rgba(255, 255, 255, 0.5) 0px 1px 0px; }.nav-list > li > a { padding: 3px 15px; }.nav-list > .active > a, .nav-list > .active > a:hover { color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.2) 0px -1px 0px; background-color: rgb(0, 136, 204); }.nav-list [class^="icon-"], .nav-list [class*=" icon-"] { margin-right: 2px; }.nav-list .divider { height: 1px; margin: 9px 1px; overflow: hidden; background-color: rgb(229, 229, 229); border-bottom: 1px solid rgb(255, 255, 255); }.nav-tabs, .nav-pills { }.nav-tabs::before, .nav-pills::before, .nav-tabs::after, .nav-pills::after { display: table; content: ""; line-height: 0; }.nav-tabs::after, .nav-pills::after { clear: both; }.nav-tabs > li, .nav-pills > li { float: left; }.nav-tabs > li > a, .nav-pills > li > a { padding-right: 12px; padding-left: 12px; margin-right: 2px; line-height: 14px; }.nav-tabs { border-bottom: 1px solid rgb(221, 221, 221); }.nav-tabs > li { margin-bottom: -1px; }.nav-tabs > li > a { padding-top: 8px; padding-bottom: 8px; line-height: 20px; border: 1px solid transparent; border-radius: 4px 4px 0px 0px; }.nav-tabs > li > a:hover { border-color: rgb(238, 238, 238) rgb(238, 238, 238) rgb(221, 221, 221); }.nav-tabs > .active > a, .nav-tabs > .active > a:hover { color: rgb(85, 85, 85); background-color: rgb(255, 255, 255); border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221) rgb(221, 221, 221) transparent; border-image: none; cursor: default; }.nav-pills > li > a { padding-top: 8px; padding-bottom: 8px; margin-top: 2px; margin-bottom: 2px; border-radius: 5px; }.nav-pills > .active > a, .nav-pills > .active > a:hover { color: rgb(255, 255, 255); background-color: rgb(0, 136, 204); }.nav-stacked > li { float: none; }.nav-stacked > li > a { margin-right: 0px; }.nav-tabs.nav-stacked { border-bottom: 0px; }.nav-tabs.nav-stacked > li > a { border: 1px solid rgb(221, 221, 221); border-radius: 0px; }.nav-tabs.nav-stacked > li:first-child > a { border-top-right-radius: 4px; border-top-left-radius: 4px; }.nav-tabs.nav-stacked > li:last-child > a { border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; }.nav-tabs.nav-stacked > li > a:hover { border-color: rgb(221, 221, 221); z-index: 2; }.nav-pills.nav-stacked > li > a { margin-bottom: 3px; }.nav-pills.nav-stacked > li:last-child > a { margin-bottom: 1px; }.nav-tabs .dropdown-menu { border-radius: 0px 0px 6px 6px; }.nav-pills .dropdown-menu { border-radius: 6px; }.nav .dropdown-toggle .caret { border-top-color: rgb(0, 136, 204); border-bottom-color: rgb(0, 136, 204); margin-top: 6px; }.nav .dropdown-toggle:hover .caret { border-top-color: rgb(0, 85, 128); border-bottom-color: rgb(0, 85, 128); }.nav-tabs .dropdown-toggle .caret { margin-top: 8px; }.nav .active .dropdown-toggle .caret { border-top-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); }.nav-tabs .active .dropdown-toggle .caret { border-top-color: rgb(85, 85, 85); border-bottom-color: rgb(85, 85, 85); }.nav > .dropdown.active > a:hover { cursor: pointer; }.nav-tabs .open .dropdown-toggle, .nav-pills .open .dropdown-toggle, .nav > li.dropdown.open.active > a:hover { color: rgb(255, 255, 255); background-color: rgb(153, 153, 153); border-color: rgb(153, 153, 153); }.nav li.dropdown.open .caret, .nav li.dropdown.open.active .caret, .nav li.dropdown.open a:hover .caret { border-top-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); opacity: 1; }.tabs-stacked .open > a:hover { border-color: rgb(153, 153, 153); }.tabbable { }.tabbable::before, .tabbable::after { display: table; content: ""; line-height: 0; }.tabbable::after { clear: both; }.tab-content { overflow: auto; }.tabs-below > .nav-tabs, .tabs-right > .nav-tabs, .tabs-left > .nav-tabs { border-bottom: 0px; }.tab-content > .tab-pane, .pill-content > .pill-pane { display: none; }.tab-content > .active, .pill-content > .active { display: block; }.tabs-below > .nav-tabs { border-top: 1px solid rgb(221, 221, 221); }.tabs-below > .nav-tabs > li { margin-top: -1px; margin-bottom: 0px; }.tabs-below > .nav-tabs > li > a { border-radius: 0px 0px 4px 4px; }.tabs-below > .nav-tabs > li > a:hover { border-bottom-color: transparent; border-top-color: rgb(221, 221, 221); }.tabs-below > .nav-tabs > .active > a, .tabs-below > .nav-tabs > .active > a:hover { border-color: transparent rgb(221, 221, 221) rgb(221, 221, 221); }.tabs-left > .nav-tabs > li, .tabs-right > .nav-tabs > li { float: none; }.tabs-left > .nav-tabs > li > a, .tabs-right > .nav-tabs > li > a { min-width: 74px; margin-right: 0px; margin-bottom: 3px; }.tabs-left > .nav-tabs { float: left; margin-right: 19px; border-right: 1px solid rgb(221, 221, 221); }.tabs-left > .nav-tabs > li > a { margin-right: -1px; border-radius: 4px 0px 0px 4px; }.tabs-left > .nav-tabs > li > a:hover { border-color: rgb(238, 238, 238) rgb(221, 221, 221) rgb(238, 238, 238) rgb(238, 238, 238); }.tabs-left > .nav-tabs .active > a, .tabs-left > .nav-tabs .active > a:hover { border-color: rgb(221, 221, 221) transparent rgb(221, 221, 221) rgb(221, 221, 221); }.tabs-right > .nav-tabs { float: right; margin-left: 19px; border-left: 1px solid rgb(221, 221, 221); }.tabs-right > .nav-tabs > li > a { margin-left: -1px; border-radius: 0px 4px 4px 0px; }.tabs-right > .nav-tabs > li > a:hover { border-color: rgb(238, 238, 238) rgb(238, 238, 238) rgb(238, 238, 238) rgb(221, 221, 221); }.tabs-right > .nav-tabs .active > a, .tabs-right > .nav-tabs .active > a:hover { border-color: rgb(221, 221, 221) rgb(221, 221, 221) rgb(221, 221, 221) transparent; }.nav > .disabled > a { color: rgb(153, 153, 153); }.nav > .disabled > a:hover { text-decoration: none; background-color: transparent; cursor: default; }.navbar { overflow: visible; margin-bottom: 20px; }.navbar-inner { min-height: 40px; padding-left: 20px; padding-right: 20px; background-color: rgb(250, 250, 250); background-image: linear-gradient(rgb(255, 255, 255), rgb(242, 242, 242)); background-repeat: repeat-x; border: 1px solid rgb(212, 212, 212); border-radius: 4px; box-shadow: rgba(0, 0, 0, 0.065) 0px 1px 4px; }.navbar-inner::before, .navbar-inner::after { display: table; content: ""; line-height: 0; }.navbar-inner::after { clear: both; }.navbar .container { width: auto; }.nav-collapse.collapse { height: auto; overflow: visible; }.navbar .brand { float: left; display: block; padding: 10px 20px; margin-left: -20px; font-size: 20px; font-weight: 200; color: rgb(119, 119, 119); text-shadow: rgb(255, 255, 255) 0px 1px 0px; }.navbar .brand:hover { text-decoration: none; }.navbar-text { margin-bottom: 0px; line-height: 40px; color: rgb(119, 119, 119); }.navbar-link { color: rgb(119, 119, 119); }.navbar-link:hover { color: rgb(51, 51, 51); }.navbar .divider-vertical { height: 40px; margin: 0px 9px; border-left: 1px solid rgb(242, 242, 242); border-right: 1px solid rgb(255, 255, 255); }.navbar .btn, .navbar .btn-group { margin-top: 5px; }.navbar .btn-group .btn, .navbar .input-prepend .btn, .navbar .input-append .btn { margin-top: 0px; }.navbar-form { margin-bottom: 0px; }.navbar-form::before, .navbar-form::after { display: table; content: ""; line-height: 0; }.navbar-form::after { clear: both; }.navbar-form input, .navbar-form select, .navbar-form .radio, .navbar-form .checkbox { margin-top: 5px; }.navbar-form input, .navbar-form select, .navbar-form .btn { display: inline-block; margin-bottom: 0px; }.navbar-form input[type="image"], .navbar-form input[type="checkbox"], .navbar-form input[type="radio"] { margin-top: 3px; }.navbar-form .input-append, .navbar-form .input-prepend { margin-top: 5px; white-space: nowrap; }.navbar-form .input-append input, .navbar-form .input-prepend input { margin-top: 0px; }.navbar-search { position: relative; float: left; margin-top: 5px; margin-bottom: 0px; }.navbar-search .search-query { margin-bottom: 0px; padding: 4px 14px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-size: 13px; font-weight: normal; line-height: 1; border-radius: 15px; }.navbar-static-top { position: static; margin-bottom: 0px; }.navbar-static-top .navbar-inner { border-radius: 0px; }.navbar-fixed-top, .navbar-fixed-bottom { position: fixed; right: 0px; left: 0px; z-index: 1030; margin-bottom: 0px; }.navbar-fixed-top .navbar-inner, .navbar-static-top .navbar-inner { border-width: 0px 0px 1px; }.navbar-fixed-bottom .navbar-inner { border-width: 1px 0px 0px; }.navbar-fixed-top .navbar-inner, .navbar-fixed-bottom .navbar-inner { padding-left: 0px; padding-right: 0px; border-radius: 0px; }.navbar-static-top .container, .navbar-fixed-top .container, .navbar-fixed-bottom .container { width: 940px; }.navbar-fixed-top { top: 0px; }.navbar-fixed-top .navbar-inner, .navbar-static-top .navbar-inner { box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 10px; }.navbar-fixed-bottom { bottom: 0px; }.navbar-fixed-bottom .navbar-inner { box-shadow: rgba(0, 0, 0, 0.1) 0px -1px 10px; }.navbar .nav { position: relative; left: 0px; display: block; float: left; margin: 0px 10px 0px 0px; }.navbar .nav.pull-right { float: right; margin-right: 0px; }.navbar .nav > li { float: left; }.navbar .nav > li > a { float: none; padding: 10px 15px; color: rgb(119, 119, 119); text-decoration: none; text-shadow: rgb(255, 255, 255) 0px 1px 0px; }.navbar .nav .dropdown-toggle .caret { margin-top: 8px; }.navbar .nav > li > a:focus, .navbar .nav > li > a:hover { background-color: transparent; color: rgb(51, 51, 51); text-decoration: none; }.navbar .nav > .active > a, .navbar .nav > .active > a:hover, .navbar .nav > .active > a:focus { color: rgb(85, 85, 85); text-decoration: none; background-color: rgb(229, 229, 229); box-shadow: rgba(0, 0, 0, 0.125) 0px 3px 8px inset; }.navbar .btn-navbar { display: none; float: right; padding: 7px 10px; margin-left: 5px; margin-right: 5px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 0px; background-color: rgb(237, 237, 237); background-image: linear-gradient(rgb(242, 242, 242), rgb(229, 229, 229)); background-repeat: repeat-x; border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25); box-shadow: rgba(255, 255, 255, 0.1) 0px 1px 0px inset, rgba(255, 255, 255, 0.075) 0px 1px 0px; }.navbar .btn-navbar:hover, .navbar .btn-navbar:active, .navbar .btn-navbar.active, .navbar .btn-navbar.disabled, .navbar .btn-navbar[disabled] { color: rgb(255, 255, 255); background-color: rgb(229, 229, 229); }.navbar .btn-navbar:active, .navbar .btn-navbar.active { }.navbar .btn-navbar .icon-bar { display: block; width: 18px; height: 2px; background-color: rgb(245, 245, 245); border-radius: 1px; box-shadow: rgba(0, 0, 0, 0.25) 0px 1px 0px; }.btn-navbar .icon-bar + .icon-bar { margin-top: 3px; }.navbar .nav > li > .dropdown-menu::before { content: ""; display: inline-block; border-left: 7px solid transparent; border-right: 7px solid transparent; border-bottom: 7px solid rgba(0, 0, 0, 0.2); position: absolute; top: -7px; left: 9px; }.navbar .nav > li > .dropdown-menu::after { content: ""; display: inline-block; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid rgb(255, 255, 255); position: absolute; top: -6px; left: 10px; }.navbar-fixed-bottom .nav > li > .dropdown-menu::before { border-top: 7px solid rgba(0, 0, 0, 0.2); border-bottom: 0px; bottom: -7px; top: auto; }.navbar-fixed-bottom .nav > li > .dropdown-menu::after { border-top: 6px solid rgb(255, 255, 255); border-bottom: 0px; bottom: -6px; top: auto; }.navbar .nav li.dropdown > a:hover .caret { border-top-color: rgb(85, 85, 85); border-bottom-color: rgb(85, 85, 85); }.navbar .nav li.dropdown.open > .dropdown-toggle, .navbar .nav li.dropdown.active > .dropdown-toggle, .navbar .nav li.dropdown.open.active > .dropdown-toggle { background-color: rgb(229, 229, 229); color: rgb(85, 85, 85); }.navbar .nav li.dropdown > .dropdown-toggle .caret { border-top-color: rgb(119, 119, 119); border-bottom-color: rgb(119, 119, 119); }.navbar .nav li.dropdown.open > .dropdown-toggle .caret, .navbar .nav li.dropdown.active > .dropdown-toggle .caret, .navbar .nav li.dropdown.open.active > .dropdown-toggle .caret { border-top-color: rgb(85, 85, 85); border-bottom-color: rgb(85, 85, 85); }.navbar .pull-right > li > .dropdown-menu, .navbar .nav > li > .dropdown-menu.pull-right { left: auto; right: 0px; }.navbar .pull-right > li > .dropdown-menu::before, .navbar .nav > li > .dropdown-menu.pull-right::before { left: auto; right: 12px; }.navbar .pull-right > li > .dropdown-menu::after, .navbar .nav > li > .dropdown-menu.pull-right::after { left: auto; right: 13px; }.navbar .pull-right > li > .dropdown-menu .dropdown-menu, .navbar .nav > li > .dropdown-menu.pull-right .dropdown-menu { left: auto; right: 100%; margin-left: 0px; margin-right: -1px; border-radius: 6px 0px 6px 6px; }.navbar-inverse .navbar-inner { background-color: rgb(27, 27, 27); background-image: linear-gradient(rgb(34, 34, 34), rgb(17, 17, 17)); background-repeat: repeat-x; border-color: rgb(37, 37, 37); }.navbar-inverse .brand, .navbar-inverse .nav > li > a { color: rgb(153, 153, 153); text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 0px; }.navbar-inverse .brand:hover, .navbar-inverse .nav > li > a:hover { color: rgb(255, 255, 255); }.navbar-inverse .brand { color: rgb(153, 153, 153); }.navbar-inverse .navbar-text { color: rgb(153, 153, 153); }.navbar-inverse .nav > li > a:focus, .navbar-inverse .nav > li > a:hover { background-color: transparent; color: rgb(255, 255, 255); }.navbar-inverse .nav .active > a, .navbar-inverse .nav .active > a:hover, .navbar-inverse .nav .active > a:focus { color: rgb(255, 255, 255); background-color: rgb(17, 17, 17); }.navbar-inverse .navbar-link { color: rgb(153, 153, 153); }.navbar-inverse .navbar-link:hover { color: rgb(255, 255, 255); }.navbar-inverse .divider-vertical { border-left-color: rgb(17, 17, 17); border-right-color: rgb(34, 34, 34); }.navbar-inverse .nav li.dropdown.open > .dropdown-toggle, .navbar-inverse .nav li.dropdown.active > .dropdown-toggle, .navbar-inverse .nav li.dropdown.open.active > .dropdown-toggle { background-color: rgb(17, 17, 17); color: rgb(255, 255, 255); }.navbar-inverse .nav li.dropdown > a:hover .caret { border-top-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); }.navbar-inverse .nav li.dropdown > .dropdown-toggle .caret { border-top-color: rgb(153, 153, 153); border-bottom-color: rgb(153, 153, 153); }.navbar-inverse .nav li.dropdown.open > .dropdown-toggle .caret, .navbar-inverse .nav li.dropdown.active > .dropdown-toggle .caret, .navbar-inverse .nav li.dropdown.open.active > .dropdown-toggle .caret { border-top-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); }.navbar-inverse .navbar-search .search-query { color: rgb(255, 255, 255); background-color: rgb(81, 81, 81); border-color: rgb(17, 17, 17); box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px inset, rgba(255, 255, 255, 0.15) 0px 1px 0px; transition: none; }.navbar-inverse .navbar-search .search-query:-moz-placeholder { color: rgb(204, 204, 204); }.navbar-inverse .navbar-search .search-query::-webkit-input-placeholder { color: rgb(204, 204, 204); }.navbar-inverse .navbar-search .search-query:focus, .navbar-inverse .navbar-search .search-query.focused { padding: 5px 15px; color: rgb(51, 51, 51); text-shadow: rgb(255, 255, 255) 0px 1px 0px; background-color: rgb(255, 255, 255); border: 0px; box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 3px; outline: 0px; }.navbar-inverse .btn-navbar { color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 0px; background-color: rgb(14, 14, 14); background-image: linear-gradient(rgb(21, 21, 21), rgb(4, 4, 4)); background-repeat: repeat-x; border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25); }.navbar-inverse .btn-navbar:hover, .navbar-inverse .btn-navbar:active, .navbar-inverse .btn-navbar.active, .navbar-inverse .btn-navbar.disabled, .navbar-inverse .btn-navbar[disabled] { color: rgb(255, 255, 255); background-color: rgb(4, 4, 4); }.navbar-inverse .btn-navbar:active, .navbar-inverse .btn-navbar.active { }.breadcrumb { padding: 8px 15px; margin: 0px 0px 20px; list-style: none; background-color: rgb(245, 245, 245); border-radius: 4px; }.breadcrumb > li { display: inline-block; text-shadow: rgb(255, 255, 255) 0px 1px 0px; }.breadcrumb > li > .divider { padding: 0px 5px; color: rgb(204, 204, 204); }.breadcrumb > .active { color: rgb(153, 153, 153); }.pagination { margin: 20px 0px; }.pagination ul { display: inline-block; margin-left: 0px; margin-bottom: 0px; border-radius: 4px; box-shadow: rgba(0, 0, 0, 0.05) 0px 1px 2px; }.pagination ul > li { display: inline; }.pagination ul > li > a, .pagination ul > li > span { float: left; padding: 4px 12px; line-height: 20px; text-decoration: none; background-color: rgb(255, 255, 255); border-width: 1px 1px 1px 0px; border-style: solid; border-color: rgb(221, 221, 221); border-image: none; }.pagination ul > li > a:hover, .pagination ul > .active > a, .pagination ul > .active > span { background-color: rgb(245, 245, 245); }.pagination ul > .active > a, .pagination ul > .active > span { color: rgb(153, 153, 153); cursor: default; }.pagination ul > .disabled > span, .pagination ul > .disabled > a, .pagination ul > .disabled > a:hover { color: rgb(153, 153, 153); background-color: transparent; cursor: default; }.pagination ul > li:first-child > a, .pagination ul > li:first-child > span { border-left-width: 1px; border-top-left-radius: 4px; border-bottom-left-radius: 4px; }.pagination ul > li:last-child > a, .pagination ul > li:last-child > span { border-top-right-radius: 4px; border-bottom-right-radius: 4px; }.pagination-centered { text-align: center; }.pagination-right { text-align: right; }.pagination-large ul > li > a, .pagination-large ul > li > span { padding: 11px 19px; font-size: 17.5px; }.pagination-large ul > li:first-child > a, .pagination-large ul > li:first-child > span { border-top-left-radius: 6px; border-bottom-left-radius: 6px; }.pagination-large ul > li:last-child > a, .pagination-large ul > li:last-child > span { border-top-right-radius: 6px; border-bottom-right-radius: 6px; }.pagination-mini ul > li:first-child > a, .pagination-small ul > li:first-child > a, .pagination-mini ul > li:first-child > span, .pagination-small ul > li:first-child > span { border-top-left-radius: 3px; border-bottom-left-radius: 3px; }.pagination-mini ul > li:last-child > a, .pagination-small ul > li:last-child > a, .pagination-mini ul > li:last-child > span, .pagination-small ul > li:last-child > span { border-top-right-radius: 3px; border-bottom-right-radius: 3px; }.pagination-small ul > li > a, .pagination-small ul > li > span { padding: 2px 10px; font-size: 11.9px; }.pagination-mini ul > li > a, .pagination-mini ul > li > span { padding: 0px 6px; font-size: 10.5px; }.pager { margin: 20px 0px; list-style: none; text-align: center; }.pager::before, .pager::after { display: table; content: ""; line-height: 0; }.pager::after { clear: both; }.pager li { display: inline; }.pager li > a, .pager li > span { display: inline-block; padding: 5px 14px; background-color: rgb(255, 255, 255); border: 1px solid rgb(221, 221, 221); border-radius: 15px; }.pager li > a:hover { text-decoration: none; background-color: rgb(245, 245, 245); }.pager .next > a, .pager .next > span { float: right; }.pager .previous > a, .pager .previous > span { float: left; }.pager .disabled > a, .pager .disabled > a:hover, .pager .disabled > span { color: rgb(153, 153, 153); background-color: rgb(255, 255, 255); cursor: default; }.thumbnails { margin-left: -20px; list-style: none; }.thumbnails::before, .thumbnails::after { display: table; content: ""; line-height: 0; }.thumbnails::after { clear: both; }.row-fluid .thumbnails { margin-left: 0px; }.thumbnails > li { float: left; margin-bottom: 20px; margin-left: 20px; }.thumbnail { display: block; padding: 4px; line-height: 20px; border: 1px solid rgb(221, 221, 221); border-radius: 4px; box-shadow: rgba(0, 0, 0, 0.055) 0px 1px 3px; transition: 0.2s ease-in-out; }a.thumbnail:hover { border-color: rgb(0, 136, 204); box-shadow: rgba(0, 105, 214, 0.25) 0px 1px 4px; }.thumbnail > img { display: block; max-width: 100%; margin-left: auto; margin-right: auto; }.thumbnail .caption { padding: 9px; color: rgb(85, 85, 85); }.alert { padding: 8px 35px 8px 14px; margin-bottom: 20px; text-shadow: rgba(255, 255, 255, 0.5) 0px 1px 0px; background-color: rgb(252, 248, 227); border: 1px solid rgb(251, 238, 213); border-radius: 4px; }.alert, .alert h4 { color: rgb(192, 152, 83); }.alert h4 { margin: 0px; }.alert .close { position: relative; top: -2px; right: -21px; line-height: 20px; }.alert-success { background-color: rgb(223, 240, 216); border-color: rgb(214, 233, 198); color: rgb(70, 136, 71); }.alert-success h4 { color: rgb(70, 136, 71); }.alert-danger, .alert-error { background-color: rgb(242, 222, 222); border-color: rgb(238, 211, 215); color: rgb(185, 74, 72); }.alert-danger h4, .alert-error h4 { color: rgb(185, 74, 72); }.alert-info { background-color: rgb(217, 237, 247); border-color: rgb(188, 232, 241); color: rgb(58, 135, 173); }.alert-info h4 { color: rgb(58, 135, 173); }.alert-block { padding-top: 14px; padding-bottom: 14px; }.alert-block > p, .alert-block > ul { margin-bottom: 0px; }.alert-block p + p { margin-top: 5px; }@keyframes progress-bar-stripes {
0% { background-position: 40px 0px; }
100% { background-position: 0px 0px; }
}@keyframes progress-bar-stripes {
0% { background-position: 40px 0px; }
100% { background-position: 0px 0px; }
}@keyframes progress-bar-stripes {
0% { background-position: 40px 0px; }
100% { background-position: 0px 0px; }
}.progress { overflow: hidden; height: 20px; margin-bottom: 20px; background-color: rgb(247, 247, 247); background-image: linear-gradient(rgb(245, 245, 245), rgb(249, 249, 249)); background-repeat: repeat-x; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px inset; border-radius: 4px; }.progress .bar { width: 0%; height: 100%; color: rgb(255, 255, 255); float: left; font-size: 12px; text-align: center; text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 0px; background-color: rgb(14, 144, 210); background-image: linear-gradient(rgb(20, 155, 223), rgb(4, 128, 190)); background-repeat: repeat-x; box-shadow: rgba(0, 0, 0, 0.15) 0px -1px 0px inset; box-sizing: border-box; transition: width 0.6s; }.progress .bar + .bar { box-shadow: rgba(0, 0, 0, 0.15) 1px 0px 0px inset, rgba(0, 0, 0, 0.15) 0px -1px 0px inset; }.progress-striped .bar { background-color: rgb(20, 155, 223); background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); background-size: 40px 40px; }.progress.active .bar { animation: 2s linear infinite progress-bar-stripes; }.progress-danger .bar, .progress .bar-danger { background-color: rgb(221, 81, 76); background-image: linear-gradient(rgb(238, 95, 91), rgb(196, 60, 53)); background-repeat: repeat-x; }.progress-danger.progress-striped .bar, .progress-striped .bar-danger { background-color: rgb(238, 95, 91); background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); }.progress-success .bar, .progress .bar-success { background-color: rgb(94, 185, 94); background-image: linear-gradient(rgb(98, 196, 98), rgb(87, 169, 87)); background-repeat: repeat-x; }.progress-success.progress-striped .bar, .progress-striped .bar-success { background-color: rgb(98, 196, 98); background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); }.progress-info .bar, .progress .bar-info { background-color: rgb(75, 177, 207); background-image: linear-gradient(rgb(91, 192, 222), rgb(51, 155, 185)); background-repeat: repeat-x; }.progress-info.progress-striped .bar, .progress-striped .bar-info { background-color: rgb(91, 192, 222); background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); }.progress-warning .bar, .progress .bar-warning { background-color: rgb(250, 167, 50); background-image: linear-gradient(rgb(251, 180, 80), rgb(248, 148, 6)); background-repeat: repeat-x; }.progress-warning.progress-striped .bar, .progress-striped .bar-warning { background-color: rgb(251, 180, 80); background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent); }.hero-unit { padding: 60px; margin-bottom: 30px; font-size: 18px; font-weight: 200; line-height: 30px; color: inherit; background-color: rgb(238, 238, 238); border-radius: 6px; }.hero-unit h1 { margin-bottom: 0px; font-size: 60px; line-height: 1; color: inherit; letter-spacing: -1px; }.hero-unit li { line-height: 30px; }.media, .media-body { overflow: hidden; zoom: 1; }.media, .media .media { margin-top: 15px; }.media:first-child { margin-top: 0px; }.media-object { display: block; }.media-heading { margin: 0px 0px 5px; }.media .pull-left { margin-right: 10px; }.media .pull-right { margin-left: 10px; }.media-list { margin-left: 0px; list-style: none; }.well { min-height: 20px; padding: 19px; margin-bottom: 20px; background-color: rgb(245, 245, 245); border: 1px solid rgb(227, 227, 227); border-radius: 4px; box-shadow: rgba(0, 0, 0, 0.05) 0px 1px 1px inset; }.well blockquote { border-color: rgba(0, 0, 0, 0.15); }.well-large { padding: 24px; border-radius: 6px; }.well-small { padding: 9px; border-radius: 3px; }.close { float: right; font-size: 20px; font-weight: bold; line-height: 20px; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px 0px; opacity: 0.2; }.close:hover { color: rgb(0, 0, 0); text-decoration: none; cursor: pointer; opacity: 0.4; }button.close { padding: 0px; cursor: pointer; background: transparent; border: 0px; appearance: none; }.pull-right { float: right; }.pull-left { float: left; }.hide { display: none; }.show { display: block; }.invisible { visibility: hidden; }.affix { position: fixed; }.fade { opacity: 0; transition: opacity 0.15s linear; }.fade.in { opacity: 1; }.collapse { position: relative; height: 0px; overflow: hidden; transition: height 0.35s; }.collapse.in { height: auto; }.hidden { display: none; visibility: hidden; }.visible-phone { display: none !important; }.visible-tablet { display: none !important; }.hidden-desktop { display: none !important; }.visible-desktop { display: inherit !important; }@media (min-width: 768px) and (max-width: 979px) {
  .hidden-desktop { display: inherit !important; }
  .visible-desktop { display: none !important; }
  .visible-tablet { display: inherit !important; }
  .hidden-tablet { display: none !important; }
}@media (max-width: 767px) {
  .hidden-desktop { display: inherit !important; }
  .visible-desktop { display: none !important; }
  .visible-phone { display: inherit !important; }
  .hidden-phone { display: none !important; }
}@media (max-width: 767px) {
  body { padding-left: 20px; padding-right: 20px; }
  .navbar-fixed-top, .navbar-fixed-bottom, .navbar-static-top { margin-left: -20px; margin-right: -20px; }
  .container-fluid { padding: 0px; }
  .dl-horizontal dt { float: none; clear: none; width: auto; text-align: left; }
  .dl-horizontal dd { margin-left: 0px; }
  .container { width: auto; }
  .row-fluid { width: 100%; }
  .row, .thumbnails { margin-left: 0px; }
  .thumbnails > li { float: none; margin-left: 0px; }
  [class*="span"], .uneditable-input[class*="span"], .row-fluid [class*="span"] { float: none; display: block; width: 100%; margin-left: 0px; box-sizing: border-box; }
  .span12, .row-fluid .span12 { width: 100%; box-sizing: border-box; }
  .row-fluid [class*="offset"]:first-child { margin-left: 0px; }
  .input-large, .input-xlarge, .input-xxlarge, input[class*="span"], select[class*="span"], textarea[class*="span"], .uneditable-input { display: block; width: 100%; min-height: 30px; box-sizing: border-box; }
  .input-prepend input, .input-append input, .input-prepend input[class*="span"], .input-append input[class*="span"] { display: inline-block; width: auto; }
  .controls-row [class*="span"] + [class*="span"] { margin-left: 0px; }
  .modal { position: fixed; top: 20px; left: 20px; right: 20px; width: auto; margin: 0px; }
  .modal.fade { top: -100px; }
  .modal.fade.in { top: 20px; }
}@media (max-width: 480px) {
  .nav-collapse { transform: translate3d(0px, 0px, 0px); }
  .page-header h1 small { display: block; line-height: 20px; }
  input[type="checkbox"], input[type="radio"] { border: 1px solid rgb(204, 204, 204); }
  .form-horizontal .control-label { float: none; width: auto; padding-top: 0px; text-align: left; }
  .form-horizontal .controls { margin-left: 0px; }
  .form-horizontal .control-list { padding-top: 0px; }
  .form-horizontal .form-actions { padding-left: 10px; padding-right: 10px; }
  .media .pull-left, .media .pull-right { float: none; display: block; margin-bottom: 10px; }
  .media-object { margin-right: 0px; margin-left: 0px; }
  .modal { top: 10px; left: 10px; right: 10px; }
  .modal-header .close { padding: 10px; margin: -10px; }
  .carousel-caption { position: static; }
}@media (min-width: 768px) and (max-width: 979px) {
  .row { margin-left: -20px; }
  .row::before, .row::after { display: table; content: ""; line-height: 0; }
  .row::after { clear: both; }
  [class*="span"] { float: left; min-height: 1px; margin-left: 20px; }
  .container, .navbar-static-top .container, .navbar-fixed-top .container, .navbar-fixed-bottom .container { width: 724px; }
  .span12 { width: 724px; }
  .span11 { width: 662px; }
  .span10 { width: 600px; }
  .span9 { width: 538px; }
  .span8 { width: 476px; }
  .span7 { width: 414px; }
  .span6 { width: 352px; }
  .span5 { width: 290px; }
  .span4 { width: 228px; }
  .span3 { width: 166px; }
  .span2 { width: 104px; }
  .span1 { width: 42px; }
  .offset12 { margin-left: 764px; }
  .offset11 { margin-left: 702px; }
  .offset10 { margin-left: 640px; }
  .offset9 { margin-left: 578px; }
  .offset8 { margin-left: 516px; }
  .offset7 { margin-left: 454px; }
  .offset6 { margin-left: 392px; }
  .offset5 { margin-left: 330px; }
  .offset4 { margin-left: 268px; }
  .offset3 { margin-left: 206px; }
  .offset2 { margin-left: 144px; }
  .offset1 { margin-left: 82px; }
  .row-fluid { width: 100%; }
  .row-fluid::before, .row-fluid::after { display: table; content: ""; line-height: 0; }
  .row-fluid::after { clear: both; }
  .row-fluid [class*="span"] { display: block; width: 100%; min-height: 30px; box-sizing: border-box; float: left; margin-left: 2.76243%; }
  .row-fluid [class*="span"]:first-child { margin-left: 0px; }
  .row-fluid .controls-row [class*="span"] + [class*="span"] { margin-left: 2.76243%; }
  .row-fluid .span12 { width: 100%; }
  .row-fluid .span11 { width: 91.4365%; }
  .row-fluid .span10 { width: 82.8729%; }
  .row-fluid .span9 { width: 74.3094%; }
  .row-fluid .span8 { width: 65.7459%; }
  .row-fluid .span7 { width: 57.1823%; }
  .row-fluid .span6 { width: 48.6188%; }
  .row-fluid .span5 { width: 40.0553%; }
  .row-fluid .span4 { width: 31.4917%; }
  .row-fluid .span3 { width: 22.9282%; }
  .row-fluid .span2 { width: 14.3646%; }
  .row-fluid .span1 { width: 5.80111%; }
  .row-fluid .offset12 { margin-left: 105.525%; }
  .row-fluid .offset12:first-child { margin-left: 102.762%; }
  .row-fluid .offset11 { margin-left: 96.9613%; }
  .row-fluid .offset11:first-child { margin-left: 94.1989%; }
  .row-fluid .offset10 { margin-left: 88.3978%; }
  .row-fluid .offset10:first-child { margin-left: 85.6354%; }
  .row-fluid .offset9 { margin-left: 79.8343%; }
  .row-fluid .offset9:first-child { margin-left: 77.0718%; }
  .row-fluid .offset8 { margin-left: 71.2707%; }
  .row-fluid .offset8:first-child { margin-left: 68.5083%; }
  .row-fluid .offset7 { margin-left: 62.7072%; }
  .row-fluid .offset7:first-child { margin-left: 59.9447%; }
  .row-fluid .offset6 { margin-left: 54.1437%; }
  .row-fluid .offset6:first-child { margin-left: 51.3812%; }
  .row-fluid .offset5 { margin-left: 45.5801%; }
  .row-fluid .offset5:first-child { margin-left: 42.8177%; }
  .row-fluid .offset4 { margin-left: 37.0166%; }
  .row-fluid .offset4:first-child { margin-left: 34.2541%; }
  .row-fluid .offset3 { margin-left: 28.453%; }
  .row-fluid .offset3:first-child { margin-left: 25.6906%; }
  .row-fluid .offset2 { margin-left: 19.8895%; }
  .row-fluid .offset2:first-child { margin-left: 17.1271%; }
  .row-fluid .offset1 { margin-left: 11.326%; }
  .row-fluid .offset1:first-child { margin-left: 8.56354%; }
  input, textarea, .uneditable-input { margin-left: 0px; }
  .controls-row [class*="span"] + [class*="span"] { margin-left: 20px; }
  input.span12, textarea.span12, .uneditable-input.span12 { width: 710px; }
  input.span11, textarea.span11, .uneditable-input.span11 { width: 648px; }
  input.span10, textarea.span10, .uneditable-input.span10 { width: 586px; }
  input.span9, textarea.span9, .uneditable-input.span9 { width: 524px; }
  input.span8, textarea.span8, .uneditable-input.span8 { width: 462px; }
  input.span7, textarea.span7, .uneditable-input.span7 { width: 400px; }
  input.span6, textarea.span6, .uneditable-input.span6 { width: 338px; }
  input.span5, textarea.span5, .uneditable-input.span5 { width: 276px; }
  input.span4, textarea.span4, .uneditable-input.span4 { width: 214px; }
  input.span3, textarea.span3, .uneditable-input.span3 { width: 152px; }
  input.span2, textarea.span2, .uneditable-input.span2 { width: 90px; }
  input.span1, textarea.span1, .uneditable-input.span1 { width: 28px; }
}@media (min-width: 1200px) {
  .row { margin-left: -30px; }
  .row::before, .row::after { display: table; content: ""; line-height: 0; }
  .row::after { clear: both; }
  [class*="span"] { float: left; min-height: 1px; margin-left: 30px; }
  .container, .navbar-static-top .container, .navbar-fixed-top .container, .navbar-fixed-bottom .container { width: 1170px; }
  .span12 { width: 1170px; }
  .span11 { width: 1070px; }
  .span10 { width: 970px; }
  .span9 { width: 870px; }
  .span8 { width: 770px; }
  .span7 { width: 670px; }
  .span6 { width: 570px; }
  .span5 { width: 470px; }
  .span4 { width: 370px; }
  .span3 { width: 270px; }
  .span2 { width: 170px; }
  .span1 { width: 70px; }
  .offset12 { margin-left: 1230px; }
  .offset11 { margin-left: 1130px; }
  .offset10 { margin-left: 1030px; }
  .offset9 { margin-left: 930px; }
  .offset8 { margin-left: 830px; }
  .offset7 { margin-left: 730px; }
  .offset6 { margin-left: 630px; }
  .offset5 { margin-left: 530px; }
  .offset4 { margin-left: 430px; }
  .offset3 { margin-left: 330px; }
  .offset2 { margin-left: 230px; }
  .offset1 { margin-left: 130px; }
  .row-fluid { width: 100%; }
  .row-fluid::before, .row-fluid::after { display: table; content: ""; line-height: 0; }
  .row-fluid::after { clear: both; }
  .row-fluid [class*="span"] { display: block; width: 100%; min-height: 30px; box-sizing: border-box; float: left; margin-left: 2.5641%; }
  .row-fluid [class*="span"]:first-child { margin-left: 0px; }
  .row-fluid .controls-row [class*="span"] + [class*="span"] { margin-left: 2.5641%; }
  .row-fluid .span12 { width: 100%; }
  .row-fluid .span11 { width: 91.453%; }
  .row-fluid .span10 { width: 82.906%; }
  .row-fluid .span9 { width: 74.359%; }
  .row-fluid .span8 { width: 65.812%; }
  .row-fluid .span7 { width: 57.265%; }
  .row-fluid .span6 { width: 48.718%; }
  .row-fluid .span5 { width: 40.1709%; }
  .row-fluid .span4 { width: 31.6239%; }
  .row-fluid .span3 { width: 23.0769%; }
  .row-fluid .span2 { width: 14.5299%; }
  .row-fluid .span1 { width: 5.98291%; }
  .row-fluid .offset12 { margin-left: 105.128%; }
  .row-fluid .offset12:first-child { margin-left: 102.564%; }
  .row-fluid .offset11 { margin-left: 96.5812%; }
  .row-fluid .offset11:first-child { margin-left: 94.0171%; }
  .row-fluid .offset10 { margin-left: 88.0342%; }
  .row-fluid .offset10:first-child { margin-left: 85.4701%; }
  .row-fluid .offset9 { margin-left: 79.4872%; }
  .row-fluid .offset9:first-child { margin-left: 76.9231%; }
  .row-fluid .offset8 { margin-left: 70.9402%; }
  .row-fluid .offset8:first-child { margin-left: 68.3761%; }
  .row-fluid .offset7 { margin-left: 62.3932%; }
  .row-fluid .offset7:first-child { margin-left: 59.8291%; }
  .row-fluid .offset6 { margin-left: 53.8462%; }
  .row-fluid .offset6:first-child { margin-left: 51.2821%; }
  .row-fluid .offset5 { margin-left: 45.2991%; }
  .row-fluid .offset5:first-child { margin-left: 42.735%; }
  .row-fluid .offset4 { margin-left: 36.7521%; }
  .row-fluid .offset4:first-child { margin-left: 34.188%; }
  .row-fluid .offset3 { margin-left: 28.2051%; }
  .row-fluid .offset3:first-child { margin-left: 25.641%; }
  .row-fluid .offset2 { margin-left: 19.6581%; }
  .row-fluid .offset2:first-child { margin-left: 17.094%; }
  .row-fluid .offset1 { margin-left: 11.1111%; }
  .row-fluid .offset1:first-child { margin-left: 8.54701%; }
  input, textarea, .uneditable-input { margin-left: 0px; }
  .controls-row [class*="span"] + [class*="span"] { margin-left: 30px; }
  input.span12, textarea.span12, .uneditable-input.span12 { width: 1156px; }
  input.span11, textarea.span11, .uneditable-input.span11 { width: 1056px; }
  input.span10, textarea.span10, .uneditable-input.span10 { width: 956px; }
  input.span9, textarea.span9, .uneditable-input.span9 { width: 856px; }
  input.span8, textarea.span8, .uneditable-input.span8 { width: 756px; }
  input.span7, textarea.span7, .uneditable-input.span7 { width: 656px; }
  input.span6, textarea.span6, .uneditable-input.span6 { width: 556px; }
  input.span5, textarea.span5, .uneditable-input.span5 { width: 456px; }
  input.span4, textarea.span4, .uneditable-input.span4 { width: 356px; }
  input.span3, textarea.span3, .uneditable-input.span3 { width: 256px; }
  input.span2, textarea.span2, .uneditable-input.span2 { width: 156px; }
  input.span1, textarea.span1, .uneditable-input.span1 { width: 56px; }
  .thumbnails { margin-left: -30px; }
  .thumbnails > li { margin-left: 30px; }
  .row-fluid .thumbnails { margin-left: 0px; }
}@media (max-width: 979px) {
  body { padding-top: 0px; }
  .navbar-fixed-top, .navbar-fixed-bottom { position: static; }
  .navbar-fixed-top { margin-bottom: 20px; }
  .navbar-fixed-bottom { margin-top: 20px; }
  .navbar-fixed-top .navbar-inner, .navbar-fixed-bottom .navbar-inner { padding: 5px; }
  .navbar .container { width: auto; padding: 0px; }
  .navbar .brand { padding-left: 10px; padding-right: 10px; margin: 0px 0px 0px -5px; }
  .nav-collapse { clear: both; }
  .nav-collapse .nav { float: none; margin: 0px 0px 10px; }
  .nav-collapse .nav > li { float: none; }
  .nav-collapse .nav > li > a { margin-bottom: 2px; }
  .nav-collapse .nav > .divider-vertical { display: none; }
  .nav-collapse .nav .nav-header { color: rgb(119, 119, 119); text-shadow: none; }
  .nav-collapse .nav > li > a, .nav-collapse .dropdown-menu a { padding: 9px 15px; font-weight: bold; color: rgb(119, 119, 119); border-radius: 3px; }
  .nav-collapse .btn { padding: 4px 10px; font-weight: normal; border-radius: 4px; }
  .nav-collapse .dropdown-menu li + li a { margin-bottom: 2px; }
  .nav-collapse .nav > li > a:hover, .nav-collapse .dropdown-menu a:hover { background-color: rgb(242, 242, 242); }
  .navbar-inverse .nav-collapse .nav > li > a, .navbar-inverse .nav-collapse .dropdown-menu a { color: rgb(153, 153, 153); }
  .navbar-inverse .nav-collapse .nav > li > a:hover, .navbar-inverse .nav-collapse .dropdown-menu a:hover { background-color: rgb(17, 17, 17); }
  .nav-collapse.in .btn-group { margin-top: 5px; padding: 0px; }
  .nav-collapse .dropdown-menu { position: static; top: auto; left: auto; float: none; display: none; max-width: none; margin: 0px 15px; padding: 0px; background-color: transparent; border: medium; border-radius: 0px; box-shadow: none; }
  .nav-collapse .open > .dropdown-menu { display: block; }
  .nav-collapse .dropdown-menu::before, .nav-collapse .dropdown-menu::after { display: none; }
  .nav-collapse .dropdown-menu .divider { display: none; }
  .nav-collapse .nav > li > .dropdown-menu::before, .nav-collapse .nav > li > .dropdown-menu::after { display: none; }
  .nav-collapse .navbar-form, .nav-collapse .navbar-search { float: none; padding: 10px 15px; margin: 10px 0px; border-top: 1px solid rgb(242, 242, 242); border-bottom: 1px solid rgb(242, 242, 242); box-shadow: rgba(255, 255, 255, 0.1) 0px 1px 0px inset, rgba(255, 255, 255, 0.1) 0px 1px 0px; }
  .navbar-inverse .nav-collapse .navbar-form, .navbar-inverse .nav-collapse .navbar-search { border-top-color: rgb(17, 17, 17); border-bottom-color: rgb(17, 17, 17); }
  .navbar .nav-collapse .nav.pull-right { float: none; margin-left: 0px; }
  .nav-collapse, .nav-collapse.collapse { overflow: hidden; height: 0px; }
  .navbar .btn-navbar { display: block; }
  .navbar-static .navbar-inner { padding-left: 10px; padding-right: 10px; }
}@media (min-width: 980px) {
  .nav-collapse.collapse { height: auto !important; overflow: visible !important; }
}</style><style>body { font-family: "Inconsolata", serif; font-size: 16px; }.page-header h1 small { margin-left: 25px; font-family: "Tangerine", serif; font-size: 56px; text-shadow: rgb(170, 170, 170) 4px 4px 4px; letter-spacing: 6px; }.container-narrow { margin: 0px auto; max-width: 700px; }.container-narrow > hr { margin: 30px 0px; }.navbar .nav { float: right; }.post > h3.title { position: relative; padding-top: 10px; }.post > h3.title span.date { position: absolute; right: 0px; font-size: 0.9em; }.post > .more { margin: 10px 0px; text-align: left; }.post-full .date { margin-bottom: 20px; font-weight: bold; }.content { margin-bottom: 30px; }.tag_box { list-style: none; margin: 0px; overflow: hidden; }.tag_box li { line-height: 28px; }.tag_box li i { opacity: 0.9; }.tag_box.inline li { float: left; }.tag_box a { padding: 3px 6px; margin: 2px; background: rgb(238, 238, 238); color: rgb(85, 85, 85); border-radius: 3px; text-decoration: none; border: 1px dashed rgb(204, 204, 204); }.tag_box a span { vertical-align: super; font-size: 0.8em; }.tag_box a:hover { background-color: rgb(229, 229, 229); }.tag_box a.active { background: rgb(87, 169, 87); border: 1px solid rgb(76, 150, 77); color: rgb(255, 255, 255); }li { line-height: 22px; }</style><style>pre .str, code .str { color: rgb(101, 176, 66); }pre .kwd, code .kwd { color: rgb(226, 137, 100); }pre .com, code .com { color: rgb(174, 174, 174); font-style: italic; }pre .typ, code .typ { color: rgb(137, 189, 255); }pre .lit, code .lit { color: rgb(51, 135, 204); }pre .pun, code .pun { color: rgb(255, 255, 255); }pre .pln, code .pln { color: rgb(255, 255, 255); }pre .tag, code .tag { color: rgb(137, 189, 255); }pre .atn, code .atn { color: rgb(189, 183, 107); }pre .atv, code .atv { color: rgb(101, 176, 66); }pre .dec, code .dec { color: rgb(51, 135, 204); }pre.prettyprint, code.prettyprint { background-color: rgb(0, 0, 0); border-radius: 8px; }pre.prettyprint { width: 95%; margin: 1em auto; padding: 1em; white-space: pre-wrap; }ol.linenums { margin-top: 0px; margin-bottom: 0px; color: rgb(174, 174, 174); }li.L0, li.L1, li.L2, li.L3, li.L5, li.L6, li.L7, li.L8 { list-style-type: none; }li.L1, li.L3, li.L5, li.L7, li.L9 { }@media print {
  pre .str, code .str { color: rgb(0, 102, 0); }
  pre .kwd, code .kwd { color: rgb(0, 0, 102); font-weight: bold; }
  pre .com, code .com { color: rgb(102, 0, 0); font-style: italic; }
  pre .typ, code .typ { color: rgb(68, 0, 68); font-weight: bold; }
  pre .lit, code .lit { color: rgb(0, 68, 68); }
  pre .pun, code .pun { color: rgb(68, 68, 0); }
  pre .pln, code .pln { color: rgb(0, 0, 0); }
  pre .tag, code .tag { color: rgb(0, 0, 102); font-weight: bold; }
  pre .atn, code .atn { color: rgb(68, 0, 68); }
  pre .atv, code .atv { color: rgb(0, 102, 0); }
}</style></head>

    <body>
        <div class="navbar">
            <div class="navbar-inner">
                <div class="container-narrow">
                    <a class="brand" href="/">不忘初心 方得始终</a>
                    <ul class="nav">
                        <!--
                        
                        


  
    
      
      	
      	<li><a href="/aboutMe">About Me</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags">Tags</a></li>
      	
      
    
  
    
  
    
      
    
  


-->
						<li><a href="/archive.html">Archive</a></li>
						<li><a href="/aboutMe.html">About Me</a></li>
						<li><a href="/pages.html">Pages</a></li>
						<li><a href="/tags.html">Tags</a></li>
						<li><a href="/categories.html">Categories</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container-narrow">

            <div class="content">
                

<div class="page-header">
    <h1>qemu/kvm dirty pages tracking in migration </h1>
</div>

<div class="row-fluid post-full">
    <div class="span12">
        <div class="date">
            <span>2018-08-11</span>
        </div>
        <div class="content">
            
<p>The live migration’s most work is to migrate the RAM of guest from src host to dest host.
So the qemu need to track the dirty pages of guest to transfer them to the dest host.
This article discusses how qemu do the tracking work.</p>

<p>In a summary, the following steps show the overview of dirty tracking:</p>

<ol>
  <li>qemu allocs a bitmap and set its all bits to 1(mean dirty)</li>
  <li>qemu calls kvm to set memory slots with ‘KVM_MEM_LOG_DIRTY_PAGES’ flags</li>
  <li>qemu calls kvm to get the kvm dirty bitmap</li>
  <li>qemu kvm wrapper: walk the dirty bitmap(from kvm) and fill the dirty bitmap(ram_list)</li>
  <li>migration code: walk the ram_list dirty bitmap and set the qemu dirty page bitmap</li>
</ol>

<h3> qemu and kvm create bitmap </h3>

<p>In the ram migration setup function, it allocates the qemu bitmap in function ‘ram_save_init_globals’.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="pun">{</span><span class="pln">
    </span><span class="pun">...</span><span class="pln">
    qemu_mutex_lock_iothread</span><span class="pun">();</span><span class="pln">

    qemu_mutex_lock_ramlist</span><span class="pun">();</span><span class="pln">
    rcu_read_lock</span><span class="pun">();</span><span class="pln">
    bytes_transferred </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    reset_ram_globals</span><span class="pun">();</span><span class="pln">

    ram_bitmap_pages </span><span class="pun">=</span><span class="pln"> last_ram_offset</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> TARGET_PAGE_BITS</span><span class="pun">;</span><span class="pln">
    migration_bitmap_rcu </span><span class="pun">=</span><span class="pln"> g_new0</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> </span><span class="typ">BitmapRcu</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span><span class="pln">
    migration_bitmap_rcu</span><span class="pun">-&gt;</span><span class="pln">bmap </span><span class="pun">=</span><span class="pln"> bitmap_new</span><span class="pun">(</span><span class="pln">ram_bitmap_pages</span><span class="pun">);</span><span class="pln">
    bitmap_set</span><span class="pun">(</span><span class="pln">migration_bitmap_rcu</span><span class="pun">-&gt;</span><span class="pln">bmap</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> ram_bitmap_pages</span><span class="pun">);</span><span class="pln">

    </span><span class="pun">...</span><span class="pln">

    </span><span class="com">/*
    * Count the total number of pages used by ram blocks not including any
    * gaps due to alignment or unplugs.
    */</span><span class="pln">
    migration_dirty_pages </span><span class="pun">=</span><span class="pln"> ram_bytes_total</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> TARGET_PAGE_BITS</span><span class="pun">;</span><span class="pln">

    memory_global_dirty_log_start</span><span class="pun">();</span><span class="pln">
    migration_bitmap_sync</span><span class="pun">();</span><span class="pln">
    qemu_mutex_unlock_ramlist</span><span class="pun">();</span><span class="pln">
    qemu_mutex_unlock_iothread</span><span class="pun">();</span><span class="pln">
    rcu_read_unlock</span><span class="pun">();</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>As we can see ‘migration_bitmap_rcu’ is the bitmap for qemu maintains.</p>

<p>Then it calls ‘memory_global_dirty_log_start’:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">void</span><span class="pln"> memory_global_dirty_log_start</span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    global_dirty_log </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">

    MEMORY_LISTENER_CALL_GLOBAL</span><span class="pun">(</span><span class="pln">log_global_start</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Forward</span><span class="pun">);</span><span class="pln">

    </span><span class="com">/* Refresh DIRTY_LOG_MIGRATION bit.  */</span><span class="pln">
    memory_region_transaction_begin</span><span class="pun">();</span><span class="pln">
    memory_region_update_pending </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
    memory_region_transaction_commit</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>This set ‘global_dirty_log’ to true and commit the memory change to kvm (for update).</p>

<p>It then calls ‘address_space_update_topology_pass’ and will call the ‘log_start’ for every MemoryRegionSection.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">adding</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            MEMORY_LISTENER_UPDATE_REGION</span><span class="pun">(</span><span class="pln">frnew</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">as</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Forward</span><span class="pun">,</span><span class="pln"> region_nop</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frnew</span><span class="pun">-&gt;</span><span class="pln">dirty_log_mask </span><span class="pun">&amp;</span><span class="pln"> </span><span class="pun">~</span><span class="pln">frold</span><span class="pun">-&gt;</span><span class="pln">dirty_log_mask</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                MEMORY_LISTENER_UPDATE_REGION</span><span class="pun">(</span><span class="pln">frnew</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">as</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Forward</span><span class="pun">,</span><span class="pln"> log_start</span><span class="pun">,</span><span class="pln">
                                              frold</span><span class="pun">-&gt;</span><span class="pln">dirty_log_mask</span><span class="pun">,</span><span class="pln">
                                              frnew</span><span class="pun">-&gt;</span><span class="pln">dirty_log_mask</span><span class="pun">);</span><span class="pln">
            </span><span class="pun">}</span></code></pre></div></div>

<p>For kvm it is ‘kvm_log_start’. We can see in ‘kvm_mem_flags’ it adds the ‘KVM_MEM_LOG_DIRTY_PAGES’ flags.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">static</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> kvm_mem_flags</span><span class="pun">(</span><span class="typ">MemoryRegion</span><span class="pln"> </span><span class="pun">*</span><span class="pln">mr</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">bool</span><span class="pln"> </span><span class="kwd">readonly</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> mr</span><span class="pun">-&gt;</span><span class="kwd">readonly</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> memory_region_is_romd</span><span class="pun">(</span><span class="pln">mr</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> flags </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">memory_region_get_dirty_log_mask</span><span class="pun">(</span><span class="pln">mr</span><span class="pun">)</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        flags </span><span class="pun">|=</span><span class="pln"> KVM_MEM_LOG_DIRTY_PAGES</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">readonly</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> kvm_readonly_mem_allowed</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        flags </span><span class="pun">|=</span><span class="pln"> KVM_MEM_READONLY</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> flags</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>Following stack backtrack shows the callchains.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="pun">(</span><span class="pln">gdb</span><span class="pun">)</span><span class="pln"> bt
</span><span class="com">#0  kvm_set_user_memory_region (kml=0x55ab8fc502c0, slot=0x55ab8fc50500) at /home/liqiang02/qemu0711/qemu-2.8/kvm-all.c:236</span><span class="pln">
</span><span class="com">#1  0x000055ab8df10a92 in kvm_slot_update_flags (kml=0x55ab8fc502c0, mem=0x55ab8fc50500, mr=0x55ab8fd36f70)</span><span class="pln">
    at </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">liqiang02</span><span class="pun">/</span><span class="pln">qemu0711</span><span class="pun">/</span><span class="pln">qemu</span><span class="pun">-</span><span class="lit">2.8</span><span class="pun">/</span><span class="pln">kvm</span><span class="pun">-</span><span class="pln">all</span><span class="pun">.</span><span class="pln">c</span><span class="pun">:</span><span class="lit">376</span><span class="pln">
</span><span class="com">#2  0x000055ab8df10b1f in kvm_section_update_flags (kml=0x55ab8fc502c0, section=0x7f0ab37fb4c0)</span><span class="pln">
    at </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">liqiang02</span><span class="pun">/</span><span class="pln">qemu0711</span><span class="pun">/</span><span class="pln">qemu</span><span class="pun">-</span><span class="lit">2.8</span><span class="pun">/</span><span class="pln">kvm</span><span class="pun">-</span><span class="pln">all</span><span class="pun">.</span><span class="pln">c</span><span class="pun">:</span><span class="lit">389</span><span class="pln">
</span><span class="com">#3  0x000055ab8df10b65 in kvm_log_start (listener=0x55ab8fc502c0, section=0x7f0ab37fb4c0, old=0, new=4)</span><span class="pln">
    at </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">liqiang02</span><span class="pun">/</span><span class="pln">qemu0711</span><span class="pun">/</span><span class="pln">qemu</span><span class="pun">-</span><span class="lit">2.8</span><span class="pun">/</span><span class="pln">kvm</span><span class="pun">-</span><span class="pln">all</span><span class="pun">.</span><span class="pln">c</span><span class="pun">:</span><span class="lit">404</span><span class="pln">
</span><span class="com">#4  0x000055ab8df18b33 in address_space_update_topology_pass (as=0x55ab8ea21880 &lt;address_space_memory&gt;, old_view=0x7f0cc4118ca0, </span><span class="pln">
    new_view</span><span class="pun">=</span><span class="lit">0x7f0aa804d380</span><span class="pun">,</span><span class="pln"> adding</span><span class="pun">=</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> at </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">liqiang02</span><span class="pun">/</span><span class="pln">qemu0711</span><span class="pun">/</span><span class="pln">qemu</span><span class="pun">-</span><span class="lit">2.8</span><span class="pun">/</span><span class="pln">memory</span><span class="pun">.</span><span class="pln">c</span><span class="pun">:</span><span class="lit">854</span><span class="pln">
</span><span class="com">#5  0x000055ab8df18d9b in address_space_update_topology (as=0x55ab8ea21880 &lt;address_space_memory&gt;)</span><span class="pln">
    at </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">liqiang02</span><span class="pun">/</span><span class="pln">qemu0711</span><span class="pun">/</span><span class="pln">qemu</span><span class="pun">-</span><span class="lit">2.8</span><span class="pun">/</span><span class="pln">memory</span><span class="pun">.</span><span class="pln">c</span><span class="pun">:</span><span class="lit">886</span><span class="pln">
</span><span class="com">#6  0x000055ab8df18ed6 in memory_region_transaction_commit () at /home/liqiang02/qemu0711/qemu-2.8/memory.c:926</span><span class="pln">
</span><span class="com">#7  0x000055ab8df1c9ef in memory_global_dirty_log_start () at /home/liqiang02/qemu0711/qemu-2.8/memory.c:2276</span><span class="pln">
</span><span class="com">#8  0x000055ab8df30ce6 in ram_save_init_globals () at /home/liqiang02/qemu0711/qemu-2.8/migration/ram.c:1939</span><span class="pln">
</span><span class="com">#9  0x000055ab8df30d36 in ram_save_setup (f=0x55ab90d874c0, opaque=0x0) at /home/liqiang02/qemu0711/qemu-2.8/migration/ram.c:1960</span><span class="pln">
</span><span class="com">#10 0x000055ab8df3609a in qemu_savevm_state_begin (f=0x55ab90d874c0, params=0x55ab8ea0178c &lt;current_migration+204&gt;)</span><span class="pln">
    at </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">liqiang02</span><span class="pun">/</span><span class="pln">qemu0711</span><span class="pun">/</span><span class="pln">qemu</span><span class="pun">-</span><span class="lit">2.8</span><span class="pun">/</span><span class="pln">migration</span><span class="pun">/</span><span class="pln">savevm</span><span class="pun">.</span><span class="pln">c</span><span class="pun">:</span><span class="lit">956</span><span class="pln">
</span><span class="com">#11 0x000055ab8e25d9b8 in migration_thread (opaque=0x55ab8ea016c0 &lt;current_migration&gt;) at migration/migration.c:1829</span><span class="pln">
</span><span class="com">#12 0x00007f0cda1fd494 in start_thread () from /lib/x86_64-linux-gnu/libpthread.so.0</span><span class="pln">
</span><span class="com">#13 0x00007f0cd9f3facf in clone () from /lib/x86_64-linux-gnu/libc.so.6</span></code></pre></div></div>

<p>Here we know the memory topology doesn’t change but only adds the ‘KVM_MEM_LOG_DIRTY_PAGES’.</p>

<p>Now let’s go to the kvm part, as we can see the qemu sends ‘KVM_SET_USER_MEMORY_REGION’ ioctl
and the kernel will go to ‘__kvm_set_memory_region’</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">int</span><span class="pln"> __kvm_set_memory_region</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> kvm </span><span class="pun">*</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln">
                </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">struct</span><span class="pln"> kvm_userspace_memory_region </span><span class="pun">*</span><span class="pln">mem</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">npages</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">old</span><span class="pun">.</span><span class="pln">npages</span><span class="pun">)</span><span class="pln">
            change </span><span class="pun">=</span><span class="pln"> KVM_MR_CREATE</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">/* Modify an existing slot. */</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">mem</span><span class="pun">-&gt;</span><span class="pln">userspace_addr </span><span class="pun">!=</span><span class="pln"> old</span><span class="pun">.</span><span class="pln">userspace_addr</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln">
                </span><span class="pun">(</span><span class="pln">npages </span><span class="pun">!=</span><span class="pln"> old</span><span class="pun">.</span><span class="pln">npages</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln">
                </span><span class="pun">((</span><span class="kwd">new</span><span class="pun">.</span><span class="pln">flags </span><span class="pun">^</span><span class="pln"> old</span><span class="pun">.</span><span class="pln">flags</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln"> KVM_MEM_READONLY</span><span class="pun">))</span><span class="pln">
                </span><span class="kwd">goto</span><span class="pln"> </span><span class="kwd">out</span><span class="pun">;</span><span class="pln">

            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">base_gfn </span><span class="pun">!=</span><span class="pln"> old</span><span class="pun">.</span><span class="pln">base_gfn</span><span class="pun">)</span><span class="pln">
                change </span><span class="pun">=</span><span class="pln"> KVM_MR_MOVE</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">new</span><span class="pun">.</span><span class="pln">flags </span><span class="pun">!=</span><span class="pln"> old</span><span class="pun">.</span><span class="pln">flags</span><span class="pun">)</span><span class="pln">
                change </span><span class="pun">=</span><span class="pln"> KVM_MR_FLAGS_ONLY</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">/* Nothing to change. */</span><span class="pln">
                r </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
                </span><span class="kwd">goto</span><span class="pln"> </span><span class="kwd">out</span><span class="pun">;</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
</span><span class="pun">...</span><span class="pln">

    </span><span class="com">/* Allocate page dirty bitmap if needed */</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="kwd">new</span><span class="pun">.</span><span class="pln">flags </span><span class="pun">&amp;</span><span class="pln"> KVM_MEM_LOG_DIRTY_PAGES</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">!</span><span class="kwd">new</span><span class="pun">.</span><span class="pln">dirty_bitmap</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">kvm_create_dirty_bitmap</span><span class="pun">(&amp;</span><span class="kwd">new</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">
            </span><span class="kwd">goto</span><span class="pln"> out_free</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">...</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>The most important work here is to call ‘kvm_create_dirty_bitmap’ to allocate a bitmap.
for every memslot it will allocate memslot-&gt;dirty_bitmap in this function.
    /*
    * Allocation size is twice as large as the actual dirty bitmap size.
    * See x86’s kvm_vm_ioctl_get_dirty_log() why this is needed.
    */
    static int kvm_create_dirty_bitmap(struct kvm_memory_slot *memslot)
    {
        unsigned long dirty_bytes = 2 * kvm_dirty_bitmap_bytes(memslot);</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="pln">    memslot</span><span class="pun">-&gt;</span><span class="pln">dirty_bitmap </span><span class="pun">=</span><span class="pln"> kvm_kvzalloc</span><span class="pun">(</span><span class="pln">dirty_bytes</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">memslot</span><span class="pun">-&gt;</span><span class="pln">dirty_bitmap</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ENOMEM</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>Then goes to ‘kvm_arch_commit_memory_region’ and ‘kvm_mmu_slot_remove_write_access’.
Notice, this is not the newest implementation but an old kernel (3.13).</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">void</span><span class="pln"> kvm_mmu_slot_remove_write_access</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> kvm </span><span class="pun">*</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> slot</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">struct</span><span class="pln"> kvm_memory_slot </span><span class="pun">*</span><span class="pln">memslot</span><span class="pun">;</span><span class="pln">
    </span><span class="typ">gfn_t</span><span class="pln"> last_gfn</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">;</span><span class="pln">

    memslot </span><span class="pun">=</span><span class="pln"> id_to_memslot</span><span class="pun">(</span><span class="pln">kvm</span><span class="pun">-&gt;</span><span class="pln">memslots</span><span class="pun">,</span><span class="pln"> slot</span><span class="pun">);</span><span class="pln">
    last_gfn </span><span class="pun">=</span><span class="pln"> memslot</span><span class="pun">-&gt;</span><span class="pln">base_gfn </span><span class="pun">+</span><span class="pln"> memslot</span><span class="pun">-&gt;</span><span class="pln">npages </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">

    spin_lock</span><span class="pun">(&amp;</span><span class="pln">kvm</span><span class="pun">-&gt;</span><span class="pln">mmu_lock</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">=</span><span class="pln"> PT_PAGE_TABLE_LEVEL</span><span class="pun">;</span><span class="pln">
        i </span><span class="pun">&lt;</span><span class="pln"> PT_PAGE_TABLE_LEVEL </span><span class="pun">+</span><span class="pln"> KVM_NR_PAGE_SIZES</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="pun">*</span><span class="pln">rmapp</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> last_index</span><span class="pun">,</span><span class="pln"> index</span><span class="pun">;</span><span class="pln">

        rmapp </span><span class="pun">=</span><span class="pln"> memslot</span><span class="pun">-&gt;</span><span class="pln">arch</span><span class="pun">.</span><span class="pln">rmap</span><span class="pun">[</span><span class="pln">i </span><span class="pun">-</span><span class="pln"> PT_PAGE_TABLE_LEVEL</span><span class="pun">];</span><span class="pln">
        last_index </span><span class="pun">=</span><span class="pln"> gfn_to_index</span><span class="pun">(</span><span class="pln">last_gfn</span><span class="pun">,</span><span class="pln"> memslot</span><span class="pun">-&gt;</span><span class="pln">base_gfn</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">);</span><span class="pln">

        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> index </span><span class="pun">&lt;=</span><span class="pln"> last_index</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> </span><span class="pun">++</span><span class="pln">rmapp</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(*</span><span class="pln">rmapp</span><span class="pun">)</span><span class="pln">
                __rmap_write_protect</span><span class="pun">(</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> rmapp</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">);</span><span class="pln">

            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">need_resched</span><span class="pun">()</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> spin_needbreak</span><span class="pun">(&amp;</span><span class="pln">kvm</span><span class="pun">-&gt;</span><span class="pln">mmu_lock</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                kvm_flush_remote_tlbs</span><span class="pun">(</span><span class="pln">kvm</span><span class="pun">);</span><span class="pln">
                cond_resched_lock</span><span class="pun">(&amp;</span><span class="pln">kvm</span><span class="pun">-&gt;</span><span class="pln">mmu_lock</span><span class="pun">);</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    kvm_flush_remote_tlbs</span><span class="pun">(</span><span class="pln">kvm</span><span class="pun">);</span><span class="pln">
    spin_unlock</span><span class="pun">(&amp;</span><span class="pln">kvm</span><span class="pun">-&gt;</span><span class="pln">mmu_lock</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>As the function name implies, it remove write access of this memory slot.</p>

<p>Here we just focus the normal 4k page, not 2M and 1G page. The ‘memslot-&gt;arch.rmp’ is a gfn-&gt;spte map, say given a gfn we can find the correspoding spte.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">static</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln"> __rmap_write_protect</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> kvm </span><span class="pun">*</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="pun">*</span><span class="pln">rmapp</span><span class="pun">,</span><span class="pln">
                </span><span class="kwd">bool</span><span class="pln"> pt_protect</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    u64 </span><span class="pun">*</span><span class="pln">sptep</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">struct</span><span class="pln"> rmap_iterator iter</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">bool</span><span class="pln"> flush </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">sptep </span><span class="pun">=</span><span class="pln"> rmap_get_first</span><span class="pun">(*</span><span class="pln">rmapp</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">iter</span><span class="pun">);</span><span class="pln"> sptep</span><span class="pun">;)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        BUG_ON</span><span class="pun">(!(*</span><span class="pln">sptep </span><span class="pun">&amp;</span><span class="pln"> PT_PRESENT_MASK</span><span class="pun">));</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">spte_write_protect</span><span class="pun">(</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> sptep</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">flush</span><span class="pun">,</span><span class="pln"> pt_protect</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            sptep </span><span class="pun">=</span><span class="pln"> rmap_get_first</span><span class="pun">(*</span><span class="pln">rmapp</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">iter</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">continue</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        sptep </span><span class="pun">=</span><span class="pln"> rmap_get_next</span><span class="pun">(&amp;</span><span class="pln">iter</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> flush</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln">
spte_write_protect</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> kvm </span><span class="pun">*</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> u64 </span><span class="pun">*</span><span class="pln">sptep</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln"> </span><span class="pun">*</span><span class="pln">flush</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln"> pt_protect</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    u64 spte </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">sptep</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">is_writable_pte</span><span class="pun">(</span><span class="pln">spte</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln">
        </span><span class="pun">!(</span><span class="pln">pt_protect </span><span class="pun">&amp;&amp;</span><span class="pln"> spte_is_locklessly_modifiable</span><span class="pun">(</span><span class="pln">spte</span><span class="pun">)))</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">

    rmap_printk</span><span class="pun">(</span><span class="str">"rmap_write_protect: spte %p %llx
"</span><span class="pun">,</span><span class="pln"> sptep</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*</span><span class="pln">sptep</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">__drop_large_spte</span><span class="pun">(</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> sptep</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="pun">*</span><span class="pln">flush </span><span class="pun">|=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pt_protect</span><span class="pun">)</span><span class="pln">
        spte </span><span class="pun">&amp;=</span><span class="pln"> </span><span class="pun">~</span><span class="pln">SPTE_MMU_WRITEABLE</span><span class="pun">;</span><span class="pln">
    spte </span><span class="pun">=</span><span class="pln"> spte </span><span class="pun">&amp;</span><span class="pln"> </span><span class="pun">~</span><span class="pln">PT_WRITABLE_MASK</span><span class="pun">;</span><span class="pln">

    </span><span class="pun">*</span><span class="pln">flush </span><span class="pun">|=</span><span class="pln"> mmu_spte_update</span><span class="pun">(</span><span class="pln">sptep</span><span class="pun">,</span><span class="pln"> spte</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>So here for every gfn, we remove the write access. After return from this ioctl, the guest’s RAM
has been marked no write access, every write to this will exit to KVM make the page dirty. This means ‘start the dirty log’.</p>

<p>When the guest write the memory, it will trigger the ept violation vmexit. Then calls ‘tdp_page_fault’.
Because this is caused by write protection, the CPU will set the error code to ‘PFERR_WRITE_MASK’ so the ‘fast_page_fault’
and ‘fast_pf_fix_direct_spte’ will be called.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">static</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln">
fast_pf_fix_direct_spte</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> kvm_vcpu </span><span class="pun">*</span><span class="pln">vcpu</span><span class="pun">,</span><span class="pln"> u64 </span><span class="pun">*</span><span class="pln">sptep</span><span class="pun">,</span><span class="pln"> u64 spte</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">struct</span><span class="pln"> kvm_mmu_page </span><span class="pun">*</span><span class="pln">sp </span><span class="pun">=</span><span class="pln"> page_header</span><span class="pun">(</span><span class="pln">__pa</span><span class="pun">(</span><span class="pln">sptep</span><span class="pun">));</span><span class="pln">
    </span><span class="typ">gfn_t</span><span class="pln"> gfn</span><span class="pun">;</span><span class="pln">

    WARN_ON</span><span class="pun">(!</span><span class="pln">sp</span><span class="pun">-&gt;</span><span class="pln">role</span><span class="pun">.</span><span class="pln">direct</span><span class="pun">);</span><span class="pln">

    </span><span class="com">/*
    * The gfn of direct spte is stable since it is calculated
    * by sp-&gt;gfn.
    */</span><span class="pln">
    gfn </span><span class="pun">=</span><span class="pln"> kvm_mmu_page_get_gfn</span><span class="pun">(</span><span class="pln">sp</span><span class="pun">,</span><span class="pln"> sptep </span><span class="pun">-</span><span class="pln"> sp</span><span class="pun">-&gt;</span><span class="pln">spt</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cmpxchg64</span><span class="pun">(</span><span class="pln">sptep</span><span class="pun">,</span><span class="pln"> spte</span><span class="pun">,</span><span class="pln"> spte </span><span class="pun">|</span><span class="pln"> PT_WRITABLE_MASK</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> spte</span><span class="pun">)</span><span class="pln">
        mark_page_dirty</span><span class="pun">(</span><span class="pln">vcpu</span><span class="pun">-&gt;</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> gfn</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">void</span><span class="pln"> mark_page_dirty</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> kvm </span><span class="pun">*</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> </span><span class="typ">gfn_t</span><span class="pln"> gfn</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">struct</span><span class="pln"> kvm_memory_slot </span><span class="pun">*</span><span class="pln">memslot</span><span class="pun">;</span><span class="pln">

    memslot </span><span class="pun">=</span><span class="pln"> gfn_to_memslot</span><span class="pun">(</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> gfn</span><span class="pun">);</span><span class="pln">
    mark_page_dirty_in_slot</span><span class="pun">(</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> memslot</span><span class="pun">,</span><span class="pln"> gfn</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">void</span><span class="pln"> mark_page_dirty_in_slot</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> kvm </span><span class="pun">*</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">struct</span><span class="pln"> kvm_memory_slot </span><span class="pun">*</span><span class="pln">memslot</span><span class="pun">,</span><span class="pln">
                </span><span class="typ">gfn_t</span><span class="pln"> gfn</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">memslot </span><span class="pun">&amp;&amp;</span><span class="pln"> memslot</span><span class="pun">-&gt;</span><span class="pln">dirty_bitmap</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> rel_gfn </span><span class="pun">=</span><span class="pln"> gfn </span><span class="pun">-</span><span class="pln"> memslot</span><span class="pun">-&gt;</span><span class="pln">base_gfn</span><span class="pun">;</span><span class="pln">

        set_bit_le</span><span class="pun">(</span><span class="pln">rel_gfn</span><span class="pun">,</span><span class="pln"> memslot</span><span class="pun">-&gt;</span><span class="pln">dirty_bitmap</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>Here we can see, it will set the spte writeable again and set the dirty bitmap.</p>

<h3> qemu sync dirty log with kvm </h3>

<p>Let’s go back to ‘ram_save_init_globals’ after telling the kvm to begin start dirty log, it calls ‘migration_bitmap_sync’.
This function calls ‘memory_global_dirty_log_sync’ to get the dirty map from kvm. ‘kvm_log_sync’ is used to do this.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> kvm_log_sync</span><span class="pun">(</span><span class="typ">MemoryListener</span><span class="pln"> </span><span class="pun">*</span><span class="pln">listener</span><span class="pun">,</span><span class="pln">
                        </span><span class="typ">MemoryRegionSection</span><span class="pln"> </span><span class="pun">*</span><span class="pln">section</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="typ">KVMMemoryListener</span><span class="pln"> </span><span class="pun">*</span><span class="pln">kml </span><span class="pun">=</span><span class="pln"> container_of</span><span class="pun">(</span><span class="pln">listener</span><span class="pun">,</span><span class="pln"> </span><span class="typ">KVMMemoryListener</span><span class="pun">,</span><span class="pln"> listener</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> r</span><span class="pun">;</span><span class="pln">

    r </span><span class="pun">=</span><span class="pln"> kvm_physical_sync_dirty_bitmap</span><span class="pun">(</span><span class="pln">kml</span><span class="pun">,</span><span class="pln"> section</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">r </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        abort</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> kvm_physical_sync_dirty_bitmap</span><span class="pun">(</span><span class="typ">KVMMemoryListener</span><span class="pln"> </span><span class="pun">*</span><span class="pln">kml</span><span class="pun">,</span><span class="pln">
                                        </span><span class="typ">MemoryRegionSection</span><span class="pln"> </span><span class="pun">*</span><span class="pln">section</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="typ">KVMState</span><span class="pln"> </span><span class="pun">*</span><span class="pln">s </span><span class="pun">=</span><span class="pln"> kvm_state</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> allocated_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">struct</span><span class="pln"> kvm_dirty_log d </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{};</span><span class="pln">
    </span><span class="typ">KVMSlot</span><span class="pln"> </span><span class="pun">*</span><span class="pln">mem</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> ret </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    hwaddr start_addr </span><span class="pun">=</span><span class="pln"> section</span><span class="pun">-&gt;</span><span class="pln">offset_within_address_space</span><span class="pun">;</span><span class="pln">
    hwaddr end_addr </span><span class="pun">=</span><span class="pln"> start_addr </span><span class="pun">+</span><span class="pln"> int128_get64</span><span class="pun">(</span><span class="pln">section</span><span class="pun">-&gt;</span><span class="pln">size</span><span class="pun">);</span><span class="pln">

    d</span><span class="pun">.</span><span class="pln">dirty_bitmap </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">start_addr </span><span class="pun">&lt;</span><span class="pln"> end_addr</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        mem </span><span class="pun">=</span><span class="pln"> kvm_lookup_overlapping_slot</span><span class="pun">(</span><span class="pln">kml</span><span class="pun">,</span><span class="pln"> start_addr</span><span class="pun">,</span><span class="pln"> end_addr</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">mem </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="pun">...</span><span class="pln">
        size </span><span class="pun">=</span><span class="pln"> ALIGN</span><span class="pun">(((</span><span class="pln">mem</span><span class="pun">-&gt;</span><span class="pln">memory_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> TARGET_PAGE_BITS</span><span class="pun">),</span><span class="pln">
                    </span><span class="com">/*HOST_LONG_BITS*/</span><span class="pln"> </span><span class="lit">64</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">8</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">d</span><span class="pun">.</span><span class="pln">dirty_bitmap</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            d</span><span class="pun">.</span><span class="pln">dirty_bitmap </span><span class="pun">=</span><span class="pln"> g_malloc</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;</span><span class="pln"> allocated_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            d</span><span class="pun">.</span><span class="pln">dirty_bitmap </span><span class="pun">=</span><span class="pln"> g_realloc</span><span class="pun">(</span><span class="pln">d</span><span class="pun">.</span><span class="pln">dirty_bitmap</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        allocated_size </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">
        memset</span><span class="pun">(</span><span class="pln">d</span><span class="pun">.</span><span class="pln">dirty_bitmap</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> allocated_size</span><span class="pun">);</span><span class="pln">

        d</span><span class="pun">.</span><span class="pln">slot </span><span class="pun">=</span><span class="pln"> mem</span><span class="pun">-&gt;</span><span class="pln">slot </span><span class="pun">|</span><span class="pln"> </span><span class="pun">(</span><span class="pln">kml</span><span class="pun">-&gt;</span><span class="pln">as_id </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">16</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">kvm_vm_ioctl</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="pln"> KVM_GET_DIRTY_LOG</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">d</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            DPRINTF</span><span class="pun">(</span><span class="str">"ioctl failed %d
"</span><span class="pun">,</span><span class="pln"> errno</span><span class="pun">);</span><span class="pln">
            ret </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        kvm_get_dirty_pages_log_range</span><span class="pun">(</span><span class="pln">section</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">.</span><span class="pln">dirty_bitmap</span><span class="pun">);</span><span class="pln">
        start_addr </span><span class="pun">=</span><span class="pln"> mem</span><span class="pun">-&gt;</span><span class="pln">start_addr </span><span class="pun">+</span><span class="pln"> mem</span><span class="pun">-&gt;</span><span class="pln">memory_size</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    g_free</span><span class="pun">(</span><span class="pln">d</span><span class="pun">.</span><span class="pln">dirty_bitmap</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> ret</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>Here we can see the qemu sends out a ‘KVM_GET_DIRTY_LOG’ ioctl. In kvm</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">int</span><span class="pln"> kvm_vm_ioctl_get_dirty_log</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> kvm </span><span class="pun">*</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">struct</span><span class="pln"> kvm_dirty_log </span><span class="pun">*</span><span class="pln">log</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> r</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">struct</span><span class="pln"> kvm_memory_slot </span><span class="pun">*</span><span class="pln">memslot</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> n</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="pun">*</span><span class="pln">dirty_bitmap</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="pun">*</span><span class="pln">dirty_bitmap_buffer</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">bool</span><span class="pln"> is_dirty </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">

    mutex_lock</span><span class="pun">(&amp;</span><span class="pln">kvm</span><span class="pun">-&gt;</span><span class="pln">slots_lock</span><span class="pun">);</span><span class="pln">

    r </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">EINVAL</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">log</span><span class="pun">-&gt;</span><span class="pln">slot </span><span class="pun">&gt;=</span><span class="pln"> KVM_USER_MEM_SLOTS</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">goto</span><span class="pln"> </span><span class="kwd">out</span><span class="pun">;</span><span class="pln">

    memslot </span><span class="pun">=</span><span class="pln"> id_to_memslot</span><span class="pun">(</span><span class="pln">kvm</span><span class="pun">-&gt;</span><span class="pln">memslots</span><span class="pun">,</span><span class="pln"> log</span><span class="pun">-&gt;</span><span class="pln">slot</span><span class="pun">);</span><span class="pln">

    dirty_bitmap </span><span class="pun">=</span><span class="pln"> memslot</span><span class="pun">-&gt;</span><span class="pln">dirty_bitmap</span><span class="pun">;</span><span class="pln">
    r </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ENOENT</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">dirty_bitmap</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">goto</span><span class="pln"> </span><span class="kwd">out</span><span class="pun">;</span><span class="pln">

    n </span><span class="pun">=</span><span class="pln"> kvm_dirty_bitmap_bytes</span><span class="pun">(</span><span class="pln">memslot</span><span class="pun">);</span><span class="pln">

    dirty_bitmap_buffer </span><span class="pun">=</span><span class="pln"> dirty_bitmap </span><span class="pun">+</span><span class="pln"> n </span><span class="pun">/</span><span class="pln"> </span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">long</span><span class="pun">);</span><span class="pln">
    memset</span><span class="pun">(</span><span class="pln">dirty_bitmap_buffer</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> n</span><span class="pun">);</span><span class="pln">

    spin_lock</span><span class="pun">(&amp;</span><span class="pln">kvm</span><span class="pun">-&gt;</span><span class="pln">mmu_lock</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> n </span><span class="pun">/</span><span class="pln"> </span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">long</span><span class="pun">);</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> mask</span><span class="pun">;</span><span class="pln">
        </span><span class="typ">gfn_t</span><span class="pln"> offset</span><span class="pun">;</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">dirty_bitmap</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span><span class="pln">
            </span><span class="kwd">continue</span><span class="pun">;</span><span class="pln">

        is_dirty </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">

        mask </span><span class="pun">=</span><span class="pln"> xchg</span><span class="pun">(&amp;</span><span class="pln">dirty_bitmap</span><span class="pun">[</span><span class="pln">i</span><span class="pun">],</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">
        dirty_bitmap_buffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> mask</span><span class="pun">;</span><span class="pln">

        offset </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">*</span><span class="pln"> BITS_PER_LONG</span><span class="pun">;</span><span class="pln">
        kvm_mmu_write_protect_pt_masked</span><span class="pun">(</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> memslot</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">,</span><span class="pln"> mask</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">is_dirty</span><span class="pun">)</span><span class="pln">
        kvm_flush_remote_tlbs</span><span class="pun">(</span><span class="pln">kvm</span><span class="pun">);</span><span class="pln">

    spin_unlock</span><span class="pun">(&amp;</span><span class="pln">kvm</span><span class="pun">-&gt;</span><span class="pln">mmu_lock</span><span class="pun">);</span><span class="pln">

    r </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">EFAULT</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">copy_to_user</span><span class="pun">(</span><span class="pln">log</span><span class="pun">-&gt;</span><span class="pln">dirty_bitmap</span><span class="pun">,</span><span class="pln"> dirty_bitmap_buffer</span><span class="pun">,</span><span class="pln"> n</span><span class="pun">))</span><span class="pln">
        </span><span class="kwd">goto</span><span class="pln"> </span><span class="kwd">out</span><span class="pun">;</span><span class="pln">

    r </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">out</span><span class="pun">:</span><span class="pln">
    mutex_unlock</span><span class="pun">(&amp;</span><span class="pln">kvm</span><span class="pun">-&gt;</span><span class="pln">slots_lock</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> r</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>It copys the dirty bitmap to userspace and also set the spte to write protection using ‘kvm_mmu_write_protect_pt_masked’.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">void</span><span class="pln"> kvm_mmu_write_protect_pt_masked</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> kvm </span><span class="pun">*</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln">
                    </span><span class="kwd">struct</span><span class="pln"> kvm_memory_slot </span><span class="pun">*</span><span class="pln">slot</span><span class="pun">,</span><span class="pln">
                    </span><span class="typ">gfn_t</span><span class="pln"> gfn_offset</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> mask</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="pun">*</span><span class="pln">rmapp</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">mask</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        rmapp </span><span class="pun">=</span><span class="pln"> __gfn_to_rmap</span><span class="pun">(</span><span class="pln">slot</span><span class="pun">-&gt;</span><span class="pln">base_gfn </span><span class="pun">+</span><span class="pln"> gfn_offset </span><span class="pun">+</span><span class="pln"> __ffs</span><span class="pun">(</span><span class="pln">mask</span><span class="pun">),</span><span class="pln">
                    PT_PAGE_TABLE_LEVEL</span><span class="pun">,</span><span class="pln"> slot</span><span class="pun">);</span><span class="pln">
        __rmap_write_protect</span><span class="pun">(</span><span class="pln">kvm</span><span class="pun">,</span><span class="pln"> rmapp</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">);</span><span class="pln">

        </span><span class="com">/* clear the first set bit */</span><span class="pln">
        mask </span><span class="pun">&amp;=</span><span class="pln"> mask </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>So next time, the guest write to this pfn page, it will mark as a dirty page again.</p>

<p>kvm_get_dirty_pages_log_range–&gt;cpu_physical_memory_set_dirty_lebitmap.</p>

<p>In the later function, it sets ‘ram_list.dirty_memory[i])-&gt;blocks’ dirty bitmap.
This dirty bitmap lays in ‘ram_list’, not with the migration.</p>

<h3> qemu copy dirty bitmap to migration bitmap </h3>

<p>In ‘migration_bitmap_sync’ after the call of ‘memory_global_dirty_log_sync’, 
‘migration_bitmap_sync_range’ will be called for every block. This calls copy ‘ram_list’s
dirty bitmap to ‘migration_bitmap_rcu-&gt;bmap’.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> migration_bitmap_sync_range</span><span class="pun">(</span><span class="typ">ram_addr_t</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ram_addr_t</span><span class="pln"> length</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="pun">*</span><span class="pln">bitmap</span><span class="pun">;</span><span class="pln">
    bitmap </span><span class="pun">=</span><span class="pln"> atomic_rcu_read</span><span class="pun">(&amp;</span><span class="pln">migration_bitmap_rcu</span><span class="pun">)-&gt;</span><span class="pln">bmap</span><span class="pun">;</span><span class="pln">
    migration_dirty_pages </span><span class="pun">+=</span><span class="pln">
        cpu_physical_memory_sync_dirty_bitmap</span><span class="pun">(</span><span class="pln">bitmap</span><span class="pun">,</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> length</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">


</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">inline</span><span class="pln">
</span><span class="typ">uint64_t</span><span class="pln"> cpu_physical_memory_sync_dirty_bitmap</span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="pun">*</span><span class="pln">dest</span><span class="pun">,</span><span class="pln">
                                            </span><span class="typ">ram_addr_t</span><span class="pln"> start</span><span class="pun">,</span><span class="pln">
                                            </span><span class="typ">ram_addr_t</span><span class="pln"> length</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="typ">ram_addr_t</span><span class="pln"> addr</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> page </span><span class="pun">=</span><span class="pln"> BIT_WORD</span><span class="pun">(</span><span class="pln">start </span><span class="pun">&gt;&gt;</span><span class="pln"> TARGET_PAGE_BITS</span><span class="pun">);</span><span class="pln">
    </span><span class="typ">uint64_t</span><span class="pln"> num_dirty </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/* start address is aligned at the start of a word? */</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(((</span><span class="pln">page </span><span class="pun">*</span><span class="pln"> BITS_PER_LONG</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> TARGET_PAGE_BITS</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> start</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
       </span><span class="pun">...</span><span class="pln">
        src </span><span class="pun">=</span><span class="pln"> atomic_rcu_read</span><span class="pun">(</span><span class="pln">
                </span><span class="pun">&amp;</span><span class="pln">ram_list</span><span class="pun">.</span><span class="pln">dirty_memory</span><span class="pun">[</span><span class="pln">DIRTY_MEMORY_MIGRATION</span><span class="pun">])-&gt;</span><span class="pln">blocks</span><span class="pun">;</span><span class="pln">

        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">k </span><span class="pun">=</span><span class="pln"> page</span><span class="pun">;</span><span class="pln"> k </span><span class="pun">&lt;</span><span class="pln"> page </span><span class="pun">+</span><span class="pln"> nr</span><span class="pun">;</span><span class="pln"> k</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">src</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">][</span><span class="pln">offset</span><span class="pun">])</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> bits </span><span class="pun">=</span><span class="pln"> atomic_xchg</span><span class="pun">(&amp;</span><span class="pln">src</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">][</span><span class="pln">offset</span><span class="pun">],</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">
                </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> new_dirty</span><span class="pun">;</span><span class="pln">
                new_dirty </span><span class="pun">=</span><span class="pln"> </span><span class="pun">~</span><span class="pln">dest</span><span class="pun">[</span><span class="pln">k</span><span class="pun">];</span><span class="pln">
                dest</span><span class="pun">[</span><span class="pln">k</span><span class="pun">]</span><span class="pln"> </span><span class="pun">|=</span><span class="pln"> bits</span><span class="pun">;</span><span class="pln">
                new_dirty </span><span class="pun">&amp;=</span><span class="pln"> bits</span><span class="pun">;</span><span class="pln">
                num_dirty </span><span class="pun">+=</span><span class="pln"> ctpopl</span><span class="pun">(</span><span class="pln">new_dirty</span><span class="pun">);</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
   </span><span class="pun">...</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> num_dirty</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>Now, the ‘migration_bitmap_rcu-&gt;bmap’ know all the dirty pages. Of course it is not very useful for
the setup process, as qemu already set all of ‘migration_bitmap_rcu-&gt;bmap’ to 1.</p>

<h3> find the dirty pages and send out </h3>

<p>After the setup, we go to the most important process, iterate send pages to the dest and after a water mark 
reached, stop the machine and send the other all dirty pages to dest. The overview can short as following.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">s</span><span class="pun">-&gt;</span><span class="pln">state </span><span class="pun">==</span><span class="pln"> MIGRATION_STATUS_ACTIVE </span><span class="pun">||</span><span class="pln">
        s</span><span class="pun">-&gt;</span><span class="pln">state </span><span class="pun">==</span><span class="pln"> MIGRATION_STATUS_POSTCOPY_ACTIVE</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="pun">...</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">qemu_file_rate_limit</span><span class="pun">(</span><span class="pln">s</span><span class="pun">-&gt;</span><span class="pln">to_dst_file</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="typ">uint64_t</span><span class="pln"> pend_post</span><span class="pun">,</span><span class="pln"> pend_nonpost</span><span class="pun">;</span><span class="pln">

            qemu_savevm_state_pending</span><span class="pun">(</span><span class="pln">s</span><span class="pun">-&gt;</span><span class="pln">to_dst_file</span><span class="pun">,</span><span class="pln"> max_size</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">pend_nonpost</span><span class="pun">,</span><span class="pln">
                                    </span><span class="pun">&amp;</span><span class="pln">pend_post</span><span class="pun">);</span><span class="pln">
            </span><span class="pun">...</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pending_size </span><span class="pun">&amp;&amp;</span><span class="pln"> pending_size </span><span class="pun">&gt;=</span><span class="pln"> max_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="com">/* Still a significant amount to transfer */</span><span class="pln">

                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">migrate_postcopy_ram</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln">
                    s</span><span class="pun">-&gt;</span><span class="pln">state </span><span class="pun">!=</span><span class="pln"> MIGRATION_STATUS_POSTCOPY_ACTIVE </span><span class="pun">&amp;&amp;</span><span class="pln">
                    pend_nonpost </span><span class="pun">&lt;=</span><span class="pln"> max_size </span><span class="pun">&amp;&amp;</span><span class="pln">
                    atomic_read</span><span class="pun">(&amp;</span><span class="pln">s</span><span class="pun">-&gt;</span><span class="pln">start_postcopy</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

                    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">postcopy_start</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">old_vm_running</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                        current_active_state </span><span class="pun">=</span><span class="pln"> MIGRATION_STATUS_POSTCOPY_ACTIVE</span><span class="pun">;</span><span class="pln">
                        entered_postcopy </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
                    </span><span class="pun">}</span><span class="pln">

                    </span><span class="kwd">continue</span><span class="pun">;</span><span class="pln">
                </span><span class="pun">}</span><span class="pln">
                </span><span class="com">/* Just another iteration step */</span><span class="pln">
                qemu_savevm_state_iterate</span><span class="pun">(</span><span class="pln">s</span><span class="pun">-&gt;</span><span class="pln">to_dst_file</span><span class="pun">,</span><span class="pln"> entered_postcopy</span><span class="pun">);</span><span class="pln">
            </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                trace_migration_thread_low_pending</span><span class="pun">(</span><span class="pln">pending_size</span><span class="pun">);</span><span class="pln">
                migration_completion</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="pln"> current_active_state</span><span class="pun">,</span><span class="pln">
                                    </span><span class="pun">&amp;</span><span class="pln">old_vm_running</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">start_time</span><span class="pun">);</span><span class="pln">
                </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span></code></pre></div></div>

<p>Here show the three most important function. ‘qemu_savevm_state_pending’, ‘qemu_savevm_state_iterate’ and
‘migration_completion’. For ram, the save pending function is ‘ram_save_pending’.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> ram_save_pending</span><span class="pun">(</span><span class="typ">QEMUFile</span><span class="pln"> </span><span class="pun">*</span><span class="pln">f</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="pun">*</span><span class="pln">opaque</span><span class="pun">,</span><span class="pln"> </span><span class="typ">uint64_t</span><span class="pln"> max_size</span><span class="pun">,</span><span class="pln">
                            </span><span class="typ">uint64_t</span><span class="pln"> </span><span class="pun">*</span><span class="pln">non_postcopiable_pending</span><span class="pun">,</span><span class="pln">
                            </span><span class="typ">uint64_t</span><span class="pln"> </span><span class="pun">*</span><span class="pln">postcopiable_pending</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="typ">uint64_t</span><span class="pln"> remaining_size</span><span class="pun">;</span><span class="pln">

    remaining_size </span><span class="pun">=</span><span class="pln"> ram_save_remaining</span><span class="pun">()</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> TARGET_PAGE_SIZE</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">migration_in_postcopy</span><span class="pun">(</span><span class="pln">migrate_get_current</span><span class="pun">())</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln">
        remaining_size </span><span class="pun">&lt;</span><span class="pln"> max_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        qemu_mutex_lock_iothread</span><span class="pun">();</span><span class="pln">
        rcu_read_lock</span><span class="pun">();</span><span class="pln">
        migration_bitmap_sync</span><span class="pun">();</span><span class="pln">
        rcu_read_unlock</span><span class="pun">();</span><span class="pln">
        qemu_mutex_unlock_iothread</span><span class="pun">();</span><span class="pln">
        remaining_size </span><span class="pun">=</span><span class="pln"> ram_save_remaining</span><span class="pun">()</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> TARGET_PAGE_SIZE</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/* We can do postcopy, and all the data is postcopiable */</span><span class="pln">
    </span><span class="pun">*</span><span class="pln">postcopiable_pending </span><span class="pun">+=</span><span class="pln"> remaining_size</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>This function calls ‘migration_bitmap_sync’ to get the dirty page bitmap in ‘migration_bitmap_rcu-&gt;bmap’.
In the iterate function ‘ram_save_iterate’ it calls ‘ram_find_and_save_block’ to find the dirty page and
then send out to the dest host.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">static</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> ram_save_iterate</span><span class="pun">(</span><span class="typ">QEMUFile</span><span class="pln"> </span><span class="pun">*</span><span class="pln">f</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="pun">*</span><span class="pln">opaque</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> ret</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">;</span><span class="pln">
    </span><span class="typ">int64_t</span><span class="pln"> t0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> </span><span class="kwd">done</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

    rcu_read_lock</span><span class="pun">();</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ram_list</span><span class="pun">.</span><span class="pln">version </span><span class="pun">!=</span><span class="pln"> last_version</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        reset_ram_globals</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/* Read version before ram_list.blocks */</span><span class="pln">
    smp_rmb</span><span class="pun">();</span><span class="pln">

    ram_control_before_iterate</span><span class="pun">(</span><span class="pln">f</span><span class="pun">,</span><span class="pln"> RAM_CONTROL_ROUND</span><span class="pun">);</span><span class="pln">

    t0 </span><span class="pun">=</span><span class="pln"> qemu_clock_get_ns</span><span class="pun">(</span><span class="pln">QEMU_CLOCK_REALTIME</span><span class="pun">);</span><span class="pln">
    i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">((</span><span class="pln">ret </span><span class="pun">=</span><span class="pln"> qemu_file_rate_limit</span><span class="pun">(</span><span class="pln">f</span><span class="pun">))</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">int</span><span class="pln"> pages</span><span class="pun">;</span><span class="pln">

        pages </span><span class="pun">=</span><span class="pln"> ram_find_and_save_block</span><span class="pun">(</span><span class="pln">f</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">bytes_transferred</span><span class="pun">);</span><span class="pln">
        </span><span class="com">/* no more pages to sent */</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pages </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">done</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        acct_info</span><span class="pun">.</span><span class="pln">iterations</span><span class="pun">++;</span><span class="pln">

        </span><span class="com">/* we want to check in the 1st loop, just in case it was the 1st time
        and we had to sync the dirty bitmap.
        qemu_get_clock_ns() is a bit expensive, so we only check each some
        iterations
        */</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">i </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">63</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="typ">uint64_t</span><span class="pln"> t1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">qemu_clock_get_ns</span><span class="pun">(</span><span class="pln">QEMU_CLOCK_REALTIME</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> t0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">1000000</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">t1 </span><span class="pun">&gt;</span><span class="pln"> MAX_WAIT</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                DPRINTF</span><span class="pun">(</span><span class="str">"big wait: %"</span><span class="pln"> </span><span class="typ">PRIu64</span><span class="pln"> </span><span class="str">" milliseconds, %d iterations
"</span><span class="pun">,</span><span class="pln">
                        t1</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">);</span><span class="pln">
                </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        i</span><span class="pun">++;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
   </span><span class="pun">...</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">done</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>‘ram_find_and_save_block–&gt;get_queued_page’:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="kwd">static</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln"> get_queued_page</span><span class="pun">(</span><span class="typ">MigrationState</span><span class="pln"> </span><span class="pun">*</span><span class="pln">ms</span><span class="pun">,</span><span class="pln"> </span><span class="typ">PageSearchStatus</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pss</span><span class="pun">,</span><span class="pln">
                            </span><span class="typ">ram_addr_t</span><span class="pln"> </span><span class="pun">*</span><span class="pln">ram_addr_abs</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="typ">RAMBlock</span><span class="pln">  </span><span class="pun">*</span><span class="pln">block</span><span class="pun">;</span><span class="pln">
    </span><span class="typ">ram_addr_t</span><span class="pln"> offset</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">bool</span><span class="pln"> dirty</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        block </span><span class="pun">=</span><span class="pln"> unqueue_page</span><span class="pun">(</span><span class="pln">ms</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">offset</span><span class="pun">,</span><span class="pln"> ram_addr_abs</span><span class="pun">);</span><span class="pln">
        </span><span class="com">/*
        * We're sending this page, and since it's postcopy nothing else
        * will dirty it, and we must make sure it doesn't get sent again
        * even if this queue request was received after the background
        * search already sent it.
        */</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">block</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="pun">*</span><span class="pln">bitmap</span><span class="pun">;</span><span class="pln">
            bitmap </span><span class="pun">=</span><span class="pln"> atomic_rcu_read</span><span class="pun">(&amp;</span><span class="pln">migration_bitmap_rcu</span><span class="pun">)-&gt;</span><span class="pln">bmap</span><span class="pun">;</span><span class="pln">
            dirty </span><span class="pun">=</span><span class="pln"> test_bit</span><span class="pun">(*</span><span class="pln">ram_addr_abs </span><span class="pun">&gt;&gt;</span><span class="pln"> TARGET_PAGE_BITS</span><span class="pun">,</span><span class="pln"> bitmap</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">dirty</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                trace_get_queued_page_not_dirty</span><span class="pun">(</span><span class="pln">
                    block</span><span class="pun">-&gt;</span><span class="pln">idstr</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="typ">uint64_t</span><span class="pun">)</span><span class="pln">offset</span><span class="pun">,</span><span class="pln">
                    </span><span class="pun">(</span><span class="typ">uint64_t</span><span class="pun">)*</span><span class="pln">ram_addr_abs</span><span class="pun">,</span><span class="pln">
                    test_bit</span><span class="pun">(*</span><span class="pln">ram_addr_abs </span><span class="pun">&gt;&gt;</span><span class="pln"> TARGET_PAGE_BITS</span><span class="pun">,</span><span class="pln">
                        atomic_rcu_read</span><span class="pun">(&amp;</span><span class="pln">migration_bitmap_rcu</span><span class="pun">)-&gt;</span><span class="pln">unsentmap</span><span class="pun">));</span><span class="pln">
            </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                trace_get_queued_page</span><span class="pun">(</span><span class="pln">block</span><span class="pun">-&gt;</span><span class="pln">idstr</span><span class="pun">,</span><span class="pln">
                                    </span><span class="pun">(</span><span class="typ">uint64_t</span><span class="pun">)</span><span class="pln">offset</span><span class="pun">,</span><span class="pln">
                                    </span><span class="pun">(</span><span class="typ">uint64_t</span><span class="pun">)*</span><span class="pln">ram_addr_abs</span><span class="pun">);</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">block </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">!</span><span class="pln">dirty</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">block</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">/*
        * As soon as we start servicing pages out of order, then we have
        * to kill the bulk stage, since the bulk stage assumes
        * in (migration_bitmap_find_and_reset_dirty) that every page is
        * dirty, that's no longer true.
        */</span><span class="pln">
        ram_bulk_stage </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">

        </span><span class="com">/*
        * We want the background search to continue from the queued page
        * since the guest is likely to want other pages near to the page
        * it just requested.
        */</span><span class="pln">
        pss</span><span class="pun">-&gt;</span><span class="pln">block </span><span class="pun">=</span><span class="pln"> block</span><span class="pun">;</span><span class="pln">
        pss</span><span class="pun">-&gt;</span><span class="pln">offset </span><span class="pun">=</span><span class="pln"> offset</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">!!</span><span class="pln">block</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div>

<p>In this function we find the dirty page in bitmap.</p>

<p>The following shows the process of dirty bitmap tracking.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight prettyprint prettyprinted" style=""><code><span class="pun">+-------------+</span><span class="pln">          </span><span class="pun">+----------+</span><span class="pln">       </span><span class="pun">+--------------+</span><span class="pln">          </span><span class="pun">+---------------------+</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">|</span><span class="pln">          </span><span class="pun">|</span><span class="pln"> ram_list </span><span class="pun">+-----&gt;</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> dirty_memory </span><span class="pun">+--------&gt;</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> migration_bitmap_rcu</span><span class="pun">|</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">|</span><span class="pln">          </span><span class="pun">+----------+</span><span class="pln">       </span><span class="pun">+------+-------+</span><span class="pln">          </span><span class="pun">+---------------------+</span><span class="pln">
</span><span class="pun">|</span><span class="pln"> </span><span class="typ">Guest</span><span class="pln">       </span><span class="pun">|</span><span class="pln">                                    </span><span class="pun">^</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">|</span><span class="pln">                                    </span><span class="pun">|</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">|</span><span class="pln">                                    </span><span class="pun">|</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">|</span><span class="pln">                                    </span><span class="pun">|</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">+--------------------------------+</span><span class="pln">   </span><span class="pun">|</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">|</span><span class="pln">                                </span><span class="pun">|</span><span class="pln">   </span><span class="pun">|</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">|</span><span class="pln">                                </span><span class="pun">|</span><span class="pln">   </span><span class="pun">|</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">|</span><span class="pln">                                </span><span class="pun">|</span><span class="pln">   </span><span class="pun">|</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">|</span><span class="pln">                                v   </span><span class="pun">|</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">|</span><span class="pln">                                    </span><span class="pun">|</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">|</span><span class="pln">          </span><span class="pun">+---------+</span><span class="pln">       </span><span class="pun">+-------+--------+</span><span class="pln">
</span><span class="pun">|</span><span class="pln">             </span><span class="pun">|</span><span class="pln">          </span><span class="pun">|</span><span class="pln"> memslot </span><span class="pun">+-----&gt;</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> dirty_bitmap   </span><span class="pun">|</span><span class="pln">
</span><span class="pun">+-------------+</span><span class="pln">          </span><span class="pun">+---------+</span><span class="pln">       </span><span class="pun">+----------------+</span></code></pre></div></div>

        </div>

    
        <ul class="tag_box inline">
            <li><i class="icon-folder-open"></i></li>
            
            


  
     
    	<li><a href="/categories.html#技术-ref">
    		技术 <span>101</span>
    	</a></li>
    
  


        </ul>
        

    
        <ul class="tag_box inline">
            <li><i class="icon-tags"></i></li>
            
            


  
     
    	<li><a href="/tags.html#qemu-ref">qemu <span>3</span></a></li>
    
  



        </ul>
        

        <hr>
        <div class="pagination">
            <ul>
            
                <li class="prev"><a href="/%E6%8A%80%E6%9C%AF/2018/07/25/add-new-qmp" title="Add a new qmp command for qemu ">← Previous</a></li>
            
                <li><a href="/archive.html">Archive</a></li>
            
                <li class="next"><a href="/%E6%8A%80%E6%9C%AF/2018/08/27/kvm-interrupt-emulation" title="kvm interrupt emulation">Next →</a></li>
            
            </ul>
        </div>
        <hr>
        


  <div id="disqus_thread"></div>
<script type="text/javascript">
    
    var disqus_shortname = 'terenceli'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




    </div>
</div>


            </div>
            <hr>
            <footer>
                <p>© 2025 Terenceli
                    with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
                    and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
                </p>
            </footer>

        </div>

        


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-123-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



    


<orbit-wrapper style="border-block: initial; border-inline: initial; border-start-start-radius: initial; border-start-end-radius: initial; border-end-start-radius: initial; border-end-end-radius: initial; overflow-block: initial; overflow-inline: initial; overscroll-behavior-block: initial; overscroll-behavior-inline: initial; margin-block: initial; margin-inline: initial; scroll-margin-block: initial; scroll-margin-inline: initial; padding-block: initial; padding-inline: initial; scroll-padding-block: initial; scroll-padding-inline: initial; inset-block: initial; inset-inline: initial; block-size: initial; min-block-size: initial; max-block-size: initial; inline-size: initial; min-inline-size: initial; max-inline-size: initial; contain-intrinsic-block-size: initial; contain-intrinsic-inline-size: initial; background: initial; background-blend-mode: initial; border: initial; border-radius: initial; box-decoration-break: initial; -moz-float-edge: initial; display: initial; position: fixed; float: initial; clear: initial; vertical-align: initial; baseline-source: initial; overflow: initial; overflow-anchor: initial; transform: initial; rotate: initial; scale: initial; translate: initial; offset: initial; scroll-behavior: initial; scroll-snap-align: initial; scroll-snap-type: initial; scroll-snap-stop: initial; overscroll-behavior: initial; isolation: initial; break-after: initial; break-before: initial; break-inside: initial; resize: initial; perspective: initial; perspective-origin: initial; backface-visibility: initial; transform-box: initial; transform-style: initial; transform-origin: initial; contain: initial; content-visibility: initial; container: initial; appearance: initial; -moz-orient: initial; will-change: initial; shape-image-threshold: initial; shape-margin: initial; shape-outside: initial; touch-action: initial; -webkit-line-clamp: initial; scrollbar-gutter: initial; zoom: initial; columns: initial; column-fill: initial; column-rule: initial; column-span: initial; content: initial; counter-increment: initial; counter-reset: initial; counter-set: initial; opacity: initial; box-shadow: initial; clip: initial; filter: initial; backdrop-filter: initial; mix-blend-mode: initial; font: initial; font-synthesis: initial; font-palette: initial; math-depth: initial; math-style: initial; -moz-osx-font-smoothing: initial; visibility: initial; writing-mode: initial; text-orientation: initial; print-color-adjust: initial; image-rendering: initial; image-orientation: initial; dominant-baseline: initial; text-anchor: initial; color-interpolation: initial; color-interpolation-filters: initial; fill: initial; fill-opacity: initial; fill-rule: initial; shape-rendering: initial; stroke: initial; stroke-width: initial; stroke-linecap: initial; stroke-linejoin: initial; stroke-miterlimit: initial; stroke-opacity: initial; stroke-dasharray: initial; stroke-dashoffset: initial; clip-rule: initial; marker: initial; paint-order: initial; border-collapse: initial; empty-cells: initial; caption-side: initial; border-spacing: initial; color: initial; text-transform: initial; hyphens: initial; -moz-text-size-adjust: initial; text-indent: initial; overflow-wrap: initial; word-break: initial; text-justify: initial; text-align-last: initial; text-align: initial; letter-spacing: initial; word-spacing: initial; white-space: initial; text-shadow: initial; text-emphasis: initial; text-emphasis-position: initial; tab-size: initial; line-break: initial; -webkit-text-fill-color: initial; -webkit-text-stroke: initial; ruby-align: initial; ruby-position: initial; text-combine-upright: initial; text-rendering: initial; text-underline-offset: initial; text-underline-position: initial; text-decoration-skip-ink: initial; hyphenate-character: initial; forced-color-adjust: initial; -webkit-text-security: initial; text-wrap: initial; cursor: initial; pointer-events: initial; -moz-user-input: initial; caret-color: initial; accent-color: initial; color-scheme: initial; scrollbar-color: initial; list-style: initial; quotes: initial; margin: initial; overflow-clip-margin: initial; scroll-margin: initial; outline: initial; outline-offset: initial; padding: initial; scroll-padding: initial; page: initial; top: 0px; right: 0px; bottom: initial; left: initial; z-index: 2147483647; flex-flow: initial; place-content: initial; place-items: initial; flex: initial; place-self: initial; order: initial; height: 100vh; min-height: initial; max-height: initial; width: 0px; min-width: initial; max-width: initial; box-sizing: initial; object-fit: initial; object-position: initial; grid-area: initial; grid: initial; gap: initial; aspect-ratio: initial; contain-intrinsic-size: initial; vector-effect: initial; stop-color: initial; stop-opacity: initial; flood-color: initial; flood-opacity: initial; lighting-color: initial; mask-type: initial; clip-path: initial; mask: initial; x: initial; y: initial; cx: initial; cy: initial; rx: initial; ry: initial; r: initial; d: initial; table-layout: initial; text-overflow: initial; text-decoration: initial; ime-mode: initial; scrollbar-width: initial; user-select: initial; -moz-window-dragging: initial; -moz-force-broken-image-icon: initial; transition: initial; animation: initial; animation-composition: initial; -moz-box-align: initial; -moz-box-direction: initial; -moz-box-flex: initial; -moz-box-orient: initial; -moz-box-pack: initial; -moz-box-ordinal-group: initial;"></orbit-wrapper></body><div style="all: initial;"><div style="all: initial;" id="__hcfy__"></div></div><div id="immersive-translate-popup" style="all: initial"></div><div id="immersive-translate-popup" style="all: initial"></div></html>